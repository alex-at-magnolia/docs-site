<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Known issues - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/core/administration/Known-issues.html">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="">
        <img class="logo" src="../../../_/img/magnolia-medium.png" style="width: 10rem; height:auto; margin-left:0.8rem; margin-top:0.4rem;" alt="Magnolia">
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Releases</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Core</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Getting Started</a>
            <a class="navbar-item" href="#">Features</a>
            <a class="navbar-item" href="#">Developing</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Cloud</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Getting Started</a>
            <a class="navbar-item" href="#">Features</a>
            <a class="navbar-item" href="#">Cloud Light Development</a>
            <a class="navbar-item" href="#">Upgrading in the Cloud</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Getting Started</a>
            <a class="navbar-item" href="#">Visual SPA Editor</a>
            <a class="navbar-item" href="#">API</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.magnolia-cms.com/get-started">Get Magnolia</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
  <div class="lower-head">
    
  </div>
</header>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Documentation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../releases/Releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/Features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../modules/Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Logging_in.html">Logging in</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Editing_pages.html">Editing pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Managing_pages.html">Managing pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Editing_images.html">Editing images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Managing_assets.html">Managing assets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Publishing.html">Publishing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Deleting_and_restoring.html">Deleting and restoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Keyboard_shortcuts.html">Keyboard shortcuts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Feeds.html">Feeds</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI-v3.html">Magnolia CLI v3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Updating-CLI-to-v3.html">Updating CLI to v3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI-v2.html">Magnolia CLI v2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI-walkthrough.html">Magnolia CLI walkthrough</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../support/Support.html">Need Support?</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Magnolia Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Magnolia Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../6.2.1/index.html">6.2.1</a>
        </li>
        <li class="version">
          <a href="../../6.2/index.html">6.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">master</button>
  <div class="version-menu">
    <a class="version is-current" href="Known-issues.html">master</a>
    <a class="version" href="../../6.2.1/core/administration/Known-issues.html">6.2.1</a>
    <a class="version is-missing" href="../../6.2/index.html">6.2</a>
  </div>
</div>
  <a href="../../releases/Releases.html" class="home-link"></a>

<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Known-issues.html">Known issues - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>

</div>
  <div class="content">
<article class="doc">
<h1 class="page">Known issues - Magnolia 6.2 documentation</h1>
<div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Administration.html" class="bare">Administration.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Administration.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="Troubleshooting.html">Troubleshooting</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196595964"><a class="anchor" href="#src-196595964"></a>Known issues</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p>These are common issues that you may encounter during system
installation or use. If you are upgrading on or to the 6.2 branch, also
see
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Upgrading+to+Magnolia+6.2.x">Upgrading
to Magnolia 6.2.x</a>.</p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>For additional clarifications or help contact
<a href="https://documentation.magnolia-cms.com/display/DOCS/Support">Magnolia
support</a>.</p>
</div>
<div class="sect2">
<h3 id="src-196595964_Knownissues-Systems"><a class="anchor" href="#src-196595964_Knownissues-Systems"></a>Systems</h3>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Tomcat"><a class="anchor" href="#src-196595964_Knownissues-Tomcat"></a>Tomcat</h4>
<div class="sect4">
<h5 id="src-196595964_Knownissues-Trailingslashissue"><a class="anchor" href="#src-196595964_Knownissues-Trailingslashissue"></a>Trailing slash issue</h5>
<div class="paragraph">
<p>When accessing the webapp without the trailing slash after the context
<a href="http://localhost:8080/magnoliaAuthor" class="bare">http://localhost:8080/magnoliaAuthor</a> after login the user is presented
with a 404 page rather than admincentral. This behavior is configurable
via the <code>mapperContextRootRedirectEnabled</code> and
<code>mapperDirectoryRedirectEnabled</code> attributes of the Context which may be
used to restore the previous behavior.</p>
</div>
</div>
<div class="sect4">
<h5 id="src-196595964_Knownissues-Reloadingapagecausesa404error"><a class="anchor" href="#src-196595964_Knownissues-Reloadingapagecausesa404error"></a>Reloading a page causes a 404 error</h5>
<div class="paragraph">
<p>When you open a page for editing and reload it in the browser, an extra
semicolon is added to the URL fragment and the server returns a 404
error. Every subsequent reload adds another semicolon. This issue occurs
with older versions of the Tomcat application server. To resolve this
issue, upgrade to Tomcat 7.0.47+. See
<a href="https://jira.magnolia-cms.com/browse/MGNLUI-2426?src=confmacro"><</a> - Reloading page in editor causes 404
<span class="status  green  subtle">Closed</span></p>
</div>
</div>
<div class="sect4">
<h5 id="src-196595964_Knownissues-Tomcat8usingBCELmaythrowclassformatexception"><a class="anchor" href="#src-196595964_Knownissues-Tomcat8usingBCELmaythrowclassformatexception"></a>Tomcat 8 using BCEL may throw class format exception</h5>
<div class="paragraph">
<p>On Tomcat 8.5 or lower, you may encounter a class format exception.</p>
</div>
<div class="paragraph">
<p><code>SEVERE [localhost-startStop-1] org.apache.catalina.startup.ContextConfig.processAnnotationsJar Unable to process Jar entry [module-info.class] from Jar [file:/home/magnolia/dev/magnolia-5.6.6/apache-tomcat-8.5.5/webapps/magnoliaPublic/WEB-INF/lib/javax.json-api-1.1.jar] for annotations</code></p>
</div>
<div class="paragraph">
<p>` org.apache.tomcat.util.bcel.classfile.ClassFormatException: Invalid byte tag in constant pool: 19`</p>
</div>
<div class="paragraph">
<p>Reason:</p>
</div>
<div class="paragraph">
<p><a href="https://commons.apache.org/proper/commons-bcel/">Apache Commons BCEL</a> is
used by Tomcat to scan for annotations. Some Java EE 8 APIs were
produced from JDK9 as <a href="http://openjdk.java.net/jeps/238">Multi-Release
JARs</a>. This means they&#8217;re compatible with Java 8, but may also contain
some Java 9 classes, including the <code>module-info.class</code>. Older Commons
BCEL versions did not know how to read such classes.</p>
</div>
<div class="paragraph">
<p>Tomcat 8.5.12 and 9.0.0 updated Commons BCEL to support this. See the
extract below from the
<a href="https://tomcat.apache.org/tomcat-8.5-doc/changelog.html">Tomcat
changelog</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="http://bz.apache.org/bugzilla/show_bug.cgi?id=60688">60688</a>: Update the
internal fork of Apache Commons BCEL to r1782855 to add early access
Java 9 support to the annotation scanning code. (markt)</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Solution:</p>
</div>
<div class="paragraph">
<p>Use Tomcat 8.5.12 or higher.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-IBMWebsphereandLinux"><a class="anchor" href="#src-196595964_Knownissues-IBMWebsphereandLinux"></a>IBM Websphere and Linux</h4>
<div class="paragraph">
<p>If you experience a JVM crash when running Magnolia 6.2 on Linux and IBM
Websphere server, disable the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Periscope+Result+Ranker+module">Periscope
Result Ranker module</a> by excluding the
<code>magnolia-periscope-result-ranker</code> artifact from the dependencies of
your project. For example:</p>
</div>
<div class="paragraph">
<p>`  &lt;dependencies&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;dependency&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;groupId&gt;info.magnolia.dx&lt;/groupId&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;artifactId&gt;magnolia-dx-core-demo-webapp&lt;/artifactId&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;type&gt;war&lt;/type&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;exclusions&gt;`</p>
</div>
<div class="paragraph">
<p>`        &lt;exclusion&gt;`</p>
</div>
<div class="paragraph">
<p>`          &lt;groupId&gt;info.magnolia.periscope&lt;/groupId&gt;`</p>
</div>
<div class="paragraph">
<p>`          &lt;artifactId&gt;magnolia-periscope-result-ranker&lt;/artifactId&gt;`</p>
</div>
<div class="paragraph">
<p>`        &lt;/exclusion&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;/exclusions&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;/dependency&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;dependency&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;groupId&gt;info.magnolia.dx&lt;/groupId&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;artifactId&gt;magnolia-dx-core-demo-webapp&lt;/artifactId&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;type&gt;pom&lt;/type&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;exclusions&gt;`</p>
</div>
<div class="paragraph">
<p>`        &lt;exclusion&gt;`</p>
</div>
<div class="paragraph">
<p>`          &lt;groupId&gt;info.magnolia.periscope&lt;/groupId&gt;`</p>
</div>
<div class="paragraph">
<p>`          &lt;artifactId&gt;magnolia-periscope-result-ranker&lt;/artifactId&gt;`</p>
</div>
<div class="paragraph">
<p>`        &lt;/exclusion&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;/exclusions&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;/dependency&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;dependency&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;groupId&gt;info.magnolia&lt;/groupId&gt;`</p>
</div>
<div class="paragraph">
<p>`      &lt;artifactId&gt;magnolia-module-websphere&lt;/artifactId&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;/dependency&gt;`</p>
</div>
<div class="paragraph">
<p>`  &lt;/dependencies&gt;`</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-JBoss7.2withJDK11"><a class="anchor" href="#src-196595964_Knownissues-JBoss7.2withJDK11"></a>JBoss 7.2 with JDK 11</h4>
<div class="paragraph">
<p>If you are using JBoss 7.2 with JDK 11 to deploy Magnolia, you may get
an error during installation. To resolve the issue, add the following
lines to <code>WEB-INF/jboss-deployment-structure.xml</code>:</p>
</div>
<div class="paragraph">
<p><code>&lt;deployment&gt;</code></p>
</div>
<div class="paragraph">
<p>` &lt;dependencies&gt;`</p>
</div>
<div class="paragraph">
<p>`  &lt;module name=<code>"jdk.unsupported"</code>/&gt;`</p>
</div>
<div class="paragraph">
<p>` &lt;/dependencies&gt;`</p>
</div>
<div class="paragraph">
<p><code>&lt;/deployment&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-MySQLJDBC8.0.x"><a class="anchor" href="#src-196595964_Knownissues-MySQLJDBC8.0.x"></a>MySQL JDBC 8.0.x</h4>
<div class="paragraph">
<p>If you are using the MySQL JDBC driver 8.0.x to install a new Magnolia
instance, you may encounter the following error:</p>
</div>
<div class="paragraph">
<p><code>2020<code>-</code>02<code>-</code>14<code> </code>14<code>:</code>35<code>:</code>07<code>,</code>538<code> ERROR org.apache.jackrabbit.core.RepositoryImpl: failed to start Repository: org.apache.jackrabbit.core.state.ItemStateException: failed to read bundle (stacktrace on DEBUG log level): deadbeef-face-babe-cafe-babecafebabe: java.sql.SQLSyntaxErrorException: Table </code>'&lt;DATABASE_NAME&gt;.&lt;TABLE_NAME&gt;'`</code> doesn&#8217;t exist`</p>
</div>
<div class="paragraph">
<p>This happens only when you install a new instance from scratch or create
database tables during installation. As a workaround, use JDBC 5.1.x or
create the tables manually in your database.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-OracleWebLogic"><a class="anchor" href="#src-196595964_Knownissues-OracleWebLogic"></a>Oracle WebLogic</h4>
<div class="paragraph">
<p>Magnolia 6.2 is not compatible with Oracle WebLogic.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_safe-id-S25vd25pc3N1ZXMtT1NYL21hY09T"><a class="anchor" href="#src-196595964_safe-id-S25vd25pc3N1ZXMtT1NYL21hY09T"></a>OS X / macOS</h4>
<div class="sect4">
<h5 id="src-196595964_Knownissues-Magnoliastartsupveryslowly"><a class="anchor" href="#src-196595964_Knownissues-Magnoliastartsupveryslowly"></a>Magnolia starts up very slowly</h5>
<div class="paragraph">
<p>Your Magnolia instance starts up very slowly, noticeably more than
before. You may encounter this after upgrading your macOS to Sierra
10.12 or later.</p>
</div>
<div class="paragraph">
<p>Workaround:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal and figure out the hostname of your Mac. To get the
hostname, use the command <code>hostname</code>.</p>
<div class="paragraph">
<p><code>hostname</code></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>joesLittleMacBookPro.local</code></p>
</div>
<div class="paragraph">
<p>+
The command returns the hostname of your Mac. In the given example, the
hostname is <code>joesLittleMacBookPro.local</code>.
. Open the file <code>/etc/hosts</code> with an editor of your choice. You will
edit the file in the next step.<br>
The file belongs to the system user <code>root</code>. Your user must belong to the
group admin; otherwise, you cannot save the changes to the file. You
will be asked for your password either when opening the file or when
trying to save it.
. Add these two lines to <code>/etc/hosts</code>:</p>
</div>
<div class="paragraph">
<p>+
/etc/hosts</p>
</div>
<div class="paragraph">
<p><code>127.0.0.1   &lt;hostname&gt;</code></p>
</div>
<div class="paragraph">
<p><code>::1         &lt;hostname&gt;</code></p>
</div>
<div class="paragraph">
<p>+
In place of <code>&lt;hostname&gt;</code>, use your real hostname.<br>
Most probably, your hosts file already contains entries starting with
<code>127.0.0.1</code> and with <code>::1</code>. Just add the real hostname at the end of one
line that starts with <code>::1</code> and at the end of another line that starts
with <code>127.0.0.1</code>. Make sure to add a space character before the
hostname.<br>
With the given hostname, the two lines would look like this:</p>
</div>
<div class="paragraph">
<p>+
/etc/hosts</p>
</div>
<div class="paragraph">
<p><code>127.0.0.1   localhost joesLittleMacBookPro.local</code></p>
</div>
<div class="paragraph">
<p><code>::1         localhost joesLittleMacBookPro.local</code>
. Save the file. The system may ask you for your password.</p>
</div>
<div class="paragraph">
<p>Further information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://thoeni.io/post/macos-sierra-java/" class="bare">https://thoeni.io/post/macos-sierra-java/</a></p>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/33289695/inetaddress-getlocalhost-slow-to-run-30-seconds/33289897#33289897" class="bare">https://stackoverflow.com/questions/33289695/inetaddress-getlocalhost-slow-to-run-30-seconds/33289897#33289897</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Windows"><a class="anchor" href="#src-196595964_Knownissues-Windows"></a>Windows</h4>
<div class="sect4">
<h5 id="src-196595964_Knownissues-JVMissues"><a class="anchor" href="#src-196595964_Knownissues-JVMissues"></a>JVM issues</h5>
<div class="sect5">
<h6 id="src-196595964_Knownissues-32-bitJVMdoesnotworkinWindows"><a class="anchor" href="#src-196595964_Knownissues-32-bitJVMdoesnotworkinWindows"></a>32-bit JVM does not work in Windows</h6>
<div class="paragraph">
<p>(<span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/information.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/information.svg"></span>
Tested on Windows 10.) When starting up Tomcat with the Magnolia CLI
<code>mgnl start</code> command, you get a flickering window, the server hangs and
nothing is written into the logs. To see the actual error, don&#8217;t use
Magnolia CLI to start Magnolia, start Tomcat directly with
<code>&lt;your-magnolia-install-folder&gt;\apache tomcat\bin\catalina.bat run</code>.
This should start Magnolia in the same window and allow you to see the
error message:</p>
</div>
<div class="paragraph">
<p><code>Error occurred during initialization of VM</code></p>
</div>
<div class="paragraph">
<p><code>Could not reserve enough space <code>for</code> 2097152KB object heap</code></p>
</div>
<div class="paragraph">
<p>The most likely cause is that you are trying to allocate too much heap
space in the 32-bit JVM.</p>
</div>
<div class="paragraph">
<p>Solution: Replace the JVM with a 64-bit version.</p>
</div>
<div class="paragraph">
<p>See also:
<a href="https://www.oracle.com/technetwork/java/hotspotfaq-138619.html#gc_heap_32bit">Why
can&#8217;t I get a larger heap with the 32-bit JVM?</a></p>
</div>
</div>
<div class="sect5">
<h6 id="src-196595964_Knownissues-NeitherJAVA_HOMEnorJRE_HOMEisdefined"><a class="anchor" href="#src-196595964_Knownissues-NeitherJAVA_HOMEnorJRE_HOMEisdefined"></a>Neither JAVA_HOME nor JRE_HOME is defined</h6>
<div class="paragraph">
<p>You get the following error message after a fresh Java installation:</p>
</div>
<div class="paragraph">
<p><code>Neither the JAVA_HOME nor the JRE_HOME environment variable is defined</code></p>
</div>
<div class="paragraph">
<p><code>At least one of these environment variables is needed to run <code>this</code> program</code></p>
</div>
<div class="paragraph">
<p>Solution: Set the variables through the "Edit the system environment
variables" dialog.</p>
</div>
</div>
<div class="sect5">
<h6 id="src-196595964_Knownissues-JRE_HOMEisundefined"><a class="anchor" href="#src-196595964_Knownissues-JRE_HOMEisundefined"></a>JRE_HOME is undefined</h6>
<div class="paragraph">
<p>If you get an error like this one:</p>
</div>
<div class="paragraph">
<p><code>The JRE_HOME environment variable is not defined correctly</code></p>
</div>
<div class="paragraph">
<p><code>The environment variable is needed to run <code>this</code> program</code></p>
</div>
<div class="paragraph">
<p>then you are most probably attempting to run Tomcat with the <code>JAVA_HOME</code>
variable set but without the <code>JRE_HOME</code> variable defined.</p>
</div>
<div class="paragraph">
<p>Solution: Set the <code>JRE_HOME</code> variable.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="src-196595964_Knownissues-FirewallisblockingJava"><a class="anchor" href="#src-196595964_Knownissues-FirewallisblockingJava"></a>Firewall is blocking Java</h5>
<div class="paragraph">
<p>Allow an exception in Windows Firewall for Java.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Control Panel &gt; Windows Firewall</strong>.</p>
</li>
<li>
<p>Go to the <strong>Exceptions</strong> tab.</p>
</li>
<li>
<p>Click <strong>Add Program</strong> and browse to the java.exe file in the Java
installation directory, for example <code>C:\Sun\SDK\jdk\bin\java.exe</code>.</p>
</li>
<li>
<p>Click <strong>OK</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you get a security alert during startup, check the <strong>Private networks</strong>
checkbox and click <strong>Allow access</strong>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196598855/WindowsFirewall.png" alt="images/download/attachments/196598855/WindowsFirewall.png"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="src-196595964_Knownissues-CATALINA_HOMEenvironmentvariableisnotdefined"><a class="anchor" href="#src-196595964_Knownissues-CATALINA_HOMEenvironmentvariableisnotdefined"></a>CATALINA_HOME environment variable is not defined</h5>
<div class="paragraph">
<p>CATALINA_HOME environment variable identifies the Tomcat home directory,
for example <code>C:\Program Files\magnolia\apache-tomcat</code>. Usually Magnolia
finds this directory automatically. When you type
<code>magnolia_control.bat start</code> in the <code>bin</code> directory to start the system,
a second script named <code>startup.bat</code> tries to find Tomcat home. It
assumes that Tomcat home is one level above the <code>bin</code> directory where
you issued the command, and sets the value of CATALINA_HOME to that
directory.</p>
</div>
<div class="paragraph">
<p><code>C:\Program Files</code></p>
</div>
<div class="paragraph">
<p>`    magnolia`</p>
</div>
<div class="paragraph">
<p>`        apache-tomcat   &#8592;- Tomcat home directory`</p>
</div>
<div class="paragraph">
<p>`            bin         &#8592;- magnolia_control.bat is here`</p>
</div>
<div class="paragraph">
<p>However, if you added the <code>bin</code> directory to your
<a href="#src-196595964_Knownissues-SetJAVAHOMEenvironmentvariable">PATH
environment variable</a> you can execute <code>magnolia_control.bat</code> from
anywhere. This means <code>startup.bat</code> does not find Tomcat home directory
by simply moving up one level from where you are and displays the
following error:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196598855/dialog_CATALINA_HOME_not_defined.png" alt="images/download/attachments/196598855/dialog_CATALINA_HOME_not_defined.png"></span></p>
</div>
<div class="paragraph">
<p>To correct this define CATALINA_HOME in environment variables. Follow
the instructions in
<a href="#src-196595964_Knownissues-SetJAVAHOMEenvironmentvariable">Set
JAVA_HOME environment variable</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="src-196595964_Knownissues-JARfiledoesnotstart"><a class="anchor" href="#src-196595964_Knownissues-JARfiledoesnotstart"></a>JAR file does not start</h5>
<div class="paragraph">
<p>When installing DX Core on Windows, you can start the installer by
double-clicking the JAR file. If this does not work there is a chance
that some application on your system has registered the .jar extension.</p>
</div>
<div class="paragraph">
<p>You can try to
<a href="http://www.google.com/search?q=restore+jar+file+association">fix it
yourself</a> by restoring the association of the .jar extension with the
<code>javaw.exe</code> executable. .Right-click the JAR file and select <strong>Open
With</strong>. Typically the <code>javaw.exe</code> file is in
<code>C:\Program Files (x86)\java\jre6\bin</code>). Alternatively, start the
installer from a command prompt with the following command:
<code>java -jar magnolia-dx-core-installer-x.y.z.jar</code>. Make sure the file
extension is .jar. Internet Explorer has a tendency to append or change
it to .zip.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196595964_Knownissues-Otherissues"><a class="anchor" href="#src-196595964_Knownissues-Otherissues"></a>Other issues</h3>
<div class="sect3">
<h4 id="src-196595964_Knownissues-H2database"><a class="anchor" href="#src-196595964_Knownissues-H2database"></a>H2 database</h4>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/warning.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/warning.svg"></span>
We don&#8217;t recommend using H2 database for production environments.</p>
</div>
<div class="sect4">
<h5 id="src-196595964_Knownissues-H2doesnotacceptmorethanoneconnection"><a class="anchor" href="#src-196595964_Knownissues-H2doesnotacceptmorethanoneconnection"></a>H2 does not accept more than one connection</h5>
<div class="paragraph">
<p>Our default configuration uses the server mode for H2. If you migrate
from Magnolia below 5.5.9 in the 5.5 branch or below 5.6.2 in the 5.6
branch and try to initiate a backup call using CLI or REST, it fails
because H2 does not allow more than one connection at a time. Configure
H2 to run in server mode by adding <code>AUTO_SERVER=TRUE</code> in the URL
parameters:</p>
</div>
<div class="paragraph">
<p><code>&lt;param name="url" value="jdbc:h2:${wsp.home}/db;AUTO_SERVER=TRUE" /&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;param name="url" value="jdbc:h2:${rep.home}/version/db;AUTO_SERVER=TRUE" /&gt;</code></p>
</div>
<div class="paragraph">
<p>See
<a href="https://jira.magnolia-cms.com/browse/MGNLCE-114?src=confmacro"><</a> - H2 doesn&#8217;t accept more than one connection anymore
<span class="status  green  subtle">Closed</span></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Logfullofindexruleswarningswhenupgradingfrom5.4.xdirectlyto6.2.x"><a class="anchor" href="#src-196595964_Knownissues-Logfullofindexruleswarningswhenupgradingfrom5.4.xdirectlyto6.2.x"></a>Log full of index rules warnings when upgrading from 5.4.x directly to 6.2.x</h4>
<div class="paragraph">
<p>Jackrabbit 2.16 introduced existence checks for node-types when
refreshing indexing configurations. Previously it would accept arbitrary
node-type names as strings. If your project is not using Magnolia&#8217;s
SearchIndex implementation, you may find the following messages in your
logs:</p>
</div>
<div class="paragraph">
<p><code>2018-07-25 17:48:33,691 WARN  rabbit.core.query.lucene.IndexingConfigurationImpl: Unable to refresh index rules</code></p>
</div>
<div class="paragraph">
<p><code>javax.jcr.nodetype.NoSuchNodeTypeException: {http://www.magnolia.info/jcr/mgnl}page</code></p>
</div>
<div class="paragraph">
<p>`  at org.apache.jackrabbit.core.nodetype.NodeTypeRegistry.getNodeTypeDef(NodeTypeRegistry.java:552) ~[jackrabbit-core-2.16.1.jar:2.16.1]`</p>
</div>
<div class="paragraph">
<p><code>2018-03-16 11:30:57,892 WARN  rg.apache.jackrabbit.core.query.lucene.SearchIndex: Exception initializing indexing configuration from: /info/magnolia/jackrabbit/indexing_configuration_website.xml</code></p>
</div>
<div class="paragraph">
<p><code>javax.jcr.nodetype.NoSuchNodeTypeException: {http://www.magnolia.info/jcr/mgnl}page</code></p>
</div>
<div class="paragraph">
<p>`  at org.apache.jackrabbit.core.nodetype.NodeTypeRegistry.getNodeTypeDef(NodeTypeRegistry.java:552) ~[jackrabbit-core-2.16.1.jar:2.16.1]`</p>
</div>
<div class="paragraph">
<p>To mitigate this problem, replace in your Jackrabbit search
configuration files</p>
</div>
<div class="paragraph">
<p><code>&lt;SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex"&gt;</code></p>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="paragraph">
<p><code>&lt;SearchIndex class="info.magnolia.jackrabbit.lucene.SearchIndex"&gt;</code></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/information.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/information.svg"></span>
The warnings should not appear in the logs if you follow our
recommendation to update first to the latest minor release version
before upgrading to the most recent major release, see
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Upgrading+to+Magnolia+6.2.x#UpgradingtoMagnolia6.2.x-anc-how-to">How
to update</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Toomanyopenfiles"><a class="anchor" href="#src-196595964_Knownissues-Toomanyopenfiles"></a>Too many open files</h4>
<div class="paragraph">
<p>The embedded Derby database, an option that can be used instead of the
H2 database, opens several file handles and may run over the maximum
limit set by the system. This issue can occur on some Linux and OS X
systems such as Macbook Air.</p>
</div>
<div class="paragraph">
<p>The solution is to increase the system-wide limit on the number of open
files. The exact procedure varies from one OS to the next, see
<a href="http://wiki.magnolia-cms.com/display/WIKI/Too+Many+Open+Files">Too many
open files</a>.</p>
</div>
<div class="paragraph">
<p>Ubuntu Linux</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Find the current maximum number of open files per user in a single
session:<br>
<code>ulimit -n</code><br>
By default the number is 1024 which is too small.</p>
</li>
<li>
<p>Edit the <code>limits.conf</code> file:<br>
<code>sudo gedit /etc/security/limits.conf</code></p>
</li>
<li>
<p>Add the following lines to the file:<br>
<code>* soft nofile 10000</code><br>
<code>* hard nofile 50000</code><br>
This sets for all users a soft limit of 10000 open files and a hard
limit of 50000. These are just example numbers. Set them according to
your system needs. Note that the wildcard option applies only to regular
users, not to superuser. If you run Magnolia as superuser replace the
asterisk with <code>root</code>.</p>
</li>
<li>
<p>Save the file.</p>
</li>
<li>
<p>Edit the configuration file for session-related modules:<br>
<code>sudo gedit /etc/pam.d/common-session</code></p>
</li>
<li>
<p>Add the following line to the file:<br>
<code>session required pam_limits.so</code></p>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>On *ubuntu 17.04 you&#8217;ll probably also have to add the following line</p>
</div>
<div class="paragraph">
<p><code>DefaultLimitNOFILE=65535</code></p>
</div>
<div class="paragraph">
<p>to <code>/etc/systemd/system.conf</code></p>
</div>
<div class="paragraph">
<p>and to `/etc/systemd/user.conf `.</p>
</div>
<div class="paragraph">
<p>See
<a href="https://superuser.com/questions/1200539/cannot-increase-open-file-limit-past-4096-ubuntu">Cannot
Increase open file limit past 4096 (Ubuntu)</a>.
. Save the file.
. Restart Ubuntu.
. Verify the new maximum number of open files:<br>
<code>ulimit -n</code><br>
The command should now return 10000.</p>
</div>
<div class="paragraph">
<p>Mac OSX</p>
</div>
<div class="paragraph">
<p>OS X 10.8 Mountain Lion:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Find the current maximum number of open files per user in a single
session:<br>
<code>ulimit -n</code><br>
By default the number is 256 which is too small.</p>
</li>
<li>
<p>Add <code>ulimit -n 65536</code> to your <code>~/.profile</code> file. This increases the
limit for the shell.</p>
</li>
<li>
<p>Create a file <code>/etc/sysctl.conf</code> if it doesn&#8217;t exist.</p>
</li>
<li>
<p>Add the following lines in <code>/etc/sysctl.conf</code>. This increases the
limit for the kernel.<br>
<code>kern.maxfiles=65536</code><br>
<code>kern.maxfilesperproc=65536</code></p>
</li>
<li>
<p>Open a terminal and type:</p>
<div class="paragraph">
<p><code>sudo sysctl -w kern.maxfiles=65536</code><br>
<code>sudo sysctl -w kern.maxfilesperproc=65536</code><br>
<code>sudo ulimit -n 65536</code></p>
</div>
<div class="paragraph">
<p>&#8201;&#8212;&#8201;OR&#8201;&#8212;&#8201;+
Restart OSX to read the settings from the files you edited.</p>
</div>
</li>
<li>
<p>Type <code>ulimit -n</code>. The response should be <code>65536</code>. (If not, restart
OSX)</p>
</li>
<li>
<p>Install Magnolia</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>OS X 10.9 (Mavericks), 10.10 (Yosemite) and 10.11 (El Capitan), see
<a href="http://unix.stackexchange.com/questions/108174/how-to-persist-ulimit-settings-in-osx-mavericks/221988#221988">Shell
Session Limit</a></p>
</div>
<div class="paragraph">
<p>OS X 10.12 (Sierra) and 10.13 (High Sierra), see
<a href="https://superuser.com/questions/433746/is-there-a-fix-for-the-too-many-open-files-in-system-error-on-os-x-10-7-1/1171028">the
answer given for For OS X Sierra (10.12.X) on this page.</a></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Sessionde-serialization"><a class="anchor" href="#src-196595964_Knownissues-Sessionde-serialization"></a>Session de-serialization</h4>
<div class="paragraph">
<p>When installing or updating to a new version, you may see this error
message:</p>
</div>
<div class="paragraph">
<p><code>2009<code>-</code>11<code>-</code>24<code> </code>13<code>:</code>02<code>:</code>14<code>,</code>970<code> ERROR org.apache.catalina.session.ManagerBase: IOException </code>while`</code> loading persisted sessions`</p>
</div>
<div class="paragraph">
<p>This can be due to changes in signatures of classes that are stored in
user sessions, such as permissions, user, etc. The error happens when
Tomcat attempts to de-serialize serialized sessions as the container
starts. The de-serialization causes the loss of persisted sessions.
Users will have to log in again. Otherwise it is a harmless error and
can be ignored.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Port8080isalreadyinuse"><a class="anchor" href="#src-196595964_Knownissues-Port8080isalreadyinuse"></a>Port 8080 is already in use</h4>
<div class="paragraph">
<p>Port 8080 is the default port for Tomcat. You can see it at the end of
the default address `http://localhost:8080 `. If another application on
the computer is already using the same port, you may need to change it.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>&lt;CATALINA_HOME&gt;/conf/server.xml</code> in a text editor. This file is
under your Magnolia installation directory.</p>
</li>
<li>
<p>Find the following section and set the value of <code>port</code> to something
other than 8080, for example 8090:</p>
<div class="paragraph">
<p><code>&lt;!-- Define a non-SSL HTTP/<code>1.1</code> Connector on port <code>8080</code> -&#8594;</code></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&lt;Connector port=<code>"8090"</code> maxHttpHeaderSize=``"8192"</code></p>
</div>
<div class="paragraph">
<p>`           maxThreads=<code>"150"</code> minSpareThreads=<code>"25"</code> maxSpareThreads=<code>`"75"</code></p>
</div>
<div class="paragraph">
<p>`           enableLookups=<code>"false"</code> redirectPort=<code>"8443"</code> acceptCount=<code>`"100"</code></p>
</div>
<div class="paragraph">
<p>`           connectionTimeout=<code>"20000"</code> disableUploadTimeout=<code>"true"</code> /&gt;`</p>
</div>
<div class="paragraph">
<p>Change the <code>defaultBaseUrl</code> property, which is used to create absolute
links in emails or other external systems. To do this, you need to now
access Magnolia at the new port 8090.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log into the author instance at
`http://localhost:8090/magnoliaAuthor/.magnolia `.</p>
</li>
<li>
<p>Go to <strong>Configuration</strong>.</p>
</li>
<li>
<p>Set the value of <code>/server/defaultBaseUrl</code> property to
<code><a href="http://localhost:8090/magnolia/" class="bare">http://localhost:8090/magnolia/</a></code>.</p>
</li>
<li>
<p>Log into the public instance at
`http://localhost:8090/magnoliaPublic/.magnolia `.</p>
</li>
<li>
<p>Go to <strong>Configuration</strong>.</p>
</li>
<li>
<p>Set the value of <code>/server/defaultBaseUrl</code> property to
<code><a href="http://localhost:8090/magnolia/" class="bare">http://localhost:8090/magnolia/</a></code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now the Welcome page at `http://localhost:8090 `has the correct URLs
too.</p>
</div>
<div class="paragraph">
<p>The port also needs to be changed in publishing configuration, otherwise
publishing (activating) changes from the author to public instance
fails.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the author instance,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If you are using the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Publishing+module">Publishing
module</a>, go to <strong>Configuration &gt; modules &gt; publishing-core *&gt; config &gt;</strong>
receivers* .</p>
</li>
<li>
<p>If you are using the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Activation+module">Activation
module</a>, go to <strong>Configuration &gt; modules &gt; activation <strong>&gt; s</strong>ubscribers</strong>
.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Under the <code>magnoliaPublic8080</code> receiver (subscriber), set the <code>URL</code>
property to `http://localhost:8090/magnoliaPublic `.</p>
</li>
<li>
<p>Rename the receiver (subscriber) to <code>magnoliaPublic8090</code>.</p>
</li>
<li>
<p>Activate the modified receiver (subscriber) including its subnodes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>If you want to run two different Tomcats simultaneously you need to
change other ports too. This is useful if you want to run different
versions of Magnolia at the same time. In
<code>&lt;CATALINA_HOME&gt;/conf/server.xml</code>, change the port numbers for the
shutdown and AJP sections and any custom sections you have enabled.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Javaoutofmemory"><a class="anchor" href="#src-196595964_Knownissues-Javaoutofmemory"></a>Java out of memory</h4>
<div class="paragraph">
<p>If the Java Virtual Machine (JVM) does not have enough memory you may
see a `java.lang.OutOfMemoryError `in the startup log and Magnolia fails
to start.</p>
</div>
<div class="paragraph">
<p><code>Exception in thread <code>"Timer-1"</code> java.lang.OutOfMemoryError: Java heap space</code></p>
</div>
<div class="paragraph">
<p><code>at org.apache.jackrabbit.core.query.lucene.IndexingQueue.getFinishedDocuments</code></p>
</div>
<div class="paragraph">
<p>Increase Java heap size to allocate more memory to JVM:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the server.<br>
<code>./magnolia_control.sh stop</code></p>
</li>
<li>
<p>Open file <code>/apache-tomcat/bin/setenv.sh</code>
(<code>/apache-tomcat/bin/setenv.bat</code> on Windows) in a text editor.</p>
</li>
<li>
<p>Edit the <code>Xmx</code> parameter to set a new maximum heap size. Default size
for Magnolia is 2048M, try a higher amount such as 4096M.</p>
</li>
<li>
<p>Save the file and start the server.<br>
<code>./magnolia_control.sh start &amp;&amp; tail -f ../logs/catalina.out</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Publishingandactivationerrors"><a class="anchor" href="#src-196595964_Knownissues-Publishingandactivationerrors"></a>Publishing and activation errors</h4>
<div class="paragraph">
<p>For issues related to publishing/activation keys and the handshaking
process, see either the <a href="Publishing-errors.html">Publishing errors</a>
page or the <a href="Activation-errors.html">Activation errors</a> page,
depending on <a href="Publishing-and-activation.html">the module you use</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Newsecurityfilter"><a class="anchor" href="#src-196595964_Knownissues-Newsecurityfilter"></a>New security filter</h4>
<div class="paragraph">
<p><a href="https://jira.magnolia-cms.com/browse/MAGNOLIA-6865">MAGNOLIA-6865</a>
introduced a new security filter that checks each POST request. As this
may affect the functionality of your existing forms, please contact us
and we&#8217;ll provide you with more information about this issue.</p>
</div>
<div class="paragraph">
<p>For security reasons, however, we cannot disclose further details on
this page.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-ContentstoredinCEappsnotdisplayed"><a class="anchor" href="#src-196595964_Knownissues-ContentstoredinCEappsnotdisplayed"></a>Content stored in CE apps not displayed</h4>
<div class="paragraph">
<p>In the Community Edition, if you edit content created in an app and the
instance has no default i18n support, the content will not be displayed
in the detail subapp of the app.
(<a href="https://jira.magnolia-cms.com/browse/MGNLUI-5770">MGNLUI-5770</a>)</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_safe-id-S25vd25pc3N1ZXMtUmVuZGVyaW5nU2luZ2xlLVBhZ2VBcHBsaWNhdGlvbnMoU1BBKQ"><a class="anchor" href="#src-196595964_safe-id-S25vd25pc3N1ZXMtUmVuZGVyaW5nU2luZ2xlLVBhZ2VBcHBsaWNhdGlvbnMoU1BBKQ"></a>Rendering Single-Page Applications (SPA)</h4>
<div class="paragraph">
<p>Currently, the following functionalities are not supported in SPA
rendering:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Component+autogeneration">component
autogeneration</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Component+inheritance">component
inheritance</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Component+personalization">component
personalization</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Component+definition">fragment
definition</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Structuring+page+areas">area-in-area
nesting</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_safe-id-S25vd25pc3N1ZXMtSFRUUHJhbmdlcmVxdWVzdHNmcm9tRmFjZWJvb2tkb24ndHdvcms"><a class="anchor" href="#src-196595964_safe-id-S25vd25pc3N1ZXMtSFRUUHJhbmdlcmVxdWVzdHNmcm9tRmFjZWJvb2tkb24ndHdvcms"></a>HTTP range requests from Facebook don&#8217;t work</h4>
<div class="paragraph">
<p>Facebook uses HTTP range requests to read Open Graph tags. This may
cause that the Facebook crawler is not working for Magnolia websites. A
workaround for this issue is to use a voter which bypasses the gzip
filter if the incoming request is of the range type and is coming from
Facebook:</p>
</div>
<div class="paragraph">
<p>config.server.filters.gzip.bypasses.facebookCrawler.yaml</p>
</div>
<div class="paragraph">
<p><code>'facebookCrawler'`</code>:`</p>
</div>
<div class="paragraph">
<p>`  <code>'class'</code>: info.magnolia.voting.voters.BoolVoterSet`</p>
</div>
<div class="paragraph">
<p>`  <code>'op'</code>: AND`</p>
</div>
<div class="paragraph">
<p>`  <code>'voters'</code>:`</p>
</div>
<div class="paragraph">
<p>`    <code>'userAgent'</code>:`</p>
</div>
<div class="paragraph">
<p>`      <code>'class'</code>: info.magnolia.voting.voters.RequestHeaderPatternRegexVoter`</p>
</div>
<div class="paragraph">
<p>`      <code>'headerName'</code>: User-Agent`</p>
</div>
<div class="paragraph">
<p>`      <code>'pattern'</code>: .<strong>facebookexternalhit.</strong>`</p>
</div>
<div class="paragraph">
<p>`    <code>'rangeRequest'</code>:`</p>
</div>
<div class="paragraph">
<p>`      <code>'class'</code>: info.magnolia.voting.voters.RequestHeaderPatternRegexVoter`</p>
</div>
<div class="paragraph">
<p>`      <code>'headerName'</code>: Range`</p>
</div>
<div class="paragraph">
<p>`      <code>'pattern'</code>: .*`</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-VirtualURImappingsnotworkingiftoomanyareconfigured"><a class="anchor" href="#src-196595964_Knownissues-VirtualURImappingsnotworkingiftoomanyareconfigured"></a>Virtual URI mappings not working if too many are configured</h4>
<div class="paragraph">
<p>To mitigate an issue caused by having more than 500 configured virtual
URI mappings in light modules, a WARN-level message is now logged when a
<code>DirectoryWatcher</code> overflow occurs
(<a href="https://jira.magnolia-cms.com/browse/MAGNOLIA-7762">MAGNOLIA-7762</a>). We
recommend to keep the number of files in a single folder below 100 and
to use folder hierarchies whenever possible. For the upcoming fix, see
<a href="https://jira.magnolia-cms.com/browse/MAGNOLIA-7798">MAGNOLIA-7798</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Naturalordernotrespectedinresultsofcontentsearches"><a class="anchor" href="#src-196595964_Knownissues-Naturalordernotrespectedinresultsofcontentsearches"></a>Natural order not respected in results of content searches</h4>
<div class="paragraph">
<p>If you search for content using <code>searchfn.searchPage()</code>,
<code>searchfn.searchContent()</code> or by executing search queries directly from
a template, the search result order will not respect the natural order.
This issue is caused by a bug in Apache Jackrabbit filed as
<a href="https://issues.apache.org/jira/browse/JCR-3932">JCR-3932</a>: "Result of
JCR-SQL2 query doesn&#8217;t respect document order in JCR".</p>
</div>
<div class="paragraph">
<p>Until the JCR bug is fixed, do not use <code>searchfn</code>. To get the correct
order, execute JCR XPath queries directly.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_safe-id-S25vd25pc3N1ZXMtSW5CbG9zc29tbW9kdWxlLERpYWxvZ0NyZWF0aW9uQ29udGV4dGF0dHJpYnV0ZXNhcmVub3Rpbml0aWFsaXplZA"><a class="anchor" href="#src-196595964_safe-id-S25vd25pc3N1ZXMtSW5CbG9zc29tbW9kdWxlLERpYWxvZ0NyZWF0aW9uQ29udGV4dGF0dHJpYnV0ZXNhcmVub3Rpbml0aWFsaXplZA"></a>In Blossom module, DialogCreationContext attributes are not initialized</h4>
<div class="paragraph">
<p>In the latest release of the Blossom module, there are still certain
objects that the old <code>BlossomFormDialogPresenter</code> used to make
injectable, mostly Vaadin 7 items, JCR Node and node path.</p>
</div>
<div class="paragraph">
<p>For the time being, please keep using the Pages compatibility app for
these use cases. Magnolia 6 UI framework does not have configurable
form-dialog presenters, nor Vaadin 7 items.</p>
</div>
<div class="paragraph">
<p>The issue has been fixed only for the compatibility Pages app
(<code>magnolia-pages-app-compatibility</code>), not for the new Pages app
(<code>magnolia-pages-app</code>). For more details, see the following ticket:</p>
</div>
<div class="paragraph">
<p><a href="https://jira.magnolia-cms.com/browse/BLOSSOM-269?src=confmacro"><</a> - DialogCreationContext attributes are not initialised
<span class="status  green  subtle">Closed</span></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-DL4Jissues"><a class="anchor" href="#src-196595964_Knownissues-DL4Jissues"></a>DL4J issues</h4>
<div class="paragraph">
<p>There are limitations related to the deep learning and search features
of the <a href="https://wiki.magnolia-cms.com/display/DOCS62/Find+Bar">Find Bar</a>,
which are provided by the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Periscope+module">Periscope</a>
and
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Periscope+Result+Ranker+module">Periscope
Result Ranker</a> modules.</p>
</div>
<div class="sect4">
<h5 id="src-196595964_Knownissues-Off-heapmemorystarvation"><a class="anchor" href="#src-196595964_Knownissues-Off-heapmemorystarvation"></a>Off-heap memory starvation</h5>
<div class="paragraph">
<p>You should configure
<a href="https://deeplearning4j.konduit.ai/config/config-memory">DL4J memory
limits</a> to avoid off-heap memory starvation. This is particularly the
case with the <code>-Dorg.bytedeco.javacpp.maxbytes</code> JVM argument. For more
details, see
<a href="https://jira.magnolia-cms.com/browse/MGNLPER-121">MGNLPER-121</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="src-196595964_Knownissues-PeriscopepreventsdeployingthepublicwebappasROOTalongwiththeauthorinstance"><a class="anchor" href="#src-196595964_Knownissues-PeriscopepreventsdeployingthepublicwebappasROOTalongwiththeauthorinstance"></a>Periscope prevents deploying the public webapp as ROOT along with the author instance</h5>
<div class="paragraph">
<p>When experiencing this issue, the following message can be found in the
logs:
<code>java.lang.NoClassDefFoundError: Could not initialize class org.nd4j.linalg.factory</code>.
The issue may appear even on more than just one Tomcat instance, running
on the same VM and the same JDK.<br>
<br>
The ndj4 library can only be initiated once. Therefore, result ranking
on public instances should be disabled, which you can do either by
changing the configuration of the Periscope Result Ranker module, or
rather by completely removing the <code>magnolia-periscope-result-ranker</code>
module from your WAR package. After this modification, the search
function will be available but search results will not be ranked. For
more details see
<a href="https://jira.magnolia-cms.com/browse/MGNLPER-112">MGNLPER-112</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-196595964_Knownissues-Performanceissues"><a class="anchor" href="#src-196595964_Knownissues-Performanceissues"></a>Performance issues</h4>
<div class="paragraph">
<p>For details please see the <a href="Performance-issues.html">Performance
issues</a> subpage.</p>
</div>
<div class="paragraph">
<p>Instances are not in sync</p>
</div>
<div class="paragraph">
<p>Performance issues</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.magnolia-cms.com" class="icon">
            <img src="../../../_/img/magnolia-medium.png" alt="Magnolia">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://documentation.magnolia-cms.com" target="_blank" rel="noopener">Full Docs Set</a></li>
          <li><a href="https://wiki.magnolia-cms.com/" target="_blank" rel="noopener">Community Wiki</a></li>
          <li><a href="https://support.magnolia-cms.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://marketplace.magnolia-cms.com/" target="_blank" rel="noopener">Extend Magnolia</a></li>
          <li><a href="https://magnolia-cms.com/blog" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.magnolia-cms.com/training" target="_blank" >Training</a></li>
        </ul>
      </div>
      <div class="col">
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Magnolia" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/magnolia_cms" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/magnolia-cms" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2020 Magnolia International Ltd. All rights reserved.</span>
      <a href="https://www.magnolia-cms.com/legal/privacy.html">Privacy Policy</a>
    </div>
  </div>
</footer>

<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
