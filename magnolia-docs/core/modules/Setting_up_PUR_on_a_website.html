<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting up PUR on a website - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/core/modules/Setting_up_PUR_on_a_website.html">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="">
        <img class="logo" src="../../../_/img/magnolia-medium.png" style="width: 10rem; height:auto; margin-left:0.8rem; margin-top:0.4rem;" alt="Magnolia">
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../../magnolia-docs/releases/Releases.html">Releases</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Core</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../magnolia-docs/core/getting-started/hello-magnolia.html">Getting Started</a>
            <a class="navbar-item" href="../../../magnolia-docs/core/features/Features.html">Features</a>
            <a class="navbar-item" href="../../../magnolia-docs/core/developing/Developing.html">Developing</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Cloud</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../magnolia-docs/cloud/getting-started/hello-cloud.html">Getting Started</a>
            <a class="navbar-item" href="../../../magnolia-docs/cloud/Cockpit.html">The Cockpit</a>
            <a class="navbar-item" href="../../../magnolia-docs/cloud/Developing-for-Magnolia-in-the-cloud.html">Developing in the Cloud</a>
            <a class="navbar-item" href="../../../magnolia-docs/cloud/Upgrading-Magnolia-in-the-cloud.html">Upgrading in the Cloud</a>
          </div>
        </div>
        <a class="navbar-item" href="https://hd.magnolia-cms.com/docs/introduction/" target="_blank">Headless</a>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.magnolia-cms.com/get-started">Get Magnolia</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
  <div class="lower-head">
    
  </div>
</header>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Releases and Upgrading</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../releases/Releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Features</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/Cache.html">Cache</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/Commenting.html">Commenting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../features/content-authoring.html">Content authoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/content-editor.html">Content editor</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/content-tagging.html">Content tagging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/content-types.html">Content types</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/data-privacy.html">Data privacy</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/dam.html">Digital asset management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/find-bar.html">Find bar</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/image-recognition.html">Image recognition</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#core/features/integration.adoc">Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../features/Personalization.html">Personalization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/component-personalization.html">Component personalization</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/rest-in-magnolia.html">REST in Magnolia</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../features/Search.html">Search</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#core/features/jackrabbit-search.adoc">Placeholder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#core/features/solr-search.adoc">Placeholder</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/search-engine-optimization.html">SEO</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/spa.html">SPA</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/Tasks.html">Tasks</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/text-classification.html">Text classification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features/Workflow.html">Workflow</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cloud</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Cloud</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cloud/Onboarding-to-Magnolia-Cloud.html">Onboarding to Magnolia Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Cloud-domains-and-certificates.html">Domains and Certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Cloud-user-management.html">Cloud user management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/ses-email.html">AWS SES Email</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cloud/Cockpit.html">The Cockpit</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-cockpit-concepts.html">Cockpit concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Managing-subscribers.html">Managing subscribers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Understanding-activity-logs.html">Cockpit Activity logs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Understanding-cockpit-notifications.html">Cockpit Notifications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cloud/Developing-for-Magnolia-in-the-cloud.html">Developing for Magnolia Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Creating-and-deploying-custom-cloud-bundles.html">Creating custom cloud bundles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Setting-up-a-local-Git-repository.html">Setting up git repository</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Setting-up-a-Magnolia-bundle-for-local-development.html">Setting up bundle for local development</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Developing-and-testing.html">Developing and testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#cloud/Committing-and-pushing-to-the-remote-Magnolia-git-repository.adoc">Pushing to the remote git repository</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cloud/Installing-updates-using-the-Magnolia-cockpit.html">Installing updates in the cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Installing-a-snapshot.html">Installing a snapshot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Defining-a-release.html">Defining a release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Installing-a-release-in-UAT.html">Installing release in UAT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Installing-a-release-in-Live.html">Installing release in Live</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Copying-content-for-testing.html">Copying content for testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Upgrading-Magnolia-in-the-cloud.html">Upgrading Magnolia from the Cockpit</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cloud/Managing-environments-using-the-Magnolia-cockpit.html">Managing environments in the cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cloud/Monitoring-and-logging.html">Monitoring and logging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../cloud/Managing-cloud-log-levels.html">Managing cloud log levels</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../cloud/Using-REST-to-access-cloud-logs.html">Using REST to access Cloud logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Restarting-instances.html">Restarting instances</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Viewing-cloud-database-information.html">Viewing cloud database information</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Setting-up-a-new-environment.html">Setting up a new environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Tearing-down-an-environment.html">Tearing down an environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Configuring-domain-redirect-rules.html">Configuring domain redirect rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Protecting-environments.html">Protecting environments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cloud/Backing-up-and-restoring.html">Backing up and restoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../cloud/Creating-a-backup-manually.html">Creating a manual backup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../cloud/Recovering-the-Live-environment.html">Recovering the Live environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#cloud/Hiding-custom-cloud-bundle-snapshots.adoc">Hiding custom cloud bundle snapshots</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cloud/Supported-modules-in-the-cloud.html">Supported Magnolia modules in the cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Administration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../administration/Administration.html">Administration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Templating</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Modules</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Modules.html">Modules Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="List_of_modules.html">Modules list</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Light_modules.html">Light modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Installing_a_module.html">Installing a module</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Module_structure.html">Module structure</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Module_configuration.html">Module configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#core/modules/Module_definition_terms.adoc">Module definition terms</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="Module_descriptor.html">Module descriptor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="XML-based_module_descriptor.html">XML Based</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="YAML-based_module_descriptor.html">YAML Based</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Dependency_injection.html">Dependency injection</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Authoring</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Logging_in.html">Logging in</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Editing_pages.html">Editing pages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Managing_pages.html">Managing pages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Editing_images.html">Editing images</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Managing_assets.html">Managing assets</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Publishing.html">Publishing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Deleting_and_restoring.html">Deleting and restoring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Keyboard_shortcuts.html">Keyboard shortcuts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../authoring/Feeds.html">Feeds</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connector Packs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../connector-packs/Analytics_Connector_Pack.html">Analytics Connector Pack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Analytics_module.html">Analytics module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Integrated_User_Experience.html">Integrated User Experience</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../connector-packs/Commerce_Connector_Pack.html">Commerce Connector Pack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/E-commerce_app.html">E-commerce app</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/E-commerce_module.html">E-commerce module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/ecomfn.html">ecomfn Templating function</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/E-commerce_REST_endpoints.html">E-commerce REST endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/How_to_configure_a_custom_e-commerce_connector.html">Configure a custom e-commerce connector</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../connector-packs/DAM_Connector_Pack.html">DAM Connector Pack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/External_DAM_module.html">External DAM module</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../connector-packs/Marketing_Automation_Connector_Pack.html">Marketing Automation Connector Pack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Marketing_Automation_module.html">Marketing automation module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Marketing_Automation_REST_endpoint.html">Marketing automation REST endpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../connector-packs/Optimization_Connector_Pack.html">Optimization Connector Pack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Siteimprove_module.html">Siteimprove module</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Apps</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">CLI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cli/Magnolia-CLI-v3.html">Magnolia CLI v3</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cli/Updating-CLI-to-v3.html">Updating CLI to v3</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cli/Magnolia-CLI-v2.html">Magnolia CLI v2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cli/Magnolia-CLI-walkthrough.html">Magnolia CLI walkthrough</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Special Features</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Magnolia Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Magnolia Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
    <a href="../../index.html" class="home-link"></a>

<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Setting_up_PUR_on_a_website.html">Setting up PUR on a website - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>

</div>
  <div class="content">
<article class="doc">
<h1 class="page">Setting up PUR on a website - Magnolia 6.2 documentation</h1>
<div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Modules.html" class="bare">Modules.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Modules.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="">&#8230;&#8203;</a></p>
</li>
<li>
<p><a href="List_of_modules.html">List of modules</a></p>
</li>
<li>
<p><a href="Public_User_Registration_module.html">Public User Registration
module</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196597292"><a class="anchor" href="#src-196597292"></a>Setting up PUR on a website</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p><a href="Public_User_Registration_module.html">Magnolia&#8217;s Public User
Registration module</a> allows users to register an account on the public
site. This page explains how to use the module to set up public user
registration and protected pages that are available only to users who
have registered and logged in.</p>
</div>
<div class="paragraph">
<p>The tutorial takes you through the process of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Setting up pages containing the components provided by the module</p>
</li>
<li>
<p>Restricting access to certain pages to registered users only.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We use the Sportstation demo in our example. CE users can adapt the
example to fit the Travel demo or their own site.</p>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-MakingPURcomponentsavailable"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-MakingPURcomponentsavailable"></a>Making PUR components available</h3>
<div class="paragraph">
<p>The <a href="Public_User_Registration_module.html">Public User Registration
module</a> includes all the necessary
<a href="Public_User_Registration_module.html#src-196597257_PublicUserRegistrationmodule-PURcomponents">components</a>
to implement PUR on your site.</p>
</div>
<div class="paragraph">
<p>You can make the components available on any
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Page+definition">page
template</a>. The components will be used on
<a href="#src-196597292_SettingupPURonawebsite-Creatingpages">pages</a> for
registration, login and related PUR tasks.</p>
</div>
<div class="paragraph">
<p>The Travel demo&#8217;s Public Users template makes the components available
in <code>main</code> area of the page. The example uses this template. See
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Area+definition">Area
definition</a> for more.<strong>YAML file</strong></p>
</div>
<div class="paragraph">
<p>`    templateScript: /travel-demo/templates/pages/areas/contentContainer.ftl`</p>
</div>
<div class="paragraph">
<p>`    parameters:`</p>
</div>
<div class="paragraph">
<p>`      cssClass: container`</p>
</div>
<div class="paragraph">
<p>`    type: list`</p>
</div>
<div class="paragraph">
<p>`    availableComponents:`</p>
</div>
<div class="paragraph">
<p>`        login:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/login`</p>
</div>
<div class="paragraph">
<p>`        registration:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/registration`</p>
</div>
<div class="paragraph">
<p>`        userUpdate:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/userUpdate`</p>
</div>
<div class="paragraph">
<p>`        forgottenPassword:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/forgottenPassword`</p>
</div>
<div class="paragraph">
<p>`        passwordChange:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/passwordChange`</p>
</div>
<div class="paragraph">
<p>`        enableUser:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/enableUser`</p>
</div>
<div class="paragraph">
<p>`        textImage:`</p>
</div>
<div class="paragraph">
<p>`           id: travel-demo:components/textImage`</p>
</div>
<div class="paragraph">
<p><strong>JCR node</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">areas</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">main</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">availableComponents</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">login</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/login</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">registration</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/registration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">userUpdate</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/userUpdate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">forgottenPassword</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/forgottenPassword</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">passwordChange</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/passwordChange</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enableUser</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/enableUser</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">textImage</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">travel-demo:components/textImage</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Creatingpages"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Creatingpages"></a>Creating pages</h3>
<div class="paragraph">
<p>Your pages can be located anywhere in the site hierarchy.</p>
</div>
<div class="paragraph">
<p>Create two sets of pages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>PUR pages</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Base these pages on your PUR template. We will add the
<a href="#src-196597292_SettingupPURonawebsite-MakingPURcomponentsavailable">PUR
components made available</a> above to these pages.</p>
</li>
<li>
<p>You need one page for each PUR component, for example a registration
page for the Registration form component, a login page for the Login
form component etc..</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Restricted content pages</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>These are standard pages. They do not rely on the functionality of
the PUR module.</p>
</li>
<li>
<p>You can base these pages on any template and you add any components.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example pages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Registration</strong>: To register account (<code>club-registration</code>).</p>
</li>
<li>
<p><strong>Login</strong>: To log in (<code>club-login</code>).</p>
</li>
<li>
<p><strong>Registration update</strong>: To update user information
(<code>update-club-profile</code>).</p>
</li>
<li>
<p><strong>Password retrieval</strong>: To retrieve lost or forgotten password
(<code>retrieve-club-password</code>).</p>
</li>
<li>
<p><strong>Password change</strong>: To change password (<code>change-club-password</code>).</p>
</li>
<li>
<p><strong>Restricted content</strong> page or tree (<code>club-deals</code> and subpages).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-settingUpPUROnAWebsite-pages.png" alt="images/download/attachments/196597292/6-1-settingUpPUROnAWebsite-pages.png"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Addingrestrictedcontent"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Addingrestrictedcontent"></a>Adding restricted content</h3>
<div class="paragraph">
<p>The example creates an exclusive club for registered users on the
Sportstation site. In the Sports Club area users have access to special
deals on the <code>club-deals</code> page and its subpages. The example uses the
Travel Standard template for these pages.</p>
</div>
<div class="paragraph">
<p>Example pages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/sports-club</code>: All public users can access this page. The teaser
component on the left takes logged-out registered users to the login
form and logged-in users to the <code>club-deals</code> page. The teaser component
on the right takes non-registered users to the registration form page.</p>
<div class="ulist">
<ul>
<li>
<p><code>/club-deals</code>: This page contains teasers to all available deals.</p>
<div class="ulist">
<ul>
<li>
<p><code>/&lt;deals</code>: These are the Individual deal pages.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597292/sports-club-page.png" alt="images/download/attachments/196597292/sports-club-page.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/deals.png" alt="images/download/attachments/196597292/deals.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/shark-deal.png" alt="images/download/attachments/196597292/shark-deal.png"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-AddingPURcomponents"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-AddingPURcomponents"></a>Adding PUR components</h3>
<div class="paragraph">
<p>Open the PUR pages for editing and:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the corresponding PUR component to each page.</p>
</li>
<li>
<p>Hide the pages from navigation. You can set this in the Page
properties dialog.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The PUR components are all forms.</p>
</div>
<div class="paragraph">
<p>Login is delivered as a preconfigured form. In the dialog, set links to
the registration and forgotten-password pages. These links display at
the bottom of the form. The target page directs the user to a page after
login. Set this link to the restricted-content parent page.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-loginDialog.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-loginDialog.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-loginForm.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-loginForm.png"></span></p>
</div>
<div class="paragraph">
<p>The other PUR components require form setup. See
<a href="Form_module.html#src-196596937_Formmodule-Creatingaform">Creating a
form</a> for more.</p>
</div>
<div class="paragraph">
<p>These forms expect fields with the exact names: <code>username</code>, <code>fullName</code>,
<code>password</code>, <code>passwordConfirmation</code> and <code>email</code>. Use
<a href="Form_module.html#src-196596937_Formmodule-Fields">Input fields</a>,
without
<a href="Form_module.html#src-196596937_Formmodule-Fieldvalidators">validators</a>,
set <a href="Form_module.html#src-196596937_Formmodule-Fields">advanced field
types</a> to <code>text</code>, <code>password</code> and <code>email</code> and add a
<a href="Form_module.html#src-196596937_Formmodule-Fields">Submit button
field</a>.</p>
</div>
<div class="paragraph">
<p>Here are the components used in the example.<br>
<br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-registrationForm.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-registrationForm.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-updateProfile.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-updateProfile.png"></span><br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-forgottenPassword.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-forgottenPassword.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-passwordChange.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-passwordChange.png"></span></p>
</div>
<div class="paragraph">
<p>Use this reference table to set up your forms:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Component</strong></th>
<th class="tableblock halign-left valign-top"><strong>Fields</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>registration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code>, <code>fullName</code>, <code>password</code>,
<code>passwordConfirmation</code>,<code>email</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userUpdate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code> , <code>fullName</code> , <code>email</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forgottenPassword</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code> , <code>email</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>passwordChange</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code> , <code>passwordConfirmation</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule"></a>Configuring the PUR module</h3>
<div class="paragraph">
<p>The PUR module configuration used in the example is a copy of the
<code>travel</code>
<a href="Public_User_Registration_module.html#src-196597257_PublicUserRegistrationmodule-Configuration">configuration</a>
(that extends <code>default</code>) with minor changes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Registration</strong>: <code>Always</code>
<a href="Public_User_Registration_module.html#src-196597257_PublicUserRegistrationmodule-Registrationstrategies">registration
strategy</a> enables users immediately. A user can access restricted
content straight after registration.</p>
</li>
<li>
<p><strong>Password retrieval</strong>: <code>MailChangePasswordLinkStrategy</code> sends an email
to the user who submits the password retrieval form. A link in the email
directs the user to the example /<code>change-club-password</code> page.</p>
</li>
<li>
<p><strong>Default group</strong>: We create the <code>sportstation-pur</code> group in
<a href="#src-196597292_SettingupPURonawebsite-Settingpermissions">Setting
permissions</a> (below).</p>
</li>
<li>
<p><strong>Default role</strong>: The configuration overrides <code>default</code> to ensure that
users assigned only the <code>anomymous</code> role cannot access restricted
content.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These options are configured in
<code>/modules/public-user-registration/config/configurations/sportstation</code>.<strong>JCR
node</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">configurations</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">travel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sportstation</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">registrationStrategy</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.publicuserregistration.strategy.Always</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">passwordRetrievalStrategy</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">emailTemplate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/public-user-registration/templates/mail/password-reset-email.ftl</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">targetPagePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sportstation/sports-club/retrieve-club-password/change-club-password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">defaultRoles</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">anonymous</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">anonymous</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">extends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">override</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">defaultGroups</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sportstation-pur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">extends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">../default</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Publishing"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Publishing"></a>Publishing</h3>
<div class="paragraph">
<p>At this stage, publish the work to date to the public instance. We
<a href="#src-196597292_SettingupPURonawebsite-Settingpermissions">set
permissions</a> and
<a href="#src-196597292_SettingupPURonawebsite-TestingthePURsetup">test the
setup</a> on the public site because this is where it will be used and
anonymous users have different
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Default+permissions">permissions</a>
on the author and public instances by default.</p>
</div>
<div class="paragraph">
<p>Publish:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#src-196597292_SettingupPURonawebsite-MakingPURcomponentsavailable">Template</a>
(and
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Template+availability">availabiltiy</a>
configuration, if any).</p>
</li>
<li>
<p><a href="#src-196597292_SettingupPURonawebsite-Creatingpages">Pages</a>.</p>
</li>
<li>
<p><a href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule">PUR
configuration</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Settingpermissions"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Settingpermissions"></a>Setting permissions</h3>
<div class="paragraph">
<p>On the public instance, first restrict anonymous access to content
reserved for registered users and then give registered users access to
this content</p>
</div>
<div class="sect3">
<h4 id="src-196597292_SettingupPURonawebsite-Restrictinganonymousaccess"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Restrictinganonymousaccess"></a>Restricting anonymous access</h4>
<div class="paragraph">
<p>In the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Security+app">Security app</a>,
edit the <code>anonymous</code> role and add permissions denying access to
restricted content.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: Web access:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Permission</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Path</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/sportstation/sports-club/club-deals*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sportstation&gt;/sports-club/club-deals*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/sportstation/sports-club/update-club-profile*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sportstation&gt;/sports-club/update-club-profile*</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>The permissions starting with <code>&lt;site name&gt;</code> prevent cross-site access.
See
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Cross-site+security">Site-specific
ACLs</a> for more.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597292_SettingupPURonawebsite-Grantingregisteredusersaccess"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Grantingregisteredusersaccess"></a>Granting registered users access</h4>
<div class="paragraph">
<p>In the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Security+app">Security app</a>,
create a new role (<code>sportstation-pur</code> in the example) that gives access
to restricted content.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: Web access:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Permission</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Path</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get &amp; Post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/sportstation/sports-club/club-deals*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get &amp; Post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sportstation&gt;/sports-club/club-deals*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get &amp; Post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/sportstation/sports-club/update-club-profile*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get &amp; Post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sportstation&gt;/sports-club/update-club-profile*</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Next create a new group named after the value in the <code>defaultRoles</code>
<a href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule">configuration</a>
property (<code>sportstation-pur</code> in the example) and assign the new role to
the new group. Users in this group also need other basic roles.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: Group role assignment.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Group</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Granted roles</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sportstation-pur</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sportstation-pur</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>travel-demo-base</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imaging-base</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Addingaclientcallbacktothesecurityfilter"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Addingaclientcallbacktothesecurityfilter"></a>Adding a client callback to the security filter</h3>
<div class="paragraph">
<p>Adding a client callback on the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Filters">security callback
filter</a> ensures that users are redirected to the login component on a
page and not to the default (green) Magnolia login screen. The redirect
comes into play when a registered user logs out or an unregistered user
attempts to access restricted content.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: <strong>* <code>sportstation-pur</code> client callback configured in
<code>/server/filters/securityCallback/clientCallbacks/sportstation-pur</code>.*JCR
node</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">server</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">securityCallback</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clientCallbacks</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">travel-demo-pur</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sportstation-pur</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">originalUrlPattern</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.cms.util.SimpleUrlPattern</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">patternString</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sportstation)/sports-club/(profile-update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">club-deals)*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.cms.security.auth.callback.RedirectClientCallback</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sportstation/sports-club/club-login.html</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sportstation-pur</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>client callback name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>originalUrlPattern</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Pattern node</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>SimpleUrlPattern matches strings using simple <code>*</code> or <code>?</code> wildcards.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patternString</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Pattern that defines the location of the restricted content that
triggers the callback. See <code>java.util.regex.Pattern</code> for a summary of
<a href="https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">regular
expression contructs</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>RedirectClientCallback redirects to a configured path or URL.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>location</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Relative path to the login page. Add the <code>?mgnlReturnTo={0}</code> parameter
(with a leading forward slash ( <code>/</code> )) at the end of this path to direct
the user to page they were on prior to login.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-TestingthePURsetup"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-TestingthePURsetup"></a>Testing the PUR setup</h3>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Make sure that your <a href="Mail.html">SMTP settings</a> are configured on the
public instance so that the <a href="Mail.html">Mail module</a> can send emails.
Remember to assign <code>superuser</code> a working email address.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the restricted content page logged in as <code>superuser</code> and then log
out by adding the <code>?mgnlLogout=true</code> parameter to the URL. The
restricted content disappears and the page redirects to the login form
page configured in the
<a href="#src-196597292_SettingupPURonawebsite-Addingaclientcallbacktothesecurityfilter">security
callback</a>.<br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/deals-page-public.png" alt="images/download/attachments/196597292/deals-page-public.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/login-form-public.png" alt="images/download/attachments/196597292/login-form-public.png"></span></p>
</li>
<li>
<p>Click <strong>Register</strong> in the login form, register a dummy account (using a
valid email address) and then login with the new credentials. The
protected page (set in the
<a href="#src-196597292_SettingupPURonawebsite-AddingPURcomponents">Login
form component</a>) opens.<br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/registration-form-public.png" alt="images/download/attachments/196597292/registration-form-public.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/login-john.png" alt="images/download/attachments/196597292/login-john.png"></span></p>
</li>
<li>
<p>Log out as the new user, click <strong>Forgotten password</strong> in the login form
and enter the dummy account username and email. The link in the password
reminder email opens the password reset form page (set in
<code>passwordRetrievalStrategy</code>
<a href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule">configuration</a>)
where you can choose a new password.<br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/retrieve-password-form.png" alt="images/download/attachments/196597292/retrieve-password-form.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/reset-password-email.png" alt="images/download/attachments/196597292/reset-password-email.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/change-password-form.png" alt="images/download/attachments/196597292/change-password-form.png"></span></p>
</li>
<li>
<p>Log in to admincentral and launch the Security app to verify that the
dummy user is assigned to the group defined in the <code>defaultRoles</code>
<a href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule">configuration</a>.</p>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-settingUpPUROnAWebsite-securityApp.png" alt="images/download/attachments/196597292/6-1-settingUpPUROnAWebsite-securityApp.png"></span></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Public User Registration module</p>
</div>
<div class="paragraph">
<p>Publishing module</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.magnolia-cms.com" class="icon">
            <img src="../../../_/img/magnolia-medium.png" alt="Magnolia">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://documentation.magnolia-cms.com" target="_blank" rel="noopener">Full Docs Set</a></li>
          <li><a href="https://wiki.magnolia-cms.com/" target="_blank" rel="noopener">Community Wiki</a></li>
          <li><a href="https://support.magnolia-cms.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://marketplace.magnolia-cms.com/" target="_blank" rel="noopener">Extend Magnolia</a></li>
          <li><a href="https://magnolia-cms.com/blog" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.magnolia-cms.com/training" target="_blank" >Training</a></li>
        </ul>
      </div>
      <div class="col">
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Magnolia" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/magnolia_cms" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/magnolia-cms" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2020 Magnolia International Ltd. All rights reserved.</span>
      <a href="https://www.magnolia-cms.com/legal/privacy.html">Privacy Policy</a>
    </div>
  </div>
</footer>

<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
