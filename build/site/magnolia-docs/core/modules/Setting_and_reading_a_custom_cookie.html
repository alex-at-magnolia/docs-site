<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting and reading a custom cookie - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/core/modules/Setting_and_reading_a_custom_cookie.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../magnolia-docs/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../magnolia-docs/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../magnolia-docs/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">master</button>
  <div class="version-menu">
    <a class="version is-current" href="Setting_and_reading_a_custom_cookie.html">master</a>
    <a class="version" href="../../6.2.1/core/modules/Setting_and_reading_a_custom_cookie.html">6.2.1</a>
    <a class="version is-missing" href="../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Setting_and_reading_a_custom_cookie.html">Setting and reading a custom cookie - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../releases/Releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/Features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Logging_in.html">Logging in</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Editing_pages.html">Editing pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Managing_pages.html">Managing pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Editing_images.html">Editing images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Managing_assets.html">Managing assets</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Publishing.html">Publishing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Deleting_and_restoring.html">Deleting and restoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Keyboard_shortcuts.html">Keyboard shortcuts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Feeds.html">Feeds</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/Support.html">Need Support?</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">Setting and reading a custom cookie - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Modules.html" class="bare">Modules.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Modules.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="">&#8230;&#8203;</a></p>
</li>
<li>
<p><a href="List_of_modules.html">List of modules</a></p>
</li>
<li>
<p><a href="Personalization_module.html">Personalization module</a></p>
</li>
<li>
<p><a href="Creating_custom_traits_without_Java.html">Creating custom traits
without Java</a></p>
</li>
<li>
<p><a href="Creating_a_custom_cookie_trait_without_Java.html">Creating a
custom cookie trait without Java</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196597193"><a class="anchor" href="#src-196597193"></a>Setting and reading a custom cookie</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p>Related topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="Creating_custom_traits_without_Java.html">Creating custom traits
without Java</a></p>
</li>
<li>
<p><a href="Cookies_trait_configuration.html">Cookies trait configuration</a></p>
</li>
<li>
<p><a href="Configuring_a_custom_cookie_trait.html">Configuring a custom
cookie trait</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Personalization">Personalization</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Component+personalization">Component
personalization</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This page describes how to work with cookies in a
<a href="Modules.html#src-196596732_Modules-Lightmodule">light module</a>,
especially how to read, set and remove them. The page concludes the
whole tutorial by providing instructions to create a page template and
bits of JavaScript code for component personalization through the
<code>visits</code> cookie.</p>
</div>
<div class="sect2">
<h3 id="src-196597193_Settingandreadingacustomcookie-ManipulatingcookieswithJavaScript"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-ManipulatingcookieswithJavaScript"></a>Manipulating cookies with JavaScript</h3>
<div class="paragraph">
<p>Normally cookie manipulations can be done with the default JavaScript
API as described
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">here</a>.
However, they can be accomplished more easily by using the <em>JavaScript
Cookie</em> library, which we will apply in the code provided further below
for cookie manipulations in a FreeMarker page template.</p>
</div>
<div class="sect3">
<h4 id="src-196597193_Settingandreadingacustomcookie-TheJavaScriptCookielibrary"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-TheJavaScriptCookielibrary"></a>The JavaScript Cookie library</h4>
<div class="paragraph">
<p>JavaScript Cookie, hereinafter referred to as <em>js-cookie</em>, is a
lightweight JavaScript API designed specifically for handling browser
cookies.</p>
</div>
<div class="sect4">
<h5 id="src-196597193_Settingandreadingacustomcookie-Availability"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-Availability"></a>Availability</h5>
<div class="paragraph">
<p>The library is available:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the <a href="https://github.com/js-cookie/js-cookie">js-cookie</a> repository
on GitHub. To use the library in a light module, download the
<a href="https://github.com/js-cookie/js-cookie/blob/master/src/js.cookie.js">js.cookie.js</a>
file from the repository and add it to your light module.</p>
</li>
<li>
<p>In the <code>travel-demo-theme</code> and hence in any Magnolia bundle containing
the <code>magnolia-travel-demo</code> module. You could simply attach this theme to
your template to use the library&#8217;s functions in your light module.
However, if your project is to be completely independent from this
theme, you will need a copy of the library from GitHub and provide it in
your light module.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="src-196597193_Settingandreadingacustomcookie-Handlingcookiesinthelibrary"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-Handlingcookiesinthelibrary"></a>Handling cookies in the library</h5>
<div class="paragraph">
<p>Handling cookies via this library is simple. To read, set or remove a
cookie named <code>foo</code>, for example, just the following commands need to be
called from a JavaScript code attached to a web page:</p>
</div>
<div class="paragraph">
<p><code>Cookies.get(<code>'foo'</code>);</code></p>
</div>
<div class="paragraph">
<p><code>Cookies.set(<code>'foo'</code>, <code>'value'</code>);</code></p>
</div>
<div class="paragraph">
<p><code>Cookies.remove(<code>'foo'</code>);</code></p>
</div>
<div class="paragraph">
<p>See the <a href="https://github.com/js-cookie/js-cookie#basic-usage">usage
section</a> in the library&#8217;s repository for a full list of commands defined
for cookie manipulations.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196597193_Settingandreadingacustomcookie-Creatingapagetemplateformanipulatingcookies"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-Creatingapagetemplateformanipulatingcookies"></a>Creating a page template for manipulating cookies</h3>
<div class="paragraph">
<p>In the following steps we will create page template files and a
JavaScript file for manipulating the <code>visits</code> cookie, and provide all of
the files in a light module called <code>visits-cookie-365</code> . You can also
download the files from the
<a href="https://git.magnolia-cms.com/projects/DOCUMENTATION/repos/cookie-trait-examples/">cookie-trait-examples</a>
repository.</p>
</div>
<div class="sect3">
<h4 id="src-196597193_Settingandreadingacustomcookie-Createalightmodule"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-Createalightmodule"></a>Create a light module</h4>
<div class="paragraph">
<p>Create the following light module structure in the directory defined by
the <code>magnolia.resources.dir</code> property:</p>
</div>
<div class="paragraph">
<p><code>visits-cookie-<code>365</code>/</code></p>
</div>
<div class="paragraph">
<p><code>├── templates/</code></p>
</div>
<div class="paragraph">
<p><code>│   └── pages/</code></p>
</div>
<div class="paragraph">
<p><code>└── webresources/</code></p>
</div>
<div class="paragraph">
<p>`    ├── css/`</p>
</div>
<div class="paragraph">
<p>`    └── js/`</p>
</div>
<div class="paragraph">
<p>Add the
<a href="https://github.com/js-cookie/js-cookie/blob/master/src/js.cookie.js">js.cookie.js</a>
file to the <code>js</code> subfolder of the module. The <code>css</code> subfolder together
with its content will influence mainly the visual aspect of the page.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597193_Settingandreadingacustomcookie-CreateJavaScriptcodeformanipulatingcookies"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-CreateJavaScriptcodeformanipulatingcookies"></a>Create JavaScript code for manipulating cookies</h4>
<div class="paragraph">
<p>Remember that in our use case, we want a cookie to count the number of
times a user visits a web page. The counting will be done by the
following JavaScript code, while reading, removing and setting a cookie
will be done via calls to the js-cookie library from the code:</p>
</div>
<div class="paragraph">
<p><code>function`</code> setVisitsCookie() {`</p>
</div>
<div class="paragraph">
<p>`    <code>var</code> visitsCookie = isNaN(Cookies.get(<code>'visits'</code>)) ? 1 : parseInt(Cookies.get(<code>'visits'</code>)) + 1;`</p>
</div>
<div class="paragraph">
<p>`    Cookies.remove(<code>'visits'</code>);`</p>
</div>
<div class="paragraph">
<p>`    Cookies.set(<code>'visits'</code>, visitsCookie, { expires: 365 });`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p>This code will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on line 2: Check whether the <code>visits</code> cookie has been stored in the
browser.</p>
<div class="ulist">
<ul>
<li>
<p>If not or its value is
<a href="https://developer.mozilla.org/cs/docs/Web/JavaScript/Reference/Global_Objects/isNaN">an
illegal number</a>, it will assign <code>1</code> as the value of the <code>visitsCookie</code>
variable.</p>
</li>
<li>
<p>If yes, it will take the integer value of the <code>visits</code> cookie,
increment it by <code>1</code> , and assign it as the value of the <code>visitsCookie</code>
variable.</p>
</li>
</ul>
</div>
</li>
<li>
<p>on line 3: Remove the <code>visits</code> cookie so as not to end up with two
<code>visits</code> cookies after executing the next step.</p>
</li>
<li>
<p>on line 4: Create the <code>visits</code> cookie and use the value kept in the
<code>visitsCookie</code> variable as the value of the cookie. Define that the
cookie should expire in 365 days. This will make sure that the cookie
will be kept in the browser not just for the duration of the current
session. The value <code>365</code> has been chosen arbitrarily.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Save this function as the <code>visits.js</code> file to the <code>js</code> subfolder in the
module.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597193_Settingandreadingacustomcookie-Createapagetemplate"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-Createapagetemplate"></a>Create a page template</h4>
<div class="paragraph">
<p>Create a page template with a
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Template+definition">template
definition</a> and a
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Template+scripts">template
script</a>. To keep things simple, we will not add any dialog definition to
the template.</p>
</div>
<div class="sect4">
<h5 id="src-196597193_Settingandreadingacustomcookie-Thetemplatedefinition"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-Thetemplatedefinition"></a>The template definition</h5>
<div class="paragraph">
<p>cookiePage.yaml</p>
</div>
<div class="paragraph">
<p><code>templateScript: /visits-cookie-<code>365</code>/templates/pages/cookiePage.ftl</code></p>
</div>
<div class="paragraph">
<p><code>renderType: freemarker</code></p>
</div>
<div class="paragraph">
<p><code>visible: ``true</code></p>
</div>
<div class="paragraph">
<p><code>title: Visits cookie ``365</code></p>
</div>
<div class="paragraph">
<p><code>areas:</code></p>
</div>
<div class="paragraph">
<p>`  main:`</p>
</div>
<div class="paragraph">
<p>`    type: list`</p>
</div>
<div class="paragraph">
<p>`    availableComponents:`</p>
</div>
<div class="paragraph">
<p>`      textImage:`</p>
</div>
<div class="paragraph">
<p>`        id: mtk:components/textImage`</p>
</div>
<div class="paragraph">
<p>This template defines an area in the page that may contain the
<code>textImage</code> component. The component will be used to create content
variants. Add this template definition as the <code>cookiePage.yaml</code> file to
the <code>pages</code> subfolder in the module.</p>
</div>
</div>
<div class="sect4">
<h5 id="src-196597193_Settingandreadingacustomcookie-Thetemplatescript"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-Thetemplatescript"></a>The template script</h5>
<div class="paragraph">
<p>Add the following template script as the <code>cookiePage.ftl</code> file to the
<code>pages</code> subfolder in the module:</p>
</div>
<div class="paragraph">
<p>cookiePage.ftl</p>
</div>
<div class="paragraph">
<p><code>[#assign title = content.title!"Cookie test page"]</code></p>
</div>
<div class="paragraph">
<p><code>&lt;!DOCTYPE html&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;<code>html</code>&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;<code>head</code>&gt;</code></p>
</div>
<div class="paragraph">
<p>`    &lt;<code>title</code>&gt;Cookie Test Page&lt;/<code>title</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;<code>link</code> <code>rel</code>=<code>"stylesheet"</code> <code>href</code>=<code>"${ctx.contextPath}/.resources/visits-cookie-365/webresources/css/visits.css"</code> <code>type</code>=<code>"text/css"</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;<code>script</code> <code>type</code>=<code>"text/javascript"</code> <code>src</code>=<code>"${ctx.contextPath}/.resources/visits-cookie-365/webresources/js/js.cookie.js"</code>&gt;&lt;/<code>script</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;<code>script</code> <code>type</code>=<code>"text/javascript"</code> <code>src</code>=<code>"${ctx.contextPath}/.resources/visits-cookie-365/webresources/js/visits.js"</code>&gt;&lt;/<code>script</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`    [@cms.page /]`</p>
</div>
<div class="paragraph">
<p><code>&lt;/<code>head</code>&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;<code>body</code> <code>onload</code>=<code>"setVisitsCookie()"</code>&gt;</code></p>
</div>
<div class="paragraph">
<p>`    &lt;<code>header</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`        &lt;<code>h2</code>&gt;${title}&lt;/<code>h2</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`        &lt;<code>h4</code>&gt;Use the white area below to test component personalization.&lt;/<code>h4</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;/<code>header</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;<code>main</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`        [@cms.area name="main"/]`</p>
</div>
<div class="paragraph">
<p>`    &lt;/<code>main</code>&gt;`</p>
</div>
<div class="paragraph">
<p><code>&lt;/<code>body</code>&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;/<code>html</code>&gt;</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>line 9: Includes the js-cookie library.</p>
</li>
<li>
<p>line 10: Includes the custom JavaScript with the counting function for
the <code>visits</code> cookie.</p>
</li>
<li>
<p>line 14: The <code>#setVisitsCookie</code> function is called every time the page
is loaded using the <code>onload</code> attribute of the <code>body</code> tag.</p>
</li>
<li>
<p>line 21: The <code>cms.area</code> directive will render the components of this
area.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/smile.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/smile.svg"></span>
Congratulations! Now you have a light module with a template which will
allow you to test component personalization based on cookie values.
<span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/smile.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/smile.svg"></span></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196597193_Settingandreadingacustomcookie-Usethemoduletocreatepageswithapersonalizedcomponent"><a class="anchor" href="#src-196597193_Settingandreadingacustomcookie-Usethemoduletocreatepageswithapersonalizedcomponent"></a>Use the module to create pages with a personalized component</h3>
<div class="paragraph">
<p>Use the light module on a running Magnolia instance. Go to the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Pages+app">Pages app</a> and
create a page with the template called <em>Visits cookie 365</em>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597193/dialog365.png" alt="images/download/attachments/196597193/dialog365.png"></span></p>
</div>
<div class="paragraph">
<p>Add a <code>textImage</code> component to the page and personalize it, i.e.
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Component+personalization">create
several variants</a> of it defined by the custom <code>visits</code> cookie trait. The
following screenshot, for example, shows a message for a variant called
VISITS1.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597193/var1crop.png" alt="images/download/attachments/196597193/var1crop.png"></span></p>
</div>
<div class="paragraph">
<p>Publish your page and check the result. The screenshot below shows page
content for any value &gt; 4 of the <code>visits</code> cookie, as set in the
<a href="https://git.magnolia-cms.com/projects/DOCUMENTATION/repos/cookie-trait-examples/browse/configuration-bootstrap-files/website.Cookie-Test-Page.xml">website.Cookie-Test-Page.xml</a>
page configuration file available in the
<a href="https://git.magnolia-cms.com/projects/DOCUMENTATION/repos/cookie-trait-examples/">cookie-trait-examples</a>
repository:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597193/any_crop.png" alt="images/download/attachments/196597193/any_crop.png"></span></p>
</div>
<div class="paragraph">
<p>Configuring a custom cookie trait</p>
</div>
<div class="paragraph">
<p>Privacy module</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
