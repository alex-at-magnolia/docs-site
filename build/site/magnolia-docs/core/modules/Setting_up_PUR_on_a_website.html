<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting up PUR on a website - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/core/modules/Setting_up_PUR_on_a_website.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../magnolia-docs/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../magnolia-docs/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../magnolia-docs/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">master</button>
  <div class="version-menu">
    <a class="version is-current" href="Setting_up_PUR_on_a_website.html">master</a>
    <a class="version" href="../../6.2.1/core/modules/Setting_up_PUR_on_a_website.html">6.2.1</a>
    <a class="version is-missing" href="../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Setting_up_PUR_on_a_website.html">Setting up PUR on a website - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../releases/Releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/Features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Logging_in.html">Logging in</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Editing_pages.html">Editing pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Managing_pages.html">Managing pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Editing_images.html">Editing images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Managing_assets.html">Managing assets</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Publishing.html">Publishing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Deleting_and_restoring.html">Deleting and restoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Keyboard_shortcuts.html">Keyboard shortcuts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Feeds.html">Feeds</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/Support.html">Need Support?</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">Setting up PUR on a website - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Modules.html" class="bare">Modules.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Modules.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="">&#8230;&#8203;</a></p>
</li>
<li>
<p><a href="List_of_modules.html">List of modules</a></p>
</li>
<li>
<p><a href="Public_User_Registration_module.html">Public User Registration
module</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196597292"><a class="anchor" href="#src-196597292"></a>Setting up PUR on a website</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p><a href="Public_User_Registration_module.html">Magnolia&#8217;s Public User
Registration module</a> allows users to register an account on the public
site. This page explains how to use the module to set up public user
registration and protected pages that are available only to users who
have registered and logged in.</p>
</div>
<div class="paragraph">
<p>The tutorial takes you through the process of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Setting up pages containing the components provided by the module</p>
</li>
<li>
<p>Restricting access to certain pages to registered users only.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We use the Sportstation demo in our example. CE users can adapt the
example to fit the Travel demo or their own site.</p>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-MakingPURcomponentsavailable"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-MakingPURcomponentsavailable"></a>Making PUR components available</h3>
<div class="paragraph">
<p>The <a href="Public_User_Registration_module.html">Public User Registration
module</a> includes all the necessary
<a href="Public_User_Registration_module.html#src-196597257_PublicUserRegistrationmodule-PURcomponents">components</a>
to implement PUR on your site.</p>
</div>
<div class="paragraph">
<p>You can make the components available on any
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Page+definition">page
template</a>. The components will be used on
<a href="#src-196597292_SettingupPURonawebsite-Creatingpages">pages</a> for
registration, login and related PUR tasks.</p>
</div>
<div class="paragraph">
<p>The Travel demo&#8217;s Public Users template makes the components available
in <code>main</code> area of the page. The example uses this template. See
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Area+definition">Area
definition</a> for more.<strong>YAML file</strong></p>
</div>
<div class="paragraph">
<p>`    templateScript: /travel-demo/templates/pages/areas/contentContainer.ftl`</p>
</div>
<div class="paragraph">
<p>`    parameters:`</p>
</div>
<div class="paragraph">
<p>`      cssClass: container`</p>
</div>
<div class="paragraph">
<p>`    type: list`</p>
</div>
<div class="paragraph">
<p>`    availableComponents:`</p>
</div>
<div class="paragraph">
<p>`        login:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/login`</p>
</div>
<div class="paragraph">
<p>`        registration:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/registration`</p>
</div>
<div class="paragraph">
<p>`        userUpdate:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/userUpdate`</p>
</div>
<div class="paragraph">
<p>`        forgottenPassword:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/forgottenPassword`</p>
</div>
<div class="paragraph">
<p>`        passwordChange:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/passwordChange`</p>
</div>
<div class="paragraph">
<p>`        enableUser:`</p>
</div>
<div class="paragraph">
<p>`          id: public-user-registration:components/enableUser`</p>
</div>
<div class="paragraph">
<p>`        textImage:`</p>
</div>
<div class="paragraph">
<p>`           id: travel-demo:components/textImage`</p>
</div>
<div class="paragraph">
<p><strong>JCR node</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">areas</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">main</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">availableComponents</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">login</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/login</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">registration</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/registration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">userUpdate</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/userUpdate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">forgottenPassword</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/forgottenPassword</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">passwordChange</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/passwordChange</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enableUser</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public-user-registration:components/enableUser</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">textImage</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">travel-demo:components/textImage</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Creatingpages"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Creatingpages"></a>Creating pages</h3>
<div class="paragraph">
<p>Your pages can be located anywhere in the site hierarchy.</p>
</div>
<div class="paragraph">
<p>Create two sets of pages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>PUR pages</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Base these pages on your PUR template. We will add the
<a href="#src-196597292_SettingupPURonawebsite-MakingPURcomponentsavailable">PUR
components made available</a> above to these pages.</p>
</li>
<li>
<p>You need one page for each PUR component, for example a registration
page for the Registration form component, a login page for the Login
form component etc..</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Restricted content pages</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>These are standard pages. They do not rely on the functionality of
the PUR module.</p>
</li>
<li>
<p>You can base these pages on any template and you add any components.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example pages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Registration</strong>: To register account (<code>club-registration</code>).</p>
</li>
<li>
<p><strong>Login</strong>: To log in (<code>club-login</code>).</p>
</li>
<li>
<p><strong>Registration update</strong>: To update user information
(<code>update-club-profile</code>).</p>
</li>
<li>
<p><strong>Password retrieval</strong>: To retrieve lost or forgotten password
(<code>retrieve-club-password</code>).</p>
</li>
<li>
<p><strong>Password change</strong>: To change password (<code>change-club-password</code>).</p>
</li>
<li>
<p><strong>Restricted content</strong> page or tree (<code>club-deals</code> and subpages).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-settingUpPUROnAWebsite-pages.png" alt="images/download/attachments/196597292/6-1-settingUpPUROnAWebsite-pages.png"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Addingrestrictedcontent"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Addingrestrictedcontent"></a>Adding restricted content</h3>
<div class="paragraph">
<p>The example creates an exclusive club for registered users on the
Sportstation site. In the Sports Club area users have access to special
deals on the <code>club-deals</code> page and its subpages. The example uses the
Travel Standard template for these pages.</p>
</div>
<div class="paragraph">
<p>Example pages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/sports-club</code>: All public users can access this page. The teaser
component on the left takes logged-out registered users to the login
form and logged-in users to the <code>club-deals</code> page. The teaser component
on the right takes non-registered users to the registration form page.</p>
<div class="ulist">
<ul>
<li>
<p><code>/club-deals</code>: This page contains teasers to all available deals.</p>
<div class="ulist">
<ul>
<li>
<p><code>/&lt;deals</code>: These are the Individual deal pages.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597292/sports-club-page.png" alt="images/download/attachments/196597292/sports-club-page.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/deals.png" alt="images/download/attachments/196597292/deals.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/shark-deal.png" alt="images/download/attachments/196597292/shark-deal.png"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-AddingPURcomponents"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-AddingPURcomponents"></a>Adding PUR components</h3>
<div class="paragraph">
<p>Open the PUR pages for editing and:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the corresponding PUR component to each page.</p>
</li>
<li>
<p>Hide the pages from navigation. You can set this in the Page
properties dialog.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The PUR components are all forms.</p>
</div>
<div class="paragraph">
<p>Login is delivered as a preconfigured form. In the dialog, set links to
the registration and forgotten-password pages. These links display at
the bottom of the form. The target page directs the user to a page after
login. Set this link to the restricted-content parent page.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-loginDialog.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-loginDialog.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-loginForm.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-loginForm.png"></span></p>
</div>
<div class="paragraph">
<p>The other PUR components require form setup. See
<a href="Form_module.html#src-196596937_Formmodule-Creatingaform">Creating a
form</a> for more.</p>
</div>
<div class="paragraph">
<p>These forms expect fields with the exact names: <code>username</code>, <code>fullName</code>,
<code>password</code>, <code>passwordConfirmation</code> and <code>email</code>. Use
<a href="Form_module.html#src-196596937_Formmodule-Fields">Input fields</a>,
without
<a href="Form_module.html#src-196596937_Formmodule-Fieldvalidators">validators</a>,
set <a href="Form_module.html#src-196596937_Formmodule-Fields">advanced field
types</a> to <code>text</code>, <code>password</code> and <code>email</code> and add a
<a href="Form_module.html#src-196596937_Formmodule-Fields">Submit button
field</a>.</p>
</div>
<div class="paragraph">
<p>Here are the components used in the example.<br>
<br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-registrationForm.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-registrationForm.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-updateProfile.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-updateProfile.png"></span><br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-forgottenPassword.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-forgottenPassword.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-passwordChange.png" alt="images/download/attachments/196597292/6-1-SettingUpPUROnAWebsite-passwordChange.png"></span></p>
</div>
<div class="paragraph">
<p>Use this reference table to set up your forms:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Component</strong></th>
<th class="tableblock halign-left valign-top"><strong>Fields</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>registration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code>, <code>fullName</code>, <code>password</code>,
<code>passwordConfirmation</code>,<code>email</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userUpdate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code> , <code>fullName</code> , <code>email</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forgottenPassword</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code> , <code>email</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>passwordChange</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code> , <code>passwordConfirmation</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule"></a>Configuring the PUR module</h3>
<div class="paragraph">
<p>The PUR module configuration used in the example is a copy of the
<code>travel</code>
<a href="Public_User_Registration_module.html#src-196597257_PublicUserRegistrationmodule-Configuration">configuration</a>
(that extends <code>default</code>) with minor changes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Registration</strong>: <code>Always</code>
<a href="Public_User_Registration_module.html#src-196597257_PublicUserRegistrationmodule-Registrationstrategies">registration
strategy</a> enables users immediately. A user can access restricted
content straight after registration.</p>
</li>
<li>
<p><strong>Password retrieval</strong>: <code>MailChangePasswordLinkStrategy</code> sends an email
to the user who submits the password retrieval form. A link in the email
directs the user to the example /<code>change-club-password</code> page.</p>
</li>
<li>
<p><strong>Default group</strong>: We create the <code>sportstation-pur</code> group in
<a href="#src-196597292_SettingupPURonawebsite-Settingpermissions">Setting
permissions</a> (below).</p>
</li>
<li>
<p><strong>Default role</strong>: The configuration overrides <code>default</code> to ensure that
users assigned only the <code>anomymous</code> role cannot access restricted
content.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These options are configured in
<code>/modules/public-user-registration/config/configurations/sportstation</code>.<strong>JCR
node</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">configurations</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">travel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sportstation</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">registrationStrategy</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.publicuserregistration.strategy.Always</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">passwordRetrievalStrategy</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">emailTemplate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/public-user-registration/templates/mail/password-reset-email.ftl</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">targetPagePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sportstation/sports-club/retrieve-club-password/change-club-password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">defaultRoles</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">anonymous</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">anonymous</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">extends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">override</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">defaultGroups</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sportstation-pur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">extends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">../default</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Publishing"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Publishing"></a>Publishing</h3>
<div class="paragraph">
<p>At this stage, publish the work to date to the public instance. We
<a href="#src-196597292_SettingupPURonawebsite-Settingpermissions">set
permissions</a> and
<a href="#src-196597292_SettingupPURonawebsite-TestingthePURsetup">test the
setup</a> on the public site because this is where it will be used and
anonymous users have different
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Default+permissions">permissions</a>
on the author and public instances by default.</p>
</div>
<div class="paragraph">
<p>Publish:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#src-196597292_SettingupPURonawebsite-MakingPURcomponentsavailable">Template</a>
(and
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Template+availability">availabiltiy</a>
configuration, if any).</p>
</li>
<li>
<p><a href="#src-196597292_SettingupPURonawebsite-Creatingpages">Pages</a>.</p>
</li>
<li>
<p><a href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule">PUR
configuration</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Settingpermissions"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Settingpermissions"></a>Setting permissions</h3>
<div class="paragraph">
<p>On the public instance, first restrict anonymous access to content
reserved for registered users and then give registered users access to
this content</p>
</div>
<div class="sect3">
<h4 id="src-196597292_SettingupPURonawebsite-Restrictinganonymousaccess"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Restrictinganonymousaccess"></a>Restricting anonymous access</h4>
<div class="paragraph">
<p>In the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Security+app">Security app</a>,
edit the <code>anonymous</code> role and add permissions denying access to
restricted content.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: Web access:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Permission</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Path</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/sportstation/sports-club/club-deals*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sportstation&gt;/sports-club/club-deals*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/sportstation/sports-club/update-club-profile*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sportstation&gt;/sports-club/update-club-profile*</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>The permissions starting with <code>&lt;site name&gt;</code> prevent cross-site access.
See
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Cross-site+security">Site-specific
ACLs</a> for more.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597292_SettingupPURonawebsite-Grantingregisteredusersaccess"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Grantingregisteredusersaccess"></a>Granting registered users access</h4>
<div class="paragraph">
<p>In the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Security+app">Security app</a>,
create a new role (<code>sportstation-pur</code> in the example) that gives access
to restricted content.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: Web access:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Permission</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Path</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get &amp; Post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/sportstation/sports-club/club-deals*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get &amp; Post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sportstation&gt;/sports-club/club-deals*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get &amp; Post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/sportstation/sports-club/update-club-profile*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get &amp; Post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sportstation&gt;/sports-club/update-club-profile*</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Next create a new group named after the value in the <code>defaultRoles</code>
<a href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule">configuration</a>
property (<code>sportstation-pur</code> in the example) and assign the new role to
the new group. Users in this group also need other basic roles.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: Group role assignment.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Group</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Granted roles</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sportstation-pur</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sportstation-pur</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>travel-demo-base</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imaging-base</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-Addingaclientcallbacktothesecurityfilter"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-Addingaclientcallbacktothesecurityfilter"></a>Adding a client callback to the security filter</h3>
<div class="paragraph">
<p>Adding a client callback on the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Filters">security callback
filter</a> ensures that users are redirected to the login component on a
page and not to the default (green) Magnolia login screen. The redirect
comes into play when a registered user logs out or an unregistered user
attempts to access restricted content.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: <strong>* <code>sportstation-pur</code> client callback configured in
<code>/server/filters/securityCallback/clientCallbacks/sportstation-pur</code>.*JCR
node</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">server</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">securityCallback</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clientCallbacks</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">travel-demo-pur</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sportstation-pur</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">originalUrlPattern</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.cms.util.SimpleUrlPattern</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">patternString</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sportstation)/sports-club/(profile-update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">club-deals)*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.cms.security.auth.callback.RedirectClientCallback</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sportstation/sports-club/club-login.html</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sportstation-pur</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>client callback name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>originalUrlPattern</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Pattern node</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>SimpleUrlPattern matches strings using simple <code>*</code> or <code>?</code> wildcards.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patternString</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Pattern that defines the location of the restricted content that
triggers the callback. See <code>java.util.regex.Pattern</code> for a summary of
<a href="https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">regular
expression contructs</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>RedirectClientCallback redirects to a configured path or URL.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>location</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Relative path to the login page. Add the <code>?mgnlReturnTo={0}</code> parameter
(with a leading forward slash ( <code>/</code> )) at the end of this path to direct
the user to page they were on prior to login.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597292_SettingupPURonawebsite-TestingthePURsetup"><a class="anchor" href="#src-196597292_SettingupPURonawebsite-TestingthePURsetup"></a>Testing the PUR setup</h3>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Make sure that your <a href="Mail.html">SMTP settings</a> are configured on the
public instance so that the <a href="Mail.html">Mail module</a> can send emails.
Remember to assign <code>superuser</code> a working email address.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the restricted content page logged in as <code>superuser</code> and then log
out by adding the <code>?mgnlLogout=true</code> parameter to the URL. The
restricted content disappears and the page redirects to the login form
page configured in the
<a href="#src-196597292_SettingupPURonawebsite-Addingaclientcallbacktothesecurityfilter">security
callback</a>.<br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/deals-page-public.png" alt="images/download/attachments/196597292/deals-page-public.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/login-form-public.png" alt="images/download/attachments/196597292/login-form-public.png"></span></p>
</li>
<li>
<p>Click <strong>Register</strong> in the login form, register a dummy account (using a
valid email address) and then login with the new credentials. The
protected page (set in the
<a href="#src-196597292_SettingupPURonawebsite-AddingPURcomponents">Login
form component</a>) opens.<br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/registration-form-public.png" alt="images/download/attachments/196597292/registration-form-public.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/login-john.png" alt="images/download/attachments/196597292/login-john.png"></span></p>
</li>
<li>
<p>Log out as the new user, click <strong>Forgotten password</strong> in the login form
and enter the dummy account username and email. The link in the password
reminder email opens the password reset form page (set in
<code>passwordRetrievalStrategy</code>
<a href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule">configuration</a>)
where you can choose a new password.<br>
<span class="image"><img src="../../_images/images/download/attachments/196597292/retrieve-password-form.png" alt="images/download/attachments/196597292/retrieve-password-form.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/reset-password-email.png" alt="images/download/attachments/196597292/reset-password-email.png"></span>
<span class="image"><img src="../../_images/images/download/attachments/196597292/change-password-form.png" alt="images/download/attachments/196597292/change-password-form.png"></span></p>
</li>
<li>
<p>Log in to admincentral and launch the Security app to verify that the
dummy user is assigned to the group defined in the <code>defaultRoles</code>
<a href="#src-196597292_SettingupPURonawebsite-ConfiguringthePURmodule">configuration</a>.</p>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597292/6-1-settingUpPUROnAWebsite-securityApp.png" alt="images/download/attachments/196597292/6-1-settingUpPUROnAWebsite-securityApp.png"></span></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Public User Registration module</p>
</div>
<div class="paragraph">
<p>Publishing module</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
