<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jsonfn - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/core/templating/jsonfn.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../magnolia-docs/6.2.1/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../magnolia-docs/6.2.1/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../magnolia-docs/6.2.1/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">master</button>
  <div class="version-menu">
    <a class="version is-current" href="jsonfn.html">master</a>
    <a class="version" href="../../6.2.1/core/templating/jsonfn.html">6.2.1</a>
    <a class="version is-missing" href="../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="jsonfn.html">jsonfn - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../releases/Releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/Features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../modules/Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Logging_in.html">Logging in</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Editing_pages.html">Editing pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Managing_pages.html">Managing pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Editing_images.html">Editing images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Managing_assets.html">Managing assets</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Publishing.html">Publishing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Deleting_and_restoring.html">Deleting and restoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Keyboard_shortcuts.html">Keyboard shortcuts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../authoring/Feeds.html">Feeds</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/Support.html">Need Support?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#FAQS.adoc">FAQs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">jsonfn - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Templating.html" class="bare">Templating.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Templating.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="">&#8230;&#8203;</a></p>
</li>
<li>
<p><a href="Template_scripts.html">Template scripts</a></p>
</li>
<li>
<p><a href="Templating_functions.html">Templating functions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493"><a class="anchor" href="#src-196596493"></a>jsonfn</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p><code>jsonfn</code> templating functions generate <a href="http://json.org/">JSON</a> from JCR
nodes in any workspace. This allows you to generate highly customized
JSON without writing custom Java classes.</p>
</div>
<div class="paragraph">
<p>These <a href="Templating_functions.html">templating functions</a> are provided
by the <code>magnolia-jsonfn</code> module which is hosted in the
<a href="https://github.com/magnolia-community/jsonfn" class="bare">https://github.com/magnolia-community/jsonfn</a> repository. The <code>jsonfn</code>
templating functions originated in the <code>neat-jsonfn</code> module, hosted on
GitHub and developed by <a href="https://github.com/rah003">rah003</a>.</p>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Installation"><a class="anchor" href="#src-196596493_jsonfn-Installation"></a>Installation</h3>
<div class="paragraph">
<p><code>jsonfn</code> templating functions are not bundled with preconfigured
Magnolia bundles or webapps.</p>
</div>
<div class="paragraph">
<p>Expand to see how to install the magnolia-jsonfn module</p>
</div>
<div class="paragraph">
<p>Maven is the easiest way to install the module. Add the following to
your
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Bundles+and+webapps">bundle</a>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.templating&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-jsonfn&lt;/artifactId&gt;
  &lt;version&gt;1.0.9&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Generalusageofjsonfn"><a class="anchor" href="#src-196596493_jsonfn-Generalusageofjsonfn"></a>General usage of jsonfn</h3>
<div class="paragraph">
<p>Use <code>jsonfn</code> to generate JSON from JCR nodes. You can customize the JSON
to suit your needs by combining methods.</p>
</div>
<div class="paragraph">
<p>Combine at least one
<em><a href="#src-196596493_jsonfn-nodes-defining-methods">node defining
method</a></em> with one
<em><a href="#src-196596493_jsonfn-Propertydefiningmethods">property defining
method</a>.</em> All property defining methods are applied to all nodes. Finish
with the <code>#print</code> method to get JSON as a string.</p>
</div>
<div class="paragraph">
<p><code>jsonfn</code> methods are provided by the JsonTemplatingFunctions Java class.
These methods return a <code>JsonBuilder</code> object to apply on further methods,
which in turn return the same JsonBuilder object. This allows the
methods to be applied in an additive way.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-GeneratingJSON"><a class="anchor" href="#src-196596493_jsonfn-GeneratingJSON"></a>Generating JSON</h4>
<div class="paragraph">
<p>To generate JSON:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define the JCR node(s) to transform into JSON.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>required</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See
<a href="#src-196596493_jsonfn-nodes-defining-methods">Node defining
methods</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define the JCR properties to be added to the JSON object.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>required</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#src-196596493_jsonfn-properties-defining-methods">Property
defining methods</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Customize JSON, resolve referenced nodes and renditions, format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generate the JSON string with the <code>#print</code> method.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>required</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See
<code>print</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-RenderingJSON"><a class="anchor" href="#src-196596493_jsonfn-RenderingJSON"></a>Rendering JSON</h4>
<div class="paragraph">
<p>In your FreeMarker template render the JSON string directly in the
output stream (or assign it to a JavaScript variable).</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>:</p>
</div>
<div class="paragraph">
<p>[#assign pageNode = cmsfn.contentByPath("/vinyl", "website") /]<br>
$\{ <code>jsonfn</code> .from(pageNode) .addAll().exclude("mgnl.<strong>", "jcr.</strong>")
.print() }</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Node defining method</p>
</li>
<li>
<p>Property defining methods</p>
</li>
<li>
<p>Get the JSON String</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Example output</strong>:</p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:page"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@name"</code> : <code>"vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@link"</code> : <code>"/vinyl-site/"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"hideInNav"</code> : <code>true</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@depth"</code> : <code>1</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"navigationTitle"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"windowTitle"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@id"</code> : <code>"17ac0768-4337-4dda-a8da-223c036d299d"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-nodes-defining-methods"><a class="anchor" href="#src-196596493_jsonfn-nodes-defining-methods"></a><span id="src-196596493_jsonfn-nodes-defining-methods2 " class="confluence-anchor-link">#</span>#</h3>

</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Nodedefiningmethods"><a class="anchor" href="#src-196596493_jsonfn-Nodedefiningmethods"></a>Node defining methods</h3>
<div class="paragraph">
<p>Select the JCR nodes to transform into JSON. All methods return a
<code>JsonBuilder</code> object to apply to further methods.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-from"><a class="anchor" href="#src-196596493_jsonfn-from"></a>from</h4>
<div class="paragraph">
<p>Get JSON by a given <code>Node</code> or <code>ContentMap</code>.</p>
</div>
<div class="sect4">
<h5 id="src-196596493_jsonfn-Methodsignatures"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures"></a>Method signatures</h5>
<div class="paragraph">
<p><code>JsonBuilder from(Node node)</code></p>
</div>
<div class="paragraph">
<p><code>JsonBuilder from(ContentMap node)</code></p>
</div>
</div>
<div class="sect4">
<h5 id="src-196596493_jsonfn-Argument"><a class="anchor" href="#src-196596493_jsonfn-Argument"></a>Argument</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The node you want to work with.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="src-196596493_jsonfn-Example"><a class="anchor" href="#src-196596493_jsonfn-Example"></a>Example</h5>
<div class="paragraph">
<p>[#assign contentMap = cmsfn.contentByPath("/comics", "website") /]<br>
[#assign contentNode = cmsfn.asJCRNode(cmsfn.contentByPath("/vinyl",
"website")) /]<br>
[<br>
$\{<code>jsonfn</code><strong>.from(contentMap)</strong>.add("title").print()} ,<br>
$\{<code>jsonfn</code><strong>.from(contentNode)</strong>.add("title").print()}<br>
]<br>
While the code on line 2 probably has no practical application, it is
included to demonstrate that the <code>#from</code> method can also handle the
javax.jcr.Node as an argument.</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>[</code></p>
</div>
<div class="paragraph">
<p>`  {`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>`"Best comics"</code></p>
</div>
<div class="paragraph">
<p><code>},</code></p>
</div>
<div class="paragraph">
<p>`  {`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>`"Best vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>]</code></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-fromChildNodesOf"><a class="anchor" href="#src-196596493_jsonfn-fromChildNodesOf"></a>fromChildNodesOf</h4>
<div class="paragraph">
<p>Get the child nodes of a given node or workspace. The given node can be
a <code>Node</code> or a <code>ContentMap</code>. In the case of a workspace, the "technical"
JCR root is not taken into account. The resultant JSON is an array (see
example below).</p>
</div>
<div class="paragraph">
<p>Combine with the <a href="#src-196596493_jsonfn-down"><code>down</code> method</a> if you
want more than the direct children.</p>
</div>
<div class="sect4">
<h5 id="src-196596493_jsonfn-Methodsignature"><a class="anchor" href="#src-196596493_jsonfn-Methodsignature"></a>Method signature</h5>
<div class="paragraph">
<p><code>JsonBuilder fromChildNodesOf(String workspaceName)</code></p>
</div>
<div class="paragraph">
<p><code>JsonBuilder fromChildNodesOf(ContentMap node)</code></p>
</div>
<div class="paragraph">
<p><code>JsonBuilder fromChildNodesOf(Node node)</code></p>
</div>
</div>
<div class="sect4">
<h5 id="src-196596493_jsonfn-Argument.1"><a class="anchor" href="#src-196596493_jsonfn-Argument.1"></a>Argument</h5>
<div class="paragraph">
<p>fromChildNodesOf(workspaceName)</p>
</div>
<div class="paragraph">
<p><code>workspaceName</code></p>
</div>
<div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The name of the workspace.</p>
</div>
<div class="paragraph">
<p>fromChildNodesOf(node)</p>
</div>
<div class="paragraph">
<p><code>node</code></p>
</div>
<div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The node from which the child nodes should be taken into account.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-Example.1"><a class="anchor" href="#src-196596493_jsonfn-Example.1"></a>Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>$\{<code>jsonfn</code><strong>.fromChildNodesOf("website")</strong>.down(2).allowOnlyNodeTypes("mgnl:page").add("title",
"@path").print()}<br>
The example will collect all nodes of the type <code>mgnl:page</code> from the
<code>website</code> workspace down to level 2<em>.</em></p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>[ {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"us-comics"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"US comics"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/comics/us-comics"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"belgian-comics"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"Belgian comics"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/comics/belgian-comics"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>"Best comics"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/comics"</code></p>
</div>
<div class="paragraph">
<p><code>}, {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"Rock"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"Rock"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/Rock"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"Disco"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"Disco"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/Disco"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>} ]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-appendFrom"><a class="anchor" href="#src-196596493_jsonfn-appendFrom"></a>appendFrom</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Get JSON by a given <code>Node</code> or <code>ContentMap</code> and append it to a given JSON
string. Further applied methods are only applied to the resultant JSON
of the given node.</p>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Methodsignatures.1"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.1"></a>Method signatures</h3>
<div class="paragraph">
<p><code>JsonBuilder from(String json, Node node)</code></p>
</div>
<div class="paragraph">
<p><code>JsonBuilder from(String json, ContentMap node)</code></p>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Arguments"><a class="anchor" href="#src-196596493_jsonfn-Arguments"></a>Arguments</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>json</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The JSON string to which the new json gets appended to.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The node you want to work with.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Example.2"><a class="anchor" href="#src-196596493_jsonfn-Example.2"></a>Example</h3>
<div class="paragraph">
<p>[#assign damNode = cmsfn.contentByPath("/jolly-jumper", "dam") /]<br>
[#assign damJson =
jsonfn.from(damNode).down(2).add("@name").allowOnlyNodeTypes("mgnl:asset").inline().print()]<br>
[#assign websiteNode = cmsfn.contentByPath("/vinyl", "website") /]<br>
[#assign allJson = jsonfn.<strong>appendFrom</strong>( damJson ,
websiteNode).down(1).add("@path").allowOnlyNodeTypes("mgnl:page").inline().print()
/]<br>
&lt;script&gt;<br>
var damJson = '$\{ damJson }';<br>
var allJson = '$\{ allJson }';<br>
&lt;/script&gt;</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p>&lt;script&gt;<br>
var damJson = '[\{"@name":"jolly-jumper-black-and-white.png"}] ';<br>
var allJson = '
[\{"@name":"jolly-jumper-black-and-white.png"},[\{"@path":"/vinyl/rock"},\{"@path":"/vinyl/disco"}]]
';<br>
&lt;/script&gt;</p>
</div>
<div class="paragraph">
<p>[<mark>src-196596493_jsonfn-node-customizing-methods]</mark>#</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-Nodecustomizingmethods"><a class="anchor" href="#src-196596493_jsonfn-Nodecustomizingmethods"></a>Node customizing methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These methods impact the resulting node structure. The methods are
applied on a <code>JsonBuilder</code> object and return a JsonBuilder.</p>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-down"><a class="anchor" href="#src-196596493_jsonfn-down"></a>down</h3>
<div class="paragraph">
<p>Define the level of child nodes to get.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.2"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.2"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder down(int level)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.1"><a class="anchor" href="#src-196596493_jsonfn-Arguments.1"></a>Arguments</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>level</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>An integer defining the level of child nodes to get. Choose values &gt;=1.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.3"><a class="anchor" href="#src-196596493_jsonfn-Example.3"></a>Example</h4>
<div class="paragraph">
<p>[#assign node = cmsfn.contentByPath("/", "website") /]<br>
$\{jsonfn.from(node).add("@path").<strong>down(2)</strong>.allowOnlyNodeTypes("mgnl:page").print()}</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>[ {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"us-comics"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/comics/us-comics"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"belgian-comics"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/comics/belgian-comics"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/comics"</code></p>
</div>
<div class="paragraph">
<p><code>}, {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"rock"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/rock"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"jazz"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/jazz"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"disco"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/disco"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>} ]</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-allowOnlyNodeTypes"><a class="anchor" href="#src-196596493_jsonfn-allowOnlyNodeTypes"></a>allowOnlyNodeTypes</h3>
<div class="paragraph">
<p>Allow only node types by a given parameter (or regular expression). The
method is applied during the <a href="#src-196596493_jsonfn-print"><code>#print</code>
method</a> and subnodes of excluded nodes go into the resulting JSON if not
specifically excluded by the regular expression.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.3"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.3"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder allowOnlyNodeTypes(String nodeTypesRegex)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.2"><a class="anchor" href="#src-196596493_jsonfn-Arguments.2"></a>Arguments</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nodeTypesRegex</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>A regular expression that defines the wanted node types.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.4"><a class="anchor" href="#src-196596493_jsonfn-Example.4"></a>Example</h4>
<div class="paragraph">
<p>[#assign damNode = cmsfn.contentByPath("/comics", "dam") /]<br>
$\{jsonfn.from(damNode).down(2)<strong>.allowOnlyNodeTypes("mgnl:asset")</strong>.add("@nodeType",
"@path").readNodeTypes("mgnl.*").print()}</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>[ {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/comics/9b6c2464fbcf7a371c573f2da26ff6f1.<em>QL80_TTD</em>.jpg"</code></p>
</div>
<div class="paragraph">
<p><code>}, {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/comics/ultra-comics.jpg"</code></p>
</div>
<div class="paragraph">
<p><code>}, {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/comics/wuffle-comics-no-license-required.jpg"</code></p>
</div>
<div class="paragraph">
<p><code>}, {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/comics/a-woman-talking-on-a-comic-scene_1020-627.jpg"</code></p>
</div>
<div class="paragraph">
<p><code>} ]</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-readNodeTypes"><a class="anchor" href="#src-196596493_jsonfn-readNodeTypes"></a>readNodeTypes</h3>
<div class="paragraph">
<p>Allow only node types by a given parameter (or regular expression). The
method is applied during input phase and node types that are not defined
by the regular expression will not be read. As a consequence, a node&#8217;s
subnodes are also skipped, even if they would have been allowed.</p>
</div>
<div class="paragraph">
<p>Use this method to, for instance, ensure you do not read (and process)
JCR history or repository permissions that are also stored in
repository. The purpose of the method is to ensure that you do not waste
time processing something that would be discarded anyway.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.4"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.4"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder readNodeTypes(String nodeTypesRegex)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.3"><a class="anchor" href="#src-196596493_jsonfn-Arguments.3"></a>Arguments</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nodeTypesRegex</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>A regular expression to match the allowed node types.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.5"><a class="anchor" href="#src-196596493_jsonfn-Example.5"></a>Example</h4>
<div class="paragraph">
<p>[#assign damNode = cmsfn.contentByPath("/comics", "dam") /]<br>
$\{jsonfn.from(damNode).down(2)<strong>.readNodeTypes("mgnl:asset")</strong>.add("@nodeType",
"@path").readNodeTypes("mgnl.*").print()}</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:folder"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"9b6c2464fbcf7a371c573f2da26ff6f1.<em>QL80_TTD</em>.jpg"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"jcr:content"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:resource"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/comics/9b6c2464fbcf7a371c573f2da26ff6f1.<em>QL80_TTD</em>.jpg/jcr:content"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/comics/9b6c2464fbcf7a371c573f2da26ff6f1.<em>QL80_TTD</em>.jpg"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"wuffle-comics-no-license-required.jpg"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"jcr:content"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:resource"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/comics/wuffle-comics-no-license-required.jpg/jcr:content"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/comics/wuffle-comics-no-license-required.jpg"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"ultra-comics.jpg"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"jcr:content"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:resource"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/comics/ultra-comics.jpg/jcr:content"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/comics/ultra-comics.jpg"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>"/comics"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"a-woman-talking-on-a-comic-scene_1020-627.jpg"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"jcr:content"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:resource"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/comics/a-woman-talking-on-a-comic-scene_1020-627.jpg/jcr:content"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/comics/a-woman-talking-on-a-comic-scene_1020-627.jpg"</code></p>
</div>
<div class="paragraph">
<p>`  }`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-childrenAsArray"><a class="anchor" href="#src-196596493_jsonfn-childrenAsArray"></a>childrenAsArray</h3>
<div class="paragraph">
<p>Select parent nodes by a property and a value to display their children
as an array. The child nodes are organized in an array (see example
below).</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.5"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.5"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder childrenAsArray(String propertyName, String valueRegex)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.4"><a class="anchor" href="#src-196596493_jsonfn-Arguments.4"></a>Arguments</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>propertyName</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The name of the property used to select the parent node.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueRegex</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The value (or a regular expression matching the value) of the named
<code>propertyName</code> property (first argument).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.6"><a class="anchor" href="#src-196596493_jsonfn-Example.6"></a>Example</h4>
<div class="paragraph">
<p>[#assign damNode = cmsfn.contentByPath("/some-assets", "dam") /]<br>
[#assign jsbTmp =
jsonfn.from(damNode).readNodeTypes("mgnl.*").down(2).add("@nodeType",
"@path") /]<br>
$\{jsbTmp.print()}<br>
/<strong> below the children nodes of a mgnl:folder are organized within an
array </strong>/<br>
$\{jsbTmp<strong>.childrenAsArray("@nodeType", "mgnl:folder")</strong>.print()}</p>
</div>
<div class="paragraph">
<p>Line 3 renders the JSON without using arrays. Line 5 renders the child
nodes of nodes of the type <code>mgnl:folder</code> as arrays.</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:folder"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"iso-125"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:folder"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"red.jpg"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/some-assets/iso-125/red.jpg"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"blue.jpg"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/some-assets/iso-125/blue.jpg"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/some-assets/iso-125"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"iso-400"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:folder"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"kodachrome-400.jpg"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/some-assets/iso-400/kodachrome-400.jpg"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"fujifilm-400.jpg"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/some-assets/iso-400/fujifilm-400.jpg"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/some-assets/iso-400"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/some-assets"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>/<strong> below the children nodes of a mgnl:folder are organized within an array </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:folder"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"iso-125"</code> : [ {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"jcr:content"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:resource"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/some-assets/iso-125/blue.jpg/jcr:content"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/some-assets/iso-125/blue.jpg"</code></p>
</div>
<div class="paragraph">
<p>`  }, {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"jcr:content"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:resource"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/some-assets/iso-125/red.jpg/jcr:content"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/some-assets/iso-125/red.jpg"</code></p>
</div>
<div class="paragraph">
<p>`  } ],`</p>
</div>
<div class="paragraph">
<p>`  <code>"iso-400"</code> : [ {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"jcr:content"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:resource"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/some-assets/iso-400/kodachrome-400.jpg/jcr:content"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/some-assets/iso-400/kodachrome-400.jpg"</code></p>
</div>
<div class="paragraph">
<p>`  }, {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"jcr:content"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@nodeType"</code> : <code>"mgnl:resource"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"@path"</code> : <code>`"/some-assets/iso-400/fujifilm-400.jpg/jcr:content"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/some-assets/iso-400/fujifilm-400.jpg"</code></p>
</div>
<div class="paragraph">
<p>`  } ],`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/some-assets"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-insertCustom"><a class="anchor" href="#src-196596493_jsonfn-insertCustom"></a>insertCustom</h3>
<div class="paragraph">
<p>Replace JSON that is expected to be generated at a given path with given
custom JSON.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.6"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.6"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder insertCustom(String pathSuffix, String json)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.5"><a class="anchor" href="#src-196596493_jsonfn-Arguments.5"></a>Arguments</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pathSuffix</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The path to the node for which you want replace JSON.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>json</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The JSON that replaces the regular JSON. <br></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.7"><a class="anchor" href="#src-196596493_jsonfn-Example.7"></a>Example</h4>
<div class="paragraph">
<p>[#assign websiteNodes = cmsfn.contentByPath("/vinyl", "website") /]<br>
[#assign regularJsonObjects =
jsonfn.from(websiteNodes).down(2).readNodeTypes("mgnl:page").add(
"@path", "title")/]<br>
$\{regularJsonObjects.print()}<br>
/<strong> </strong>/<br>
$\{regularJsonObjects<strong>.insertCustom("/vinyl/jazz",'\{"bluenotes":true,
"mind-blowing" : "sometimes", "max-bpm" : 145}')</strong>.print()}</p>
</div>
<div class="paragraph">
<p>Line 3 renders the "regular" JSON. On line 5, the JSON of the node with
the path <code>/vinyl/jazz</code> is replaced with custom JSON.</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"rock"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"Rock"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/rock"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"jazz"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"Jazz"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/jazz"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"disco"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"Disco"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/disco"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>/<strong> </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"rock"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"Rock"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/rock"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"jazz"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"bluenotes"</code> : <code>true</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"mind-blowing"</code> : <code>"sometimes"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"max-bpm"</code> : 145`</p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"disco"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"title"</code> : <code>"Disco"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@path"</code> : <code>`"/vinyl/disco"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-properties-defining-methods"><a class="anchor" href="#src-196596493_jsonfn-properties-defining-methods"></a><span id="src-196596493_jsonfn-properties-defining-methods2 " class="confluence-anchor-link">#</span>#</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-Propertydefiningmethods"><a class="anchor" href="#src-196596493_jsonfn-Propertydefiningmethods"></a>Property defining methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Specify which properties of the JCR node should go into the JSON object.
Combine inclusionary and exclusionary methods. The resultant set of
properties is applied to all nodes, subnodes and resolved nodes, if the
node has a value for the property. The methods are applied on a
<code>JsonBuilder</code> object and return the JsonBuilder.</p>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-addAll"><a class="anchor" href="#src-196596493_jsonfn-addAll"></a>addAll</h3>
<div class="paragraph">
<p>Add all properties.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.7"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.7"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder addAll()</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.6"><a class="anchor" href="#src-196596493_jsonfn-Arguments.6"></a>Arguments</h4>
<div class="paragraph">
<p>No arguments.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.8"><a class="anchor" href="#src-196596493_jsonfn-Example.8"></a>Example</h4>
<div class="paragraph">
<p>[#assign pageNode = cmsfn.contentByPath("/vinyl", "website") /]<br>
$\{jsonfn.from(pageNode).<strong>addAll()</strong>.print()}</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:created"</code> : 1486441456877,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@link"</code> : <code>"/vinyl-site/"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:template"</code> : <code>"multisite-examples-lightmodule:pages/ms-page"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"jcr:created"</code> : 1487604125855,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:comment"</code> : <code>""</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@depth"</code> : 1,`</p>
</div>
<div class="paragraph">
<p>`  <code>"navigationTitle"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"jcr:createdBy"</code> : <code>"admin"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"windowTitle"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"jcr:uuid"</code> : <code>"17ac0768-4337-4dda-a8da-223c036d299d"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastActivatedBy"</code> : <code>"superuser"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastModified"</code> : 1490253448807,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:page"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@name"</code> : <code>"vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastModifiedBy"</code> : <code>"superuser"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"hideInNav"</code> : <code>true</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"jcr:mixinTypes"</code> : [ <code>"mgnl:hasVersion"</code> ],`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastActivated"</code> : 1488435020565,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:activationStatus"</code> : <code>true</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:createdBy"</code> : <code>"superuser"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"jcr:primaryType"</code> : <code>"mgnl:page"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@id"</code> : <code>"17ac0768-4337-4dda-a8da-223c036d299d"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-add"><a class="anchor" href="#src-196596493_jsonfn-add"></a>add</h3>
<div class="paragraph">
<p>Add the wanted properties. You can pass one or many arguments that can
be regular expressions.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.8"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.8"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder add(String&#8230;&#8203; property)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.7"><a class="anchor" href="#src-196596493_jsonfn-Arguments.7"></a>Arguments</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The property to be included or a regular expression pattern to match
properties.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.9"><a class="anchor" href="#src-196596493_jsonfn-Example.9"></a>Example</h4>
<div class="paragraph">
<p>[#assign pageNode = cmsfn.contentByPath("/vinyl", "website") /]<br>
$\{jsonfn.from(pageNode).<strong>add("@.</strong>")<strong>.print()}<br>
/<strong> --- </strong>/<br>
$\{jsonfn.from(pageNode)</strong>.add("mgnl.<strong>", "title")</strong>.print()}</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:page"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@name"</code> : <code>"vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@link"</code> : <code>"/vinyl-site/"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@depth"</code> : 1,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@id"</code> : <code>"17ac0768-4337-4dda-a8da-223c036d299d"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>/<strong> ---  </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:created"</code> : 1486441456877,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:template"</code> : <code>"multisite-examples-lightmodule:pages/ms-page"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:comment"</code> : <code>""</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastModifiedBy"</code> : <code>"superuser"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastActivated"</code> : 1488435020565,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:activationStatus"</code> : <code>true</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:createdBy"</code> : <code>"superuser"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastActivatedBy"</code> : <code>"superuser"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastModified"</code> : 1490253448807`</p>
</div>
<div class="paragraph">
<p>`}  `</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-exclude"><a class="anchor" href="#src-196596493_jsonfn-exclude"></a>exclude</h3>
<div class="paragraph">
<p>Exclude unwanted properties. You can pass one or many arguments that can
be regular expressions.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.9"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.9"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder exclude(String&#8230;&#8203; property)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.8"><a class="anchor" href="#src-196596493_jsonfn-Arguments.8"></a>Arguments</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The property to be excluded or a regular expression pattern to match
properties you want to exclude.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.10"><a class="anchor" href="#src-196596493_jsonfn-Example.10"></a>Example</h4>
<div class="paragraph">
<p>[#assign pageNode = cmsfn.contentByPath("/vinyl", "website") /]<br>
$\{jsonfn.from(pageNode).addAll()<strong>.exclude("jcr.</strong>", "mgnl.<strong>")</strong>.print()}</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:page"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@name"</code> : <code>"vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@link"</code> : <code>"/vinyl-site/"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"hideInNav"</code> : <code>true</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@depth"</code> : 1,`</p>
</div>
<div class="paragraph">
<p>`  <code>"navigationTitle"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"windowTitle"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@id"</code> : <code>"17ac0768-4337-4dda-a8da-223c036d299d"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>"Best vinyl"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"@path"</code> : <code>`"/vinyl"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-expanding-referenced-nodes"><a class="anchor" href="#src-196596493_jsonfn-expanding-referenced-nodes"></a><span id="src-196596493_jsonfn-expanding-referenced-nodes2 " class="confluence-anchor-link">#</span>#</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-Resolvingreferencednodesandrenditions"><a class="anchor" href="#src-196596493_jsonfn-Resolvingreferencednodesandrenditions"></a>Resolving referenced nodes and renditions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Resolve referenced nodes and image renditions. The methods are applied
on a <code>JsonBuilder</code> object and return the JsonBuilder.</p>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-expand"><a class="anchor" href="#src-196596493_jsonfn-expand"></a>expand</h3>
<div class="paragraph">
<p>Resolve nodes which are referenced by a property value.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignatures.10"><a class="anchor" href="#src-196596493_jsonfn-Methodsignatures.10"></a>Method signatures</h4>
<div class="paragraph">
<p><code>JsonBuilder expand(String propertyName, String repository)</code></p>
</div>
<div class="paragraph">
<p><code>JsonBuilder expand(String propertyNameRegex, String targetRepository, String targetPropertyName)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.9"><a class="anchor" href="#src-196596493_jsonfn-Arguments.9"></a>Arguments</h4>
<div class="paragraph">
<p>expand(propertyName, repository)</p>
</div>
<div class="paragraph">
<p><code>propertyName</code></p>
</div>
<div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The name of the property which contains the reference to a node in
another workspace.</p>
</div>
<div class="paragraph">
<p><code>repository</code></p>
</div>
<div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The name of the repository which contains the node to be expanded.</p>
</div>
<div class="paragraph">
<p>expand(propertyNameRegex, targetRepository, targetPropertyName)</p>
</div>
<div class="paragraph">
<p><code>propertyNameRegex</code></p>
</div>
<div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>A regular expression that matches the name of the property which
contains the reference to a node in another workspace.</p>
</div>
<div class="paragraph">
<p><code>targetRepository</code></p>
</div>
<div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The name of the target repository which contains the node to be
expanded.</p>
</div>
<div class="paragraph">
<p><code>targetPropertyName</code></p>
</div>
<div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The name of the property of the referenced node.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-Example.11"><a class="anchor" href="#src-196596493_jsonfn-Example.11"></a>Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>[#assign contentAppItemNode = cmsfn.contentByPath("/cameras/F3",
"cameracollection") /]<br>
/<strong> node with references to other nodes </strong>/<br>
$\{jsonfn.from(contentAppItemNode).add("name", "maker", "categories",
"images").print()}<br>
/<strong> expanding the referenced categories, images and maker </strong>/<br>
$\{jsonfn.from(contentAppItemNode).add("@link", "name")<br>
<strong>.expand("maker", "cameracollection")</strong><br>
<strong>.expand("categories", "category", "jcr:uuid")</strong><br>
<strong>.expand("images", "dam")</strong><br>
<strong>.expand("image", "dam")</strong><br>
.print()}</p>
</div>
<div class="paragraph">
<p>Note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>.expand("categor.*", "category", "jcr:uuid")</code> could be replaced with
<code>.expand("categories", "category")</code> in the above example.</p>
</li>
<li>
<p>when expanding a property, it is not required to add it with the
<code>#add</code> method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>/<strong> node with references to other nodes </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"images"</code> : [ <code>"jcr:59325c09-0966-4810-bf36-329d742201e3"</code>, <code>"jcr:fc1b30b2-4d38-45b8-9fba-944ea6084582"</code> ],`</p>
</div>
<div class="paragraph">
<p>`  <code>"name"</code> : <code>"F3"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"maker"</code> : <code>"893a6375-41d9-4405-ab74-ee3b91f97839"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"categories"</code> : [ <code>"a9b08e78-38f0-4390-b1b7-6f71087d4514"</code>, <code>"13e84bb3-6335-4710-92a6-a7f3b27a2e08"</code> ]`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>/<strong> expanding the referenced categories, images and maker </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"images"</code> : [ {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@link"</code> : <code>"/dam/jcr:59325c09-0966-4810-bf36-329d742201e3/Nikon_F3_with_HP_viewfinder.jpeg"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"name"</code> : <code>`"Nikon_F3with_HP_viewfinder"</code></p>
</div>
<div class="paragraph">
<p>`  }, {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@link"</code> : <code>"/dam/jcr:fc1b30b2-4d38-45b8-9fba-944ea6084582/Nikon_F3_used.jpg"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"name"</code> : <code>`"Nikon_F3_used"</code></p>
</div>
<div class="paragraph">
<p>`  } ],`</p>
</div>
<div class="paragraph">
<p>`  <code>"@link"</code> : <code>"/cameras/F3"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"name"</code> : <code>"F3"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"maker"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"image"</code> : {`</p>
</div>
<div class="paragraph">
<p>`      <code>"@link"</code> : <code>"/dam/jcr:12e21c54-12fe-4cce-8e6a-021b598b187d/nikon-logo-square.jpg"</code>,`</p>
</div>
<div class="paragraph">
<p>`      <code>"name"</code> : <code>`"nikon-logo-square"</code></p>
</div>
<div class="paragraph">
<p>`    },`</p>
</div>
<div class="paragraph">
<p>`    <code>"@link"</code> : <code>"/makers/Nikon"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"name"</code> : <code>`"Nikon"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"categories"</code> : [ {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@link"</code> : <code>"/camera-categories/format/24x36"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"name"</code> : <code>`"24x36"</code></p>
</div>
<div class="paragraph">
<p>`  }, {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@link"</code> : <code>"/camera-categories/general/analog"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"name"</code> : <code>`"analog"</code></p>
</div>
<div class="paragraph">
<p>`  } ]`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p>Compare the first and second JSON fragments to see how some properties
have been expanded to include their referenced nodes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>#expand</code> can resolve a single reference from a "normal" field (see
<code>maker</code>), as well as multiple nodes when the property stores multiple
values from a
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Multivalue+field+-+5+UI">multivalue
field</a> (see <code>categories</code> and <code>images</code>).</p>
</li>
<li>
<p>The values in <code>categories</code> are the standard <code>UUID`s of the referenced
nodes. The values in `images</code> are asset IDs (AssetProvider ID and a
UUID). <code>#expand</code> resolves all their referenced nodes correctly.</p>
</li>
<li>
<p>The expanded nodes from the property <code>images</code> has expanded nodes from
the <code>dam</code> workspace, thus producing JSON from an asset. The <code>@link</code>
property can be used to create an <code>&lt;img /&gt;</code> tag.</p>
</li>
<li>
<p><code>#expand</code> can act on multiple levels:</p>
<div class="ulist">
<ul>
<li>
<p><code>.expand("maker", "cameracollection")</code> expands a maker node which
itself has the property <code>image</code>.</p>
</li>
<li>
<p>This is also expanded by the expression <code>.expand("image", "dam")</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>If the nodes represent assets, you can also try to get renditions if
any are defined. See method <code>#binaryLinkRendition</code> below.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493_jsonfn-binaryLinkRendition"><a class="anchor" href="#src-196596493_jsonfn-binaryLinkRendition"></a>binaryLinkRendition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add renditions for assets. This works only if the renditions
(<a href="Theme.html#src-196596709_Theme-Imagevariations">image variations</a>)
have been defined on the current <a href="Theme.html">Theme</a>.</p>
</div>
<div class="paragraph">
<p>Each rendition is added as a property of the asset. The property name
for a rendition follows this pattern: <code>@rendition_&lt;rendition-name&gt;</code>. The
value is a link.</p>
</div>
<div class="paragraph">
<p>If a rendition is not defined in the theme, the property is added, but
the value points to the default link.</p>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Methodsignature.1"><a class="anchor" href="#src-196596493_jsonfn-Methodsignature.1"></a>Method signature</h3>
<div class="paragraph">
<p><code>JsonBuilder binaryLinkRendition(String&#8230;&#8203; variation)</code></p>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Arguments.10"><a class="anchor" href="#src-196596493_jsonfn-Arguments.10"></a>Arguments</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variation</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The image variation (rendition) name of the asset.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-Example.12"><a class="anchor" href="#src-196596493_jsonfn-Example.12"></a>Example</h3>
<div class="paragraph">
<p>[#assign contentAppItemNode =
cmsfn.contentByPath("/comics/belgian-comics/morris/lucky-luke/jolly-jumper/main",
"website") /]<br>
$\{jsonfn.from(contentAppItemNode).down(2).allowOnlyNodeTypes("mgnl.<strong>")<br>
.add("@nodeType", "image", "@link")<br>
.expand("image", "dam")<br>
*.binaryLinkRendition("default","960","foobar")</strong><br>
.print()}</p>
</div>
<div class="paragraph">
<p>This example renders a component node which contains an image (which is
expanded) and includes its renditions.</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>[ {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"@nodeType"</code> : <code>"mgnl:component"</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"image"</code> : {`</p>
</div>
<div class="paragraph">
<p>`    <code>"@nodeType"</code> : <code>"mgnl:asset"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@link"</code> : <code>"/dam/jcr:7e0c0a03-ef6f-4beb-be50-1feb6f71a042/jolly-jumper-black-and-white.png"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@rendition_default"</code> : <code>"/.imaging/default/dam/jolly-jumper/jolly-jumper-black-and-white.png/jcr:content.png"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@rendition_foobar"</code> : <code>"/.imaging/default/dam/jolly-jumper/jolly-jumper-black-and-white.png/jcr:content.png"</code>,`</p>
</div>
<div class="paragraph">
<p>`    <code>"@rendition_960"</code> : <code>`"/.imaging/mte/comics-theme/960/dam/jolly-jumper/jolly-jumper-black-and-white.png/jcr:content/jolly-jumper-black-and-white.png"</code></p>
</div>
<div class="paragraph">
<p>`  },`</p>
</div>
<div class="paragraph">
<p>`  <code>"@link"</code> : <code>`"/comics-site/jollyjumper/main/0.html"</code></p>
</div>
<div class="paragraph">
<p><code>} ]</code></p>
</div>
<div class="paragraph">
<p>Note that there is no rendition <em>foobar</em> defined on the theme, therefor
the property <code>@rendition_foobar</code> points to the default rendition.</p>
</div>
<div class="paragraph">
<p>[<mark>src-196596493_jsonfn-others]</mark>#</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596493_safe-id-anNvbmZuLUZvcm1hdHRpbmcsaTE4bmFuZHByaW50"><a class="anchor" href="#src-196596493_safe-id-anNvbmZuLUZvcm1hdHRpbmcsaTE4bmFuZHByaW50"></a>Formatting, i18n and print</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="src-196596493_jsonfn-inline"><a class="anchor" href="#src-196596493_jsonfn-inline"></a>inline</h3>
<div class="paragraph">
<p>Get the JSON string on one line.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignature.2"><a class="anchor" href="#src-196596493_jsonfn-Methodsignature.2"></a>Method signature</h4>
<div class="paragraph">
<p><code>JsonBuilder inline()</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.11"><a class="anchor" href="#src-196596493_jsonfn-Arguments.11"></a>Arguments</h4>
<div class="paragraph">
<p>none</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.13"><a class="anchor" href="#src-196596493_jsonfn-Example.13"></a>Example</h4>
<div class="paragraph">
<p>[#assign pageNode = cmsfn.contentByPath("/vinyl", "website") /]<br>
[#assign jsonBuilder =
jsonfn.fromChildNodesOf(pageNode).readNodeTypes("mgnl:page").down(2).add("title")
/]<br>
/<strong> multiline </strong>/<br>
$\{jsonBuilder.print()}<br>
/<strong> single-line </strong>/<br>
$\{jsonBuilder<strong>.inline()</strong>.print()}</p>
</div>
<div class="paragraph">
<p>This example renders a component node which contains an image (which
gets expanded) and includes its renditions.</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>/<strong> multiline </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>[ {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>`"Rock"</code></p>
</div>
<div class="paragraph">
<p><code>}, {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>`"Disco"</code></p>
</div>
<div class="paragraph">
<p><code>}, {</code></p>
</div>
<div class="paragraph">
<p>`  <code>"title"</code> : <code>`"Jazz"</code></p>
</div>
<div class="paragraph">
<p><code>} ]</code></p>
</div>
<div class="paragraph">
<p><code>/<strong> single-line </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>[{<code>"title"</code>:<code>"Rock"</code>},{<code>"title"</code>:<code>"Disco"</code>},{<code>"title"</code>:<code>"Jazz"</code>}]</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-maskChar"><a class="anchor" href="#src-196596493_jsonfn-maskChar"></a>maskChar</h3>
<div class="paragraph">
<p>Replace one char with another on property names.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignature.3"><a class="anchor" href="#src-196596493_jsonfn-Methodsignature.3"></a>Method signature</h4>
<div class="paragraph">
<p><code>JsonBuilder maskChar(char what, char replace)</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.12"><a class="anchor" href="#src-196596493_jsonfn-Arguments.12"></a>Arguments</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>what</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The char to replace.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>replace</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The replacement char.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.14"><a class="anchor" href="#src-196596493_jsonfn-Example.14"></a>Example</h4>
<div class="paragraph">
<p>[#assign pageNode =
cmsfn.contentByPath("/comics/belgian-comics/morris/lucky-luke/jolly-jumper/in-love",
"website") /]<br>
[#assign jsonBuilder = jsonfn.from(pageNode).add("mgnl:last.<strong>x") /]<br>
$\{jsonfn.from(pageNode).add("mgnl:lastA.</strong>").print()}<br>
/<strong> </strong>/<br>
$\{jsonfn.from(pageNode).add("mgnl:lastA.<strong>")</strong>.maskChar(':',
'_')*.print()}</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastActivated"</code> : <code>1488452079969</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl:lastActivatedBy"</code> : <code>`"superuser"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>/<strong> </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl_lastActivated"</code> : <code>1488452079969</code>,`</p>
</div>
<div class="paragraph">
<p>`  <code>"mgnl_lastActivatedBy"</code> : <code>`"superuser"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-escapeBackslash"><a class="anchor" href="#src-196596493_jsonfn-escapeBackslash"></a>escapeBackslash</h3>
<div class="paragraph">
<p>Escapes backslashes (<code>\</code>) in the JSON. Use with care and only if
strictly necessary. Typically backslashes are already escaped!</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignature.4"><a class="anchor" href="#src-196596493_jsonfn-Methodsignature.4"></a>Method signature</h4>
<div class="paragraph">
<p><code>JsonBuilder escapeBackslash()</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.13"><a class="anchor" href="#src-196596493_jsonfn-Arguments.13"></a>Arguments</h4>
<div class="paragraph">
<p>No arguments.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.15"><a class="anchor" href="#src-196596493_jsonfn-Example.15"></a>Example</h4>
<div class="paragraph">
<p>[#assign cameraNode = cmsfn.contentByPath("/cameras/X-Pro2",
"cameracollection") /]<br>
$\{jsonfn.from(cameraNode).add("description")<strong>.escapeBackslash()</strong>.print()}</p>
</div>
<div class="paragraph">
<p>Expand to see the rendered json</p>
</div>
<div class="paragraph">
<p><code>/<strong> not especially escaped </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"description"</code> : <code>`"&lt;p&gt;/\\ /\\ The Fujifilm X-Pro2 is a &#8230;&#8203;&lt;/p&gt;\n\n&lt;p&gt;&nbsp;&lt;/p&gt;\n"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>/<strong> escaped </strong>/</code></p>
</div>
<div class="paragraph">
<p><code>{</code></p>
</div>
<div class="paragraph">
<p>`  <code>"description"</code> : <code>`"&lt;p&gt;/\\\\ /\\\\ The Fujifilm X-Pro2 is a &#8230;&#8203;&lt;/p&gt;\\n\\n&lt;p&gt;&nbsp;&lt;/p&gt;\\n"</code></p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p>The backslashes are already escaped.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-wrapForI18n"><a class="anchor" href="#src-196596493_jsonfn-wrapForI18n"></a>wrapForI18n</h3>
<div class="paragraph">
<p>Ensures that localized values are available and the values of the
properties are set according to the current locale.</p>
</div>
<div class="paragraph">
<p>When the function is applied, the nodes are wrapped into I18nNodeWrapper
.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignature.5"><a class="anchor" href="#src-196596493_jsonfn-Methodsignature.5"></a>Method signature</h4>
<div class="paragraph">
<p><code>JsonBuilder wrapForI18n()</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.14"><a class="anchor" href="#src-196596493_jsonfn-Arguments.14"></a>Arguments</h4>
<div class="paragraph">
<p>No arguments</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.16"><a class="anchor" href="#src-196596493_jsonfn-Example.16"></a>Example</h4>
<div class="paragraph">
<p>[#assign cameraNode = cmsfn.contentByPath("/cameras/X-Pro2",
"cameracollection") /]<br>
$\{jsonfn.from(cameraNode).add("description")<strong>.wrapForI18n()</strong>.print()}</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596493_jsonfn-print"><a class="anchor" href="#src-196596493_jsonfn-print"></a>print</h3>
<div class="paragraph">
<p>The <code>print</code> methods returns the JSON as a string. Always call this
method at the end when you want to render the JSON.</p>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Methodsignature.6"><a class="anchor" href="#src-196596493_jsonfn-Methodsignature.6"></a>Method signature</h4>
<div class="paragraph">
<p><code>JsonBuilder print()</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Arguments.15"><a class="anchor" href="#src-196596493_jsonfn-Arguments.15"></a>Arguments</h4>
<div class="paragraph">
<p>No arguments</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596493_jsonfn-Example.17"><a class="anchor" href="#src-196596493_jsonfn-Example.17"></a>Example</h4>
<div class="paragraph">
<p>[#assign pageNode = cmsfn.contentByPath("/vinyl", "website") /]<br>
$\{jsonfn.from(pageNode).addAll().exclude("mgnl.<strong>", "jcr.</strong>")<strong>.print()</strong>}</p>
</div>
<div class="paragraph">
<p>imgfn</p>
</div>
<div class="paragraph">
<p>navfn</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
