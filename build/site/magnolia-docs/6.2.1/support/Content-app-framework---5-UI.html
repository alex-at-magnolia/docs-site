<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Content app framework - 5 UI - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/6.2.1/support/Content-app-framework---5-UI.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../magnolia-docs/6.2/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../magnolia-docs/6.2/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../magnolia-general/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">6.2.1</button>
  <div class="version-menu">
    <a class="version is-current" href="Content-app-framework---5-UI.html">6.2.1</a>
    <a class="version is-missing" href="../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Magnolia Documentation</a></li>
    <li><a href="Content-app-framework---5-UI.html">Content app framework - 5 UI - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="6.2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../rn/release-notes.html">Release notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/administration/Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/modules/Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/authoring/Authoring.html">Authoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Support.html">Need Support?</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">Content app framework - 5 UI - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Support.html" class="bare">Support.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Support.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="">&#8230;&#8203;</a></p>
</li>
<li>
<p><a href="Magnolia-5-UI-documentation.html">Magnolia 5 UI documentation</a></p>
</li>
<li>
<p><a href="Content-apps---5-UI.html">Content apps - 5 UI</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196598262"><a class="anchor" href="#src-196598262"></a>Content app framework - 5 UI</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p><span class="status  red">DEPRECATED</span></p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>This content app framework is based on the deprecated Vaadin 7, which
has been replaced with Vaadin 8 since Magnolia 6.0. It is part of the
<em>Magnolia 5 UI</em> framework.</p>
</div>
<div class="paragraph">
<p>For Vaadin 8 data binding, see
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Data+source+definition">Data
source definition</a> and
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Item+providers">Item
providers</a> instead.</p>
</div>
<div class="paragraph">
<p>On this page, we explain the building blocks of the content app
framework and provide some guidelines.</p>
</div>
<div class="sect2">
<h3 id="src-196598262_Contentappframework-5UI-Buildingblocks"><a class="anchor" href="#src-196598262_Contentappframework-5UI-Buildingblocks"></a>Building blocks</h3>
<div class="paragraph">
<p>This diagram shows the building blocks you need to create a custom
content app:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Data source contains the data such as products.</p>
</li>
<li>
<p><code>ContentConnector</code> is a bridge to the data source. It helps you read
content from data sources outside the JCR repository.</p>
</li>
<li>
<p><code>Container</code> represents the data source in a Vaadin context. It
provides methods to get, add and remove items and properties.</p>
</li>
<li>
<p><code>ContentPresenter</code> uses the data in the <code>Container</code> to draw a user
interface.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/download/attachments/196598262/content-app-framework.png" alt="images/download/attachments/196598262/content-app-framework.png"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="src-196598262_safe-id-Q29udGVudGFwcGZyYW1ld29yay01VUktQ29udGFpbmVyLEl0ZW1JZHNhbmRJdGVtcw"><a class="anchor" href="#src-196598262_safe-id-Q29udGVudGFwcGZyYW1ld29yay01VUktQ29udGFpbmVyLEl0ZW1JZHNhbmRJdGVtcw"></a>Container, ItemIds and Items</h3>
<div class="paragraph">
<p>We start with some Vaadin basics which you should know. We recommend to
read <a href="https://vaadin.com/documentation">Vaadin documentation</a> for general
information about
<a href="https://vaadin.com/api/com/vaadin/data/Container.html">Container</a> and
<a href="https://vaadin.com/docs/v7/framework/datamodel/datamodel-overview.html">binding
components to Data</a>.</p>
</div>
<div class="paragraph">
<p>A Container represents a data source in a Vaadin context. The Container
provides methods to get, add and remove items and properties in the data
source. The Container can hold 0 to n items. An Item can hold 0 to n
Properties. The Presenter uses the data of a Container to render a
Content view.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/download/attachments/196598262/container-item-itemId-property.png" alt="images/download/attachments/196598262/container-item-itemId-property.png"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Container wraps the data of the data source. It provides methods to
get items by their ID, to get all Items, to get all itemIds and so on.
Every Container must implement at least the
<a href="https://vaadin.com/api/com/vaadin/data/Container.html">Container</a>
interface.</p>
</li>
<li>
<p><code>ItemId</code> is the key to get an item. Vaadin doesn&#8217;t type the itemId. It
is just an object. A simple itemId could be a string. In some cases an
itemId is a <a href="http://en.wikipedia.org/wiki/Plain_Old_Java_Object">POJO</a>
with its own properties, for example JcrItemId. itemIds are sent by
events.</p>
</li>
<li>
<p><code>Item</code> is comparable to a row in a database table; it must implement
the Vaadin <a href="https://vaadin.com/api/com/vaadin/data/Item.html">Item</a>
interface. An item contains a set of properties and offers methods to
add, modify and remove the properties.<br>
Every property is identified by a property ID. The property ID is not
typed either, it is just an object, usually a string. Use the property
ID to configure columns in the content view.</p>
</li>
<li>
<p><a href="https://vaadin.com/api/com/vaadin/data/Property.html">Property</a> is the
Vaadin interface for a item property. A property has a value and a type.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>You must configure the Container before adding items: The Container must
know the properties (IDs and types) which it will display. You can add
an item only, if all of its properties are known to the Container. It is
valid to add an item which has not all properties as the configured
Container.</p>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-GuidelinesforcreatingContainers"><a class="anchor" href="#src-196598262_Contentappframework-5UI-GuidelinesforcreatingContainers"></a>Guidelines for creating Containers</h4>
<div class="ulist">
<ul>
<li>
<p>Write methods of the
<a href="https://vaadin.com/api/com/vaadin/data/Container.html">Container</a>
interface are not required when running in the content app.</p>
</li>
<li>
<p>If you want to manipulate data - add, edit, delete - do not manipulate
Container items. Instead, create actions that interact directly with the
data source. After an action is executed, the view and its underlying
Container are refreshed automatically if the Container implements
Refreshable.</p>
</li>
<li>
<p>Create a fully customized Container or extend a concrete
implementation provided by Vaadin or Magnolia.</p>
</li>
<li>
<p>When creating a fully custom Container, implement "empty" write
methods, they are not required.</p>
<div class="paragraph">
<p>Click to see the example of an "empty" method</p>
</div>
<div class="paragraph">
<p><code>@Override</code></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>public<code> Object addItem() </code>throws`</code> UnsupportedOperationException {`</p>
</div>
<div class="paragraph">
<p>`    <code>throw</code> <code>new</code> UnsupportedOperationException(<code>"addItem is not supported!"</code>);`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="sect4">
<h5 id="src-196598262_Contentappframework-5UI-MandatoryandoptionalContainerinterfaces"><a class="anchor" href="#src-196598262_Contentappframework-5UI-MandatoryandoptionalContainerinterfaces"></a>Mandatory and optional Container interfaces</h5>
<div class="paragraph">
<p>In addition to the base interface
<a href="https://vaadin.com/api/com/vaadin/data/Container.html">Container</a> there
are a number of subinterfaces. Which of them should a custom Container
implement?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Container</code> interface is mandatory.</p>
</li>
<li>
<p>A Container of a tree view additionally requires at least
<a href="https://vaadin.com/api/7.3.3/com/vaadin/data/Container.Hierarchical.html">Container.Hierarchical</a>.
Implementing
<a href="https://vaadin.com/api/7.3.3/com/vaadin/data/Collapsible.html">Collapsible</a>
is not mandatory but helpful in a custom tree Container.</p>
</li>
<li>
<p>For lazy loading behavior implement also
<a href="https://vaadin.com/api/7.3.3/com/vaadin/data/Container.Indexed.html">Container.Indexed</a>.</p>
</li>
<li>
<p>Implementing Refreshable is optional but recommended.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="src-196598262_Contentappframework-5UI-ConcreteVaadinContainers"><a class="anchor" href="#src-196598262_Contentappframework-5UI-ConcreteVaadinContainers"></a>Concrete Vaadin Containers</h5>
<div class="paragraph">
<p>Vaadin offers some concrete Containers. Use
<a href="https://vaadin.com/api/7.3.1/com/vaadin/data/util/IndexedContainer.html">IndexedContainer</a>
for a list and
<a href="https://vaadin.com/api/7.3.1/com/vaadin/data/util/HierarchicalContainer.html">HierarchicalContainer</a>
for a tree. The hierarchical Container extends the list. Both extend
<a href="https://vaadin.com/api/com/vaadin/data/util/AbstractInMemoryContainer.html">AbstractInMemoryContainer</a>.</p>
</div>
<div class="paragraph">
<p>To prepare a concrete Vaadin Container within a content subapp, create
the data structure using the Container&#8217;s write methods to add the data
which goes into memory.</p>
</div>
<div class="paragraph">
<p>Concrete Vaadin Containers are difficult to use for lazy loading. If you
find a nice lazy loading solution in a subclass of
HierarchicalContainer, please leave a comment!</p>
</div>
</div>
<div class="sect4">
<h5 id="src-196598262_Contentappframework-5UI-CompletelycustomContainers"><a class="anchor" href="#src-196598262_Contentappframework-5UI-CompletelycustomContainers"></a>Completely custom Containers</h5>
<div class="paragraph">
<p>For a completely custom Container, implement the required interfaces.
Depending on the data source and your requirements concerning speed in a
production environment your Container probably should have these
abilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lazy loading</p>
</li>
<li>
<p>Caching data</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-GuidelinesforItemIds"><a class="anchor" href="#src-196598262_Contentappframework-5UI-GuidelinesforItemIds"></a>Guidelines for ItemIds</h4>
<div class="paragraph">
<p>The Vaadin API leaves it open how you want to implement ItemIds. In the
Vaadin API an ItemId is just an <code>Object</code>. Think carefully what ItemId to
use.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An ItemId must be unique within a Container.</p>
</li>
<li>
<p>The itemId must carry enough information to fetch data from the data
source to instantiate its corresponding Item. This is required in the
context of ContentConnector. For example,
<a href="https://javadoc.magnolia-cms.com/info.magnolia.ui.vaadin.integration.jcr.JcrItemId">JcrItemId</a>
is a plain Java object that carries two properties: <code>uuid</code> and
<code>workspace</code>. These two properties are sufficient to get data from a JCR
repository given that there is access to a
<a href="http://www.day.com/specs/jsr170/javadocs/jcr-2.0/javax/jcr/Session.html">Session</a>.</p>
</li>
<li>
<p>It must be possible to get an ItemId by a given Item in the context of
ContentConnector.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="src-196598262_safe-id-Q29udGVudGFwcGZyYW1ld29yay01VUktV2hhdGlzYWdvb2RJdGVtSWQ_U3RyaW5nb3JQT0pPPw"><a class="anchor" href="#src-196598262_safe-id-Q29udGVudGFwcGZyYW1ld29yay01VUktV2hhdGlzYWdvb2RJdGVtSWQ_U3RyaW5nb3JQT0pPPw"></a>What is a good ItemId? String or POJO?</h5>
<div class="paragraph">
<p>A String is a very simple and easy implementation for an ItemId. If your
data source provides a unique String which is sufficient to build the
corresponding item by querying the data source using only the String,
then a String as ItemId is fine. However, if you must concatenate a
String to build a unique itemId you should rather implement a plain Java
object (<a href="http://en.wikipedia.org/wiki/Plain_Old_Java_Object">POJO</a>) for
the ItemId.</p>
</div>
<div class="paragraph">
<p>When using a POJO you will require a method which creates a String
representation of your ItemId. Furthermore it must be possible to create
an ItemId (of your type, the POJO) by the String representation.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-CreatingItems"><a class="anchor" href="#src-196598262_Contentappframework-5UI-CreatingItems"></a>Creating Items</h4>
<div class="paragraph">
<p>When using a concrete Container from Vaadin, you won&#8217;t need a specific
<a href="https://vaadin.com/api/com/vaadin/data/Item.html">Item</a> implementation,
instead you have to add items by calling:</p>
</div>
<div class="paragraph">
<p><code>Item item = addItem(Object itemId);</code></p>
</div>
<div class="paragraph">
<p>which returns an Item on which you have to set properties.</p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Tip: When using a Container which extends
<a href="https://vaadin.com/api/7.3.1/com/vaadin/data/util/IndexedContainer.html">IndexedContainer</a>
, Items returned by <code>#addItem</code> already have set properties with default
values. You cannot add the properties again. Instead, you have to set
the values on the already existing properties.</p>
</div>
<div class="paragraph">
<p><code>Object itemId = createItemId(<code>/* some arguments here */</code>)</code></p>
</div>
<div class="paragraph">
<p><code>Item item = indexedContainer.addItem(itemId);</code></p>
</div>
<div class="paragraph">
<p><code>// Adding a property will fail. (Property has already been set by container with default value.)</code></p>
</div>
<div class="paragraph">
<p><code>// item.addItemProperty("property-id", new ObjectProperty("value"));</code></p>
</div>
<div class="paragraph">
<p><code>// Instead, change the value of the properties that are already set.</code></p>
</div>
<div class="paragraph">
<p><code>item.getItemProperty(<code>"property-id"</code>).setValue(<code>"new value"</code>);</code></p>
</div>
<div class="paragraph">
<p>When you implement a fully customized Container you most probably
require a custom Item. Extend a Vaadin implementation.
<a href="https://vaadin.com/api/7.3.1/com/vaadin/data/util/BeanItem.html">BeanItem</a>
and
<a href="https://vaadin.com/api/7.3.1/com/vaadin/data/util/PropertysetItem.html">PropertysetItem</a>
are both adequate for many use cases.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196598262_Contentappframework-5UI-ContentviewPresenterknowscolumnsandprovidesaContainer"><a class="anchor" href="#src-196598262_Contentappframework-5UI-ContentviewPresenterknowscolumnsandprovidesaContainer"></a>Content view Presenter knows columns and provides a Container</h3>
<div class="paragraph">
<p>A Magnolia content app contains at least one subapp, displayed to users
as a tab. A browser subapp is a special type of subapp that contains a
workbench for operating on content items.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/download/attachments/196598262/app-subapp-workbench.png" alt="images/download/attachments/196598262/app-subapp-workbench.png"></span></p>
</div>
<div class="paragraph">
<p>The workbench must have at least one content view. Magnolia provides
three view types out of the box: tree, list and thumbnail. You can also
define other customized views.</p>
</div>
<div class="paragraph">
<p>To add a content view you need at least:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ContentPresenter implementation</p>
</li>
<li>
<p>ConfiguredContentPresenterDefinition implementation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A content view is rendered by the content presenter which must be
configured separately for each view. The data rendered on the view is
provided by the Container. The presenter instantiates a suitable
Container.</p>
</div>
<div class="paragraph">
<p>A tree view requires a Container which implements the
<a href="https://vaadin.com/api/com/vaadin/data/Container.Hierarchical.html">Container.Hierarchical</a>
interface. For list and thumbnail views it is sufficient to have a
Container which implements only the base interface Container.</p>
</div>
<div class="paragraph">
<p>This means that you will probably need different Containers for
different views.</p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>The subapp has exactly one ContentConnector which must work for all used
Containers within the sub-app.</p>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-Contentviewconfiguration"><a class="anchor" href="#src-196598262_Contentappframework-5UI-Contentviewconfiguration"></a>Content view configuration</h4>
<div class="paragraph">
<p>A content view configuration requires the following parts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ContentPresenter</code> for every content view in a content app.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>class</code> property</p>
</li>
<li>
<p><code>columns</code> node for
<a href="#src-196598262_Contentappframework-5UI-Columnconfiguration">configuring
columns</a></p>
</li>
</ol>
</div>
</li>
<li>
<p>ContentPresenterDefinition to set the implementation class of the
custom content presenter.</p>
</li>
<li>
<p><code>ContentPresenter</code> that extends AbstractContentPresenterBase or one of
its subclasses. Connected to a Container. Must implement the
<code>AbstractContentPresenterBase#initializeContainer</code> method.</p>
</li>
<li>
<p>Container that is bound to the content presenter.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/images/download/attachments/196598262/detail-ContentPresenter.png" alt="images/download/attachments/196598262/detail-ContentPresenter.png"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-Columnconfiguration"><a class="anchor" href="#src-196598262_Contentappframework-5UI-Columnconfiguration"></a>Column configuration</h4>
<div class="paragraph">
<p>Every column in the view must be configured. Example:*JCR node*</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contentViews</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">columns</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">title</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.flickr.app.contentview.FlickrBrowserItemColumnDefinition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formatterClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.flickr.app.contentview.FlickrBrowserItemColumnFormatter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">propertyName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">title</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>YAML</strong></p>
</div>
<div class="paragraph">
<p><code>contentViews:</code></p>
</div>
<div class="paragraph">
<p>`  columns:`</p>
</div>
<div class="paragraph">
<p>`    - name: title`</p>
</div>
<div class="paragraph">
<p>`      class: info.magnolia.flickr.app.contentview.FlickrBrowserItemColumnDefinition`</p>
</div>
<div class="paragraph">
<p>`      formatterClass: info.magnolia.flickr.app.contentview.FlickrBrowserItemColumnFormatter`</p>
</div>
<div class="paragraph">
<p>`      propertyName: title`</p>
</div>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;column name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The name of a column is arbitrary, however, it makes sense to use the
same or similar name as the <code>propertyName</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>A definition class which must extend AbstractColumnDefinition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formatterClass</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>A formatter class which must extend AbstractColumnFormatter.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>propertyName</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Must be equal to a Container property ID.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For all properties, see <a href="Column-definition---5-UI.html">Column
definition</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196598262_safe-id-Q29udGVudGFwcGZyYW1ld29yay01VUktQ29udGVudENvbm5lY3Rvcmtub3dzdGhlcmVsYXRpb25iZXR3ZWVuaXRlbSxpdGVtSWRhbmRVUkxmcmFnbWVudA"><a class="anchor" href="#src-196598262_safe-id-Q29udGVudGFwcGZyYW1ld29yay01VUktQ29udGVudENvbm5lY3Rvcmtub3dzdGhlcmVsYXRpb25iZXR3ZWVuaXRlbSxpdGVtSWRhbmRVUkxmcmFnbWVudA"></a>ContentConnector knows the relation between item, itemId and URL fragment</h3>
<div class="paragraph">
<p><a href="Content-connector---5-UI.html">ContentConnector</a> is a core piece for
a content app. It knows which item belongs to an itemId and vice versa.
The connector can create a URL fragment from an itemId and vice versa.</p>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-URLfragmentsandevents"><a class="anchor" href="#src-196598262_Contentappframework-5UI-URLfragmentsandevents"></a>URL fragments and events</h4>
<div class="paragraph">
<p>When the user selects an item in a content app a SelectionChangedEvent
is fired. The event carries the ID of the selected item. The event leads
to a change in the BrowserLocation object of the subapp. That&#8217;s why the
URL fragment methods are required.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-ContentConnectormethods"><a class="anchor" href="#src-196598262_Contentappframework-5UI-ContentConnectormethods"></a>ContentConnector methods</h4>
<div class="paragraph">
<p>If you look at the
<a href="https://vaadin.com/api/com/vaadin/data/Container.html">Container</a>
interface, its methods are similar to methods in the ContentConnector:</p>
</div>
<div class="paragraph">
<p>info.magnolia.ui.vaadin.integration.contentconnector.ContentConnector</p>
</div>
<div class="paragraph">
<p><code>public<code> </code>interface`</code> ContentConnector {`</p>
</div>
<div class="paragraph">
<p>`    String getItemUrlFragment(Object itemId);`</p>
</div>
<div class="paragraph">
<p>`  Object getItemIdByUrlFragment(String urlFragment);`</p>
</div>
<div class="paragraph">
<p>`    Object getDefaultItemId();`</p>
</div>
<div class="paragraph">
<p>`    Item getItem(Object itemId);`</p>
</div>
<div class="paragraph">
<p>`    Object getItemId(Item item);`</p>
</div>
<div class="paragraph">
<p>`    <code>boolean</code> canHandleItem(Object itemId);`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="sect4">
<h5 id="src-196598262_safe-id-Q29udGVudGFwcGZyYW1ld29yay01VUktQ29udGVudENvbm5lY3RvcidzcmVsYXRpb250b0NvbnRhaW5lcg"><a class="anchor" href="#src-196598262_safe-id-Q29udGVudGFwcGZyYW1ld29yay01VUktQ29udGVudENvbm5lY3RvcidzcmVsYXRpb250b0NvbnRhaW5lcg"></a>ContentConnector&#8217;s relation to Container</h5>
<div class="paragraph">
<p>A ContentConnector must implement methods that are very similar to
methods in the Container. That said, it can be handy to have an instance
of the Container in your ContentConnector. However, as soon as you have
more than one Container this pattern no longer works.</p>
</div>
<div class="paragraph">
<p>The presenter responsible for a view must initialize the Container. If
you can use one Container for all presenters, it is fine to "couple" the
ContentConnector with the Container. For example, if a subapp uses a
list view and a thumbnail view it should be possible to use the same
Container.</p>
</div>
<div class="paragraph">
<p>If you need more than one Container within a sub app, do not use
Container in the ContentConnector implementation but get data directly
from your data source the same way you retrieve data when preparing data
for the Container.</p>
</div>
<div class="paragraph">
<p>You may implement a utility class which provides access to the data
source and creates ItemIds and Items to use both in Container and
contentConnector.</p>
</div>
<div class="paragraph">
<p>Best practice</p>
</div>
<div class="paragraph">
<p>Make the Container instance available in your ContentConnector. This
makes it easier to implement item and itemId related methods. This works
only if you have only one Container per subapp. If you need more
Containers you must decouple the Container and the ContentConnector.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-ConfigureandregisteraContentConnector"><a class="anchor" href="#src-196598262_Contentappframework-5UI-ConfigureandregisteraContentConnector"></a>Configure and register a ContentConnector</h4>
<div class="paragraph">
<p>Every subapp must provide and configure and register its own
<a href="Content-connector---5-UI.html">ContentConnector</a>. Once registered,
you can get the ContentConnector via injection.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement ContentConnector.</p>
</li>
<li>
<p>Create an interface which extends ContentConnectorDefinition, for
example <code>FlickrBrowserContentConnectorDefinition</code>.</p>
</li>
<li>
<p>Create a class which implements your interface and extends
ConfiguredContentConnectorDefinition. Set the implementation class.</p>
</li>
<li>
<p>Configure the connector in the subapp:*JCR node*</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;subapp&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contentConnector</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.flickr.app.contentconnector.FlickrBrowserContentConnectorDefinition</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>YAML</strong></p>
</div>
<div class="paragraph">
<p><code>&lt;subapp&gt;:</code></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>`  contentConnector:`</p>
</div>
<div class="paragraph">
<p>`    class:  info.magnolia.flickr.app.contentconnector.FlickrBrowserContentConnectorDefinition`</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196598262_Contentappframework-5UI-InjectingtheContentConnector"><a class="anchor" href="#src-196598262_Contentappframework-5UI-InjectingtheContentConnector"></a>Injecting the ContentConnector</h4>
<div class="paragraph">
<p>ContentConnectorProvider creates one instance of the type of connector
you set in <code>ConfiguredContentConnectorDefinition</code>. You can inject your
ContentConnector into different classes wherever it is required. You
will always get the same instance.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><code>public<code> </code>class<code> FlickrBrowserTreePresenter </code>extends`</code> TreePresenter {`</p>
</div>
<div class="paragraph">
<p>`    <code>private</code> FlickrBrowserContentConnector contentConnector;`</p>
</div>
<div class="paragraph">
<p>`    <code>`@Inject</code></p>
</div>
<div class="paragraph">
<p>`    <code>public</code> FlickrBrowserTreePresenter(TreeView view, ComponentProvider componentProvider, ContentConnector contentConnector) {`</p>
</div>
<div class="paragraph">
<p>`        <code>super</code>(view, componentProvider);`</p>
</div>
<div class="paragraph">
<p>`        <code>this</code>.contentConnector = (FlickrBrowserContentConnector) contentConnector;`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Since your subapp implementation class is either BrowserSubApp or a
subclass, your subapp already injects the ContentConnector.</p>
</div>
<div class="paragraph">
<p>Action definition - 5 UI</p>
</div>
<div class="paragraph">
<p>Content app with non-JCR content - 5 UI</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
