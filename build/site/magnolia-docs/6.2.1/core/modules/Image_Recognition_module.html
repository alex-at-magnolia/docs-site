<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Image Recognition module - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/6.2.1/core/modules/Image_Recognition_module.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../../magnolia-general/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">6.2.1</button>
  <div class="version-menu">
    <a class="version is-current" href="Image_Recognition_module.html">6.2.1</a>
    <a class="version is-missing" href="../../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Image_Recognition_module.html">Image Recognition module - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="6.2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../rn/release-notes.html">Release notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/Support.html">Need Support?</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">Image Recognition module - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Modules.html" class="bare">Modules.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Modules.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="List_of_modules.html">List of modules</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-209819427"><a class="anchor" href="#src-209819427"></a>Image Recognition module</h2>
<div class="sectionbody">
<table id="main-content" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Download</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#src-209819427_ImageRecognitionmodule-Installing">Multiple
submodules</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DX Core</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">License</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.magnolia-cms.com/mla">MLA</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://jira.magnolia-cms.com/browse/IMGREC">IMGREC</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://nexus.magnolia-cms.com/content/sites/magnolia.enterprise.sites/magnolia-image-recognition/">Image
Recognition</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latest version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2.1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Related topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Image+recognition">Image
recognition</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Content+tagging">Content
tagging</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Digital+asset+management">Digital
asset management</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Magnolia Image Recognition module searches for untagged images,
recognizes and tags them via either a local pre-trained neural network
or an external image recognition solution. The module also provides the
integration of the image recognition feature with
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Content+tagging">content
tags</a>.</p>
</div>
<div class="sect2">
<h3 id="src-209819427_ImageRecognitionmodule-Modulestructure"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Modulestructure"></a>Module structure</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">artifactID</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia-image-recognition-parent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parent reactor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia-content-tags-integration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides functionality to
integrate
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Content+tagging">content
tags</a> and the image recognition service using
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Definition+decoration">decorations</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia-image-recognition-api</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides an API to recognize images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia-image-recognition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the image recognition module and
service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia-amazon-image-recognition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides functionality to
recognize images via <a href="https://aws.amazon.com/rekognition/">Amazon
Rekognition</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia-local-image-recognition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides functionality to recognize
images locally via a pre-trained neural network.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-209819427_ImageRecognitionmodule-Installing"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Installing"></a>Installing</h3>
<div class="paragraph">
<p>Maven is the easiest way to install the modules. Add the following
dependencies to your
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Creating+a+custom+webapp+with+Maven">webapp</a>.
All the other necessary dependencies will be brought in automatically:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.ai.image&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-image-recognition&lt;/artifactId&gt;
  &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.ai.image&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-content-tags-integration&lt;/artifactId&gt;
  &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.ai.image&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-image-recognition-api&lt;/artifactId&gt;
  &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.ai.image&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-amazon-image-recognition&lt;/artifactId&gt;
  &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.ai.image&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-local-image-recognition&lt;/artifactId&gt;
  &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-209819427_ImageRecognitionmodule-Generalconfiguration"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Generalconfiguration"></a>General configuration</h3>
<div class="paragraph">
<p>In the module configuration you:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Choose between the local image recognition service and Amazon
Rekognition service.</p>
</li>
<li>
<p>Adjust the <code>minConfidence</code> property.</p>
</li>
<li>
<p>Fine-tune the performance of parallel image recognition.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="src-209819427_ImageRecognitionmodule-Choosingaserviceprovider"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Choosingaserviceprovider"></a>Choosing a service provider</h4>
<div class="paragraph">
<p>Choose which image recognition solution you want to use: the local image
recognition service provided by Magnolia or the Amazon Rekognition
service.</p>
</div>
<div class="paragraph">
<p>You can configure the service provider in
<code>/image-recognition/config.yaml</code>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>config.yaml</p>
</div>
<div class="paragraph">
<p><code>currentService: info.magnolia.ai.image.local.LocalImageRecogniser</code></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 21%;">
<col style="width: 79%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currentService</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong>, <em>default is `info.magnolia.ai .image.ImageRecogniser$Noop`</em></p>
</div>
<div class="paragraph">
<p>The class name of the service to be used.</p>
</div>
<div class="paragraph">
<p>Can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.ai.image.local.LocalImageRecogniser</code></p>
</li>
<li>
<p><code>info.magnolia.ai.image.amazon.AmazonImageRecogniser</code></p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If you want to use the Amazon Rekognition service, you must change the
currentService property <em>and</em> see
<a href="#src-209819427_ImageRecognitionmodule-Prerequisites">the
Amazon-specific configuration below</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-209819427_ImageRecognitionmodule-Recognitionconfidence"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Recognitionconfidence"></a>Recognition confidence</h4>
<div class="paragraph">
<p>For the Amazon Rekognition service, see
<a href="#src-209819427_ImageRecognitionmodule-Configurationoptions">Amazon
Rekognition configuration options</a>.</p>
</div>
<div class="paragraph">
<p>For the local image recognizer, set it with the <code>minConfidence</code> property
under <code>/local-image-recognition/config.yaml</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minConfidence</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong>, <em>default is `5`</em></p>
</div>
<div class="paragraph">
<p>The confidence score of recognition.</p>
</div>
<div class="paragraph">
<p>An integer value between 0-100. The filter drops the tags with a
confidence score lower than the value of this property.</p>
</div>
<div class="paragraph">
<p>Setting the value higher usually results in fewer tags being attached to
an image asset. A higher confidence score means that the tag more
correctly describes the image or its components.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-209819427_ImageRecognitionmodule-Parallelrecognitionthreads"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Parallelrecognitionthreads"></a>Parallel recognition threads</h4>
<div class="paragraph">
<p>Image recognition can be a very intensive process in terms of CPU
resources. One of the functions of our implementation of image
recognition is that the recognition process can be delegated to several
parallel threads. With more threads working you can obtain the results
faster.</p>
</div>
<div class="paragraph">
<p>You can specify the number of parallel image recognition threads for the
image recognition service provided by the <code>image-recognition-api</code>
submodule. Set the number in the `magnolia.properties `configuration
file through a Magnolia property called
`magnolia.image.recognition.numberOfThreads `.</p>
</div>
<div class="paragraph">
<p>For example, <code>magnolia.image.recognition.numberOfThreads=3</code> enables
three recognition threads. If the property is not set in the file, the
default number of threads used by the system is one.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-209819427_ImageRecognitionmodule-AmazonRekognitionserviceconfiguration"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-AmazonRekognitionserviceconfiguration"></a>Amazon Rekognition service configuration</h3>
<div class="sect3">
<h4 id="src-209819427_ImageRecognitionmodule-Prerequisites"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Prerequisites"></a>Prerequisites</h4>
<div class="paragraph">
<p>This section lists the prerequisites for using Magnolia with Amazon
Rekognition Image recognition service.</p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>To use Amazon Rekognition, you must configure the <code>currentService</code>
property as described in
<a href="#src-209819427_ImageRecognitionmodule-Choosingaserviceprovider">Choosing
a service provider</a>.</p>
</div>
<div class="sect4">
<h5 id="src-209819427_ImageRecognitionmodule-AWSservicepermissions"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-AWSservicepermissions"></a>AWS service permissions</h5>
<div class="paragraph">
<p>First, make sure that you have acquired appropriate permissions for the
service in the Amazon
<a href="https://console.aws.amazon.com/rekognition/home">IAM Management Console</a>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/209819427/aws-aim-console-users-focus-blur.png" alt="images/download/attachments/209819427/aws-aim-console-users-focus-blur.png"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="src-209819427_ImageRecognitionmodule-Accesskeys"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Accesskeys"></a>Access keys</h5>
<div class="paragraph">
<p>You need an AWS secret access key to access the service. Access keys
consist of two parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Access Key ID</p>
</li>
<li>
<p>Secret Access Key</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Generate the key in the security credentials section of the
<a href="https://console.aws.amazon.com/iam/home?region=us-east-2#/users">Amazon
IAM Management Console</a>. (In the navigation bar on the upper right,
choose your user name, and then choose My Security Credentials.)</p>
</div>
<div class="paragraph">
<p>Add the two parts of the key to your Magnolia instance in the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Passwords+app">Passwords
app</a> using the following names:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>aws-credentials</code></th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="../../_images/images/download/attachments/209819427/padlock.gif" alt="images/download/attachments/209819427/padlock.gif"></span>
<code>aws_access_key_id</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="../../_images/images/download/attachments/209819427/padlock.gif" alt="images/download/attachments/209819427/padlock.gif"></span>
<code>aws_secret_access_key</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information about the keys, see
<a href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">Understanding
and Getting Your Security Credentials</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="src-209819427_ImageRecognitionmodule-Regionname"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Regionname"></a>Region name</h5>
<div class="paragraph">
<p>You need to know a region name to configure the Amazon Rekognition Image
service in Magnolia. To reduce data latency, AWS offers several regional
endpoints. Each of the endpoints can be referred to in service
configurations by a region name, for example <code>eu-west-1</code>.</p>
</div>
<div class="paragraph">
<p>For more information see Amazon&#8217;s
<a href="https://docs.aws.amazon.com/general/latest/gr/rande.html">AWS Regions and
Endpoints</a> page. Please note that if you pick a region that does not
support this service, you may get erratic results.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="src-209819427_ImageRecognitionmodule-Configurationoptions"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Configurationoptions"></a>Configuration options</h4>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>In version 1.1 of this module, the configuration was JCR-based. From
version 1.2+, we have completely removed JCR-based configuration and any
existing configuration will not be taken into account.</p>
</div>
<div class="paragraph">
<p>Make sure you replace your configuration with the <code>config.yaml</code> file.</p>
</div>
<div class="paragraph">
<p>Under <code>/amazon-image-recognition/config.yaml</code>, you must configure the
following properties for the recognition service:</p>
</div>
<div class="paragraph">
<p><code>region:</code></p>
</div>
<div class="paragraph">
<p>`  name: your_aws_region_name`</p>
</div>
<div class="paragraph">
<p><code>maxLabels: ``10</code></p>
</div>
<div class="paragraph">
<p><code>minConfidence: ``50</code></p>
</div>
<div class="paragraph">
<p><code>supportedFormats:</code></p>
</div>
<div class="paragraph">
<p>`  png: png`</p>
</div>
<div class="paragraph">
<p>`  jpg: jpg`</p>
</div>
<div class="paragraph">
<p>`  jpeg: jpeg`</p>
</div>
<div class="sect4">
<h5 id="src-209819427_ImageRecognitionmodule-Properties"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Properties"></a>Properties</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>region</code></p>
</div>
<div class="paragraph">
<p><code>name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Label designating a regional endpoint to which the image recognition
service connects, such as <code>eu-west-1</code>.</p>
</div>
<div class="paragraph">
<p>For a list of available regions and labels, see
<a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#rekognition_region" class="bare">https://docs.aws.amazon.com/general/latest/gr/rande.html#rekognition_region</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxLabels</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required,</strong> <em>default is `10`</em></p>
</div>
<div class="paragraph">
<p>The maximum number of tags you want the recognition service to return.</p>
</div>
<div class="paragraph">
<p>An integer value. Minimum value is <code>0</code>. If <code>0</code> is used, no tag would be
assigned to an image asset.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minConfidence</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required,</strong> <em>default is `50`</em></p>
</div>
<div class="paragraph">
<p>The confidence score of recognition.</p>
</div>
<div class="paragraph">
<p>The Amazon Rekognition service returns a confidence score for each image
tag. Image tags with a recognition confidence lower than the value of
the <code>minConfidence</code> property are dropped.</p>
</div>
<div class="paragraph">
<p>See
<a href="#src-209819427_ImageRecognitionmodule-Recognitionconfidence">Recognition
confidence</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>supportedFormats</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required,</strong> <em>default is <code>png</code>, <code>jpg</code>, `jpeg`</em></p>
</div>
<div class="paragraph">
<p>A list of image formats defining which image types are automatically
recognized by the image recognition service.</p>
</div>
<div class="paragraph">
<p>The Amazon Rekognition service currently supports only two image
formats: JPEG/JPG and PNG.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Be aware that the Amazon Rekognition service has several service limits
which may influence the performance of the recognition process. For more
information see
<a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#limits_rekognition">Amazon
Rekognition Limits</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-209819427_ImageRecognitionmodule-Usingotherimagerecognitionsolutions"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Usingotherimagerecognitionsolutions"></a>Using other image recognition solutions</h3>
<div class="paragraph">
<p>You can implement another image recognition solution or integrate your
app with another third-party image recognition solution using the
<code>info.magnolia.ai.image.ImageRecogniser</code> interface provided by the
<code>image-recognition-api</code> submodule:</p>
</div>
<div class="paragraph">
<p>`    <code>`/**</code></p>
</div>
<div class="paragraph">
<p>`     * Takes image bytes as parameter and returns a {@link Collection collection}`</p>
</div>
<div class="paragraph">
<p>`     * of {@link ImageLabel Image label}s as output.`</p>
</div>
<div class="paragraph">
<p>`     *`</p>
</div>
<div class="paragraph">
<p>`     * &lt;p&gt;`</p>
</div>
<div class="paragraph">
<p>`     *     Returns empty collection for the cases below:`</p>
</div>
<div class="paragraph">
<p>`     *     &lt;li&gt;Upon exception&lt;/li&gt;`</p>
</div>
<div class="paragraph">
<p>`     *     &lt;li&gt;Image couldn&#8217;t be recognised&lt;/li&gt;`</p>
</div>
<div class="paragraph">
<p>`     * &lt;/p&gt;`</p>
</div>
<div class="paragraph">
<p>`     */`</p>
</div>
<div class="paragraph">
<p>`    Collection&lt;ImageLabel&gt; recognise(<code>byte</code>[] imageBytes);`</p>
</div>
</div>
<div class="sect2">
<h3 id="src-209819427_ImageRecognitionmodule-Recognizingimages"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Recognizingimages"></a>Recognizing images</h3>
<div class="paragraph">
<p>The image recognition and tagging action is executed during the startup
of the author instance and every time you upload a new image asset.</p>
</div>
<div class="paragraph">
<p>You can also trigger the action manually in the Assets app by selecting
one or more assets and clicking the <strong>Run recognition</strong> action.</p>
</div>
<div class="paragraph">
<p>Images that have already been tagged are marked as such using a JCR
property called <code>lastTaggingAttemptDate</code>. Executing the manual <strong>Run
recognition</strong> action forces a new tag to be set even if the image was
previously tagged.</p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>The image recognition feature is available only on author instances.</p>
</div>
<div class="sect3">
<h4 id="src-209819427_ImageRecognitionmodule-Removingtags"><a class="anchor" href="#src-209819427_ImageRecognitionmodule-Removingtags"></a>Removing tags</h4>
<div class="paragraph">
<p>Once an image has been tagged, you can remove some or all of the tags by
selecting the asset and clicking the <strong>Modify tags</strong> action in the Assets
app.</p>
</div>
<div class="paragraph">
<p>In the dialog box that opens, you can remove individual tags or click
<strong>Remove all tags</strong>.</p>
</div>
<div class="paragraph">
<p>IBM WebSphere compatibility module</p>
</div>
<div class="paragraph">
<p>Imaging module</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
