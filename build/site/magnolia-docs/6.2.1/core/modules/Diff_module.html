<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Diff module - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/core/modules/Diff_module.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2.1/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2.1/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2.1/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">6.2.1</button>
  <div class="version-menu">
    <a class="version" href="../../../core/modules/Diff_module.html">master</a>
    <a class="version is-current" href="Diff_module.html">6.2.1</a>
    <a class="version is-missing" href="../../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Diff_module.html">Diff module - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="6.2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../releases/Releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/Features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/Support.html">Need Support?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#FAQS.adoc">FAQs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">Diff module - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Modules.html" class="bare">Modules.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Modules.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="List_of_modules.html">List of modules</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196596904"><a class="anchor" href="#src-196596904"></a>Diff module</h2>
<div class="sectionbody">
<table id="main-content" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Edition</th>
<th class="tableblock halign-left valign-top">DX Core</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">License</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.magnolia-cms.com/mla">MLA</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://jira.magnolia-cms.com/browse/MGNLDIFF">MGNLDIFF</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://nexus.magnolia-cms.com/content/sites/magnolia.enterprise.sites/magnolia-module-diff/">Diff</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latest version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Diff module enhances Magnolia core
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Versioning">versioning</a>
functionality. The module uses the
<a href="http://code.google.com/p/daisydiff/">daisydiff</a> Java library to compare
two HTML files. Insertions are highlighted in green and deletions in
red. Users can see exactly what has changed between two versions of the
same content. The module is used by the Pages app to compare page
versions. Line-by-line text comparison and changes in asset selection
allow editors and publishers to see at a glance exactly what has
changed.</p>
</div>
<div class="sect2">
<h3 id="src-196596904_Diffmodule-Installing"><a class="anchor" href="#src-196596904_Diffmodule-Installing"></a>Installing</h3>
<div class="paragraph">
<p>Maven is the easiest way to install the module. Add the following to
your
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Bundles+and+webapps">bundle</a>:</p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Note the changes in <code>groupId</code> and <code>artifactId</code> since the 2.0 release.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.diff&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-diff&lt;/artifactId&gt;
  &lt;version&gt;2.2.1&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For integration with the Pages app there is also
<code>magnolia-diff-pages-integration</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.diff&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-diff-pages-integration&lt;/artifactId&gt;
  &lt;version&gt;2.2.1&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="sect3">
<h4 id="src-196596904_Diffmodule-Compatibilitymodule"><a class="anchor" href="#src-196596904_Diffmodule-Compatibilitymodule"></a>Compatibility module</h4>
<div class="paragraph">
<p>We have been gradually removing the old Content API from our modules
since Magnolia 5.6. If you have custom code relying on classes from the
old diff module then you must do one of two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update your code for the
<a href="https://jira.magnolia-cms.com/browse/MGNLDIFF-97">new version of the diff
module</a>.</p>
</li>
<li>
<p>Or you can use the <code>magnolia-diff-compatibility</code> module together with
the <code>magnolia-core-compatibility</code> module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click here to expand to see how to add the compatibility module</p>
</div>
<div class="paragraph">
<p>Add the following snippet to you pom file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia.diff&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-diff-compatibility&lt;/artifactId&gt;
  &lt;version&gt;2.2.1&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196596904_Diffmodule-Configuration"><a class="anchor" href="#src-196596904_Diffmodule-Configuration"></a>Configuration</h3>
<div class="paragraph">
<p>In most circumstances the Diff module requires no configuration.</p>
</div>
<div class="paragraph">
<p>However,
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Enabling+versioning+in+content+apps">version
comparison</a> relies on functionality provided by the Diff module and, if
implemented, may require the following configuration.</p>
</div>
<div class="sect3">
<h4 id="src-196596904_Diffmodule-Diffservlet"><a class="anchor" href="#src-196596904_Diffmodule-Diffservlet"></a>Diff servlet</h4>
<div class="paragraph">
<p>VersionDiffHtmlServlet is registered in the Magnolia
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Filters">filter chain</a> in
the <strong>Configuration</strong> app &gt;
<code>/server/filters/servlets/VersionDiffHtmlServlet</code>. The controller
generates the diff view between two versions of a page by checking the
<code>toVersionNr</code> and <code>fromVersionNr</code> request parameters.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VersionDiffHtmlServlet</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mappings</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-.magnolia-versionDiff</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/.magnolia/versionDiff</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.cms.filters.ServletDispatchingFilter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">comment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shows html diff of different page versions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">servletClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.diff.VersionDiffHtmlServlet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">servletName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VersionDiffHtmlServlet</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596904_Diffmodule-Diffconfiguration"><a class="anchor" href="#src-196596904_Diffmodule-Diffconfiguration"></a>Diff configuration</h4>
<div class="paragraph">
<p>The default settings for headers, cookies, host and port can be set by
configuration.</p>
</div>
<div class="paragraph">
<p>By default Magnolia is set to generate a JSESSIONID cookie. This is
configured in the <code>diff</code> module in the <strong>Configuration</strong> app &gt;
<code>/modules/diff/config/cookies</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modules</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">diff</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSESSIONID</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can configure custom settings for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cookies</code>: You can specify any number of custom session cookie names
to forward.</p>
</li>
<li>
<p><code>headers</code>: The default value is <code>none</code>. By adding a <code>headers</code> config
node you can specify any number of headers to be sent to the
<a href="#src-196596904_Diffmodule-Diffservlet">diff servlet</a> thereby
automatically excluding any headers that are not specified.</p>
</li>
<li>
<p><code>host</code> and <code>port</code> : The default host and port is <code>localhost</code> and
<code>8080</code>. However, the Diff module will work even if you change the
default Tomcat port. This means that you can use the diff functionality
against another server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/warning.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/warning.svg"></span>
Headers and cookies are configured separately.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">diff</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookies</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;cookieA&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;cookieB&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">headers</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;headerA&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;headerB&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;host&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;port&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596904_Diffmodule-DiffHTMLgenerator"><a class="anchor" href="#src-196596904_Diffmodule-DiffHTMLgenerator"></a>Diff HTML generator</h4>
<div class="paragraph">
<p>VersionDiffHtmlGenerator compares two HTML files using
<a href="http://code.google.com/p/daisydiff/source/browse/trunk/daisydiff/src/java/org/outerj/daisy/diff/html/HTMLDiffer.java?r=143"><code>HTMLDiffer</code></a>
and returns HTML that highlights the differences between the compared
pages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The comparison only includes the body of the HTML document.</p>
</li>
<li>
<p>The differences are marked with span tags.</p>
</li>
<li>
<p>The header is taken from the HTML of the page that is compared to.</p>
</li>
<li>
<p>CSS is added.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s a snippet from <code>diff.css</code>
(<a href="https://git.magnolia-cms.com/projects/ENTERPRISE/repos/diff/browse/magnolia-diff/src/main/resources/mgnl-resources/diff-view/css/diff.css">GIT</a>)
located in the <code>mgnl-resources</code> folder of the module jar.</p>
</div>
<div class="paragraph">
<p><code>/*</code></p>
</div>
<div class="paragraph">
<p>` * Styles for the HTML Diff`</p>
</div>
<div class="paragraph">
<p>` */`</p>
</div>
<div class="paragraph">
<p><code>span.diff-html-added {</code></p>
</div>
<div class="paragraph">
<p>`    font-size: <code>100</code>%;`</p>
</div>
<div class="paragraph">
<p>`    background-color: #ccffcc; <code>`/* light green */</code></p>
</div>
<div class="paragraph">
<p>`    cursor: pointer;`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>span.diff-html-removed {</code></p>
</div>
<div class="paragraph">
<p>`    font-size: <code>100</code>%;`</p>
</div>
<div class="paragraph">
<p>`    text-decoration: line-through;`</p>
</div>
<div class="paragraph">
<p>`    background-color: #fc6f6f; <code>`/* light red */</code></p>
</div>
<div class="paragraph">
<p>`    cursor: pointer;`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>span.diff-html-changed {</code></p>
</div>
<div class="paragraph">
<p>`    background-color: #95c6fd; <code>`/* light blue */</code></p>
</div>
<div class="paragraph">
<p>`    cursor: pointer;`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p><code>span.diff-html-selected {</code></p>
</div>
<div class="paragraph">
<p>`    background-color: #FF8800; <code>`/* light orange */</code></p>
</div>
<div class="paragraph">
<p>`    cursor: pointer;`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196596904_Diffmodule-Diffutilityclasses"><a class="anchor" href="#src-196596904_Diffmodule-Diffutilityclasses"></a>Diff utility classes</h4>
<div class="paragraph">
<p>Two utility classes are provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DiffUtil provides the <code>buildComparisonURL</code>,
<code>buildComparisonURLToCurrent</code> and
<code>buildComparisonURLToCurrentUnversioned</code> methods.</p>
</li>
<li>
<p>VersionComparisona POJO that` gets` and` sets` the <code>versionFrom</code> and
<code>versionTo</code> methods.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="src-196596904_Diffmodule-Compareactions"><a class="anchor" href="#src-196596904_Diffmodule-Compareactions"></a>Compare actions</h4>
<div class="paragraph">
<p>The CompareLocalizedVersionsAction and
CompareToPreviousLocalizedVersionAction open the
<a href="#src-196596904_Diffmodule-Diffsubapp">diff subapp</a> (see below)
configured in the <strong>Pages</strong> app. The action definitions are configured in
the <strong>Configuration</strong> app &gt;
<code>/modules/pages/apps/pages/subApps/browser/actions</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modules</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pages</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apps</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pages</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subApps</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">browser</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">actions</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compareVersions</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">availability</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.diff.app.action.CompareLocalizedVersionsActionDefinition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">icon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">icon-compare-versions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare versions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compareToPreviousVersion</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">availability</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.diff.app.action.CompareToPreviousLocalizedVersionActionDefinition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">icon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">icon-compare-versions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare to previous version</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196596904_Diffmodule-Diffsubapp"><a class="anchor" href="#src-196596904_Diffmodule-Diffsubapp"></a>Diff subapp</h4>
<div class="paragraph">
<p>The diff view that opens when comparing different page versions is
configured in the <strong>Pages</strong> app. This configuration is in the
<strong>Configuration</strong> app &gt; <code>/modules/pages/apps/pages/subApps/diff</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>class</code>: EmbeddedPageSubAppDescriptor embeds the page in an iframe.</p>
</li>
<li>
<p><code>label</code>: Renders in the subapp tab.</p>
</li>
<li>
<p><code>subAppClass</code>: EmbeddedPageSubApp is the main tab in an embedded page
app.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modules</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pages</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apps</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pages</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subApps</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">browser</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">detail</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">diff</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.ui.framework.app.embedded.EmbeddedPageSubAppDescriptor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show changes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subAppClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.ui.framework.app.embedded.EmbeddedPageSubApp</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Example:</strong> Here&#8217;s the <code>diff</code> subapp for the
<code>/travel/about/what-we-believe</code> page. The URL is:</p>
</div>
<div class="paragraph">
<p><code>http:`</code>//localhost:8080/magnoliaAuthor/.magnolia/admincentral#app:pages:diff;/.magnolia/versionDiff?diffViewContentHandle=/travel/about/what-we-believe&amp;fromVersionNr=1.0&amp;toVersionNr=1.1&amp;diffLocale=en`</p>
</div>
<div class="paragraph">
<p>Note the reference to the <code>diffViewContentHandle</code>, <code>fromVersionNr</code>, and
<code>toVersionNr</code> parameters.</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:8080/magnoliaAuthor/.magnolia/admincentral#app:pages:diff;/magnoliaAuthor/.magnolia/versionDiff?diffViewContentHandle=/demo-project/about/history&amp;fromVersionNr=1.2&amp;toVersionNr=1.0"><span class="image"><img src="../../_images/images/download/attachments/196596904/6-1-diffModule.png" alt="images/download/attachments/196596904/6-1-diffModule.png"></span></a></p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Restoring a previous version does not restore the name or location
(path) of the item if these have been changed.</p>
</div>
<div class="paragraph">
<p>Device Detection module</p>
</div>
<div class="paragraph">
<p>Digital Asset Management module</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
