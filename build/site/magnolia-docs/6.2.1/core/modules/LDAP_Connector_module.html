<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LDAP Connector module - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/6.2.1/core/modules/LDAP_Connector_module.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../../magnolia-general/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">6.2.1</button>
  <div class="version-menu">
    <a class="version is-current" href="LDAP_Connector_module.html">6.2.1</a>
    <a class="version is-missing" href="../../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="LDAP_Connector_module.html">LDAP Connector module - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="6.2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../rn/release-notes.html">Release notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#core/apps/apps.adoc">Apps</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">LDAP Connector module - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Modules.html" class="bare">Modules.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Modules.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="List_of_modules.html">List of modules</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196597061"><a class="anchor" href="#src-196597061"></a>LDAP Connector module</h2>
<div class="sectionbody">
<table id="main-content" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Edition</th>
<th class="tableblock halign-left valign-top">DX Core</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">License</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.magnolia-cms.com/mla">MLA</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://jira.magnolia-cms.com/browse/MGNLLDAP">MGNLLDAP</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://nexus.magnolia-cms.com/content/sites/magnolia.enterprise.sites/magnolia-ldap/">LDAP</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latest version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.10.3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Magnolia LDAP Connector is a <a href="http://java.sun.com/products/jaas/">JAAS</a>
login module that connects to any LDAP v3 directory service. The LDAP
Connector is used in intranet environments where an enterprise user
management infrastructure already exists. With JAAS you can meet single
sign-on requirements or connect to legacy LDAP servers.</p>
</div>
<div class="sect2">
<h3 id="src-196597061_LDAPConnectormodule-Installing"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Installing"></a>Installing</h3>
<div class="paragraph">
<p>Maven is the easiest way to install the module. Add the following to
your
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Bundles+and+webapps">bundle</a>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;info.magnolia&lt;/groupId&gt;
  &lt;artifactId&gt;magnolia-ldap&lt;/artifactId&gt;
  &lt;version&gt;1.10.3&lt;/version&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196597061_LDAPConnectormodule-Moduleconfiguration"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Moduleconfiguration"></a>Module configuration</h3>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Since module version 1.9, the configuration of the following is done
directly in the <a href="#src-196597061_LDAPConnectormodule-Usermanager">user
manager</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>allowPartialResults</code></p>
</li>
<li>
<p><code>ignoreGroupsWithIllegalName</code></p>
</li>
<li>
<p><code>pageSize</code></p>
</li>
<li>
<p><code>envPropertiesPredicate</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="src-196597061_LDAPConnectormodule-LDAPconfiguration"><a class="anchor" href="#src-196597061_LDAPConnectormodule-LDAPconfiguration"></a>LDAP configuration</h3>
<div class="paragraph">
<p>An LDAP configuration file tells Magnolia where to find your LDAP
directory server. The file also says whether Magnolia should resolve
users, groups or both from the directory.</p>
</div>
<div class="paragraph">
<p>The
<a href="https://nexus.magnolia-cms.com/content/repositories/magnolia.enterprise.releases/info/magnolia/magnolia-ldap-bundle/">LDAP
Connector module bundle</a> provides two sample files in the
<code>configuration-samples</code> folder:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ldap.properties</code> defines an LDAP server.</p>
</li>
<li>
<p><code>ad.properties</code> defines an Active Directory server.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="src-196597061_safe-id-TERBUENvbm5lY3Rvcm1vZHVsZS1Qcm9wZXJ0aWVzKExEQVBhbmQvb3JBY3RpdmVEaXJlY3Rvcnkp"><a class="anchor" href="#src-196597061_safe-id-TERBUENvbm5lY3Rvcm1vZHVsZS1Qcm9wZXJ0aWVzKExEQVBhbmQvb3JBY3RpdmVEaXJlY3Rvcnkp"></a>Properties (LDAP and/or Active Directory)</h4>
<div class="paragraph">
<p>Properties used in the <code>ldap.properties</code> and/or <code>ad.properties</code> file(s):</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 4%;">
<col style="width: 16%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File(s)</th>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.naming.provider.url</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>URL of the LDAP/AD service provider.</p>
</div>
<div class="paragraph">
<p>Example: <code>ldap://ldap.example.com/</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.naming.security.principal</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong>, <em>default is the LDAP provider&#8217;s default</em></p>
</div>
<div class="paragraph">
<p>User or program doing the authentication. Use an appropriate DN/CN for
your server.</p>
</div>
<div class="paragraph">
<p>Example: <code>CN=Administrator,CN=Users,dc=example,dc=com</code></p>
</div>
<div class="paragraph">
<p>Originally interchangeable with the now deprecated <code>adminUserDN</code>
property but took precedence if both were specified in the file.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.naming.security.credentials</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Password or encrypted data such as a digital certificate that the
implementation uses to authenticate the client.</p>
</div>
<div class="paragraph">
<p>Originally interchangeable with the now deprecated <code>adminUserPassword</code>
property but took precedence if both were specified in the file.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.naming.security.authentication</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong>, <em>default is `none`</em></p>
</div>
<div class="paragraph">
<p>Authentication mechanism (password encryption) used. Possible values are
<code>none, simple</code> or a specific authentication mechanism such as
<code>DIGEST-MD5</code> .</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.naming.referral</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong>, <em>default is `ignore`</em></p>
</div>
<div class="paragraph">
<p>Indicates to the service provider how to handle
<a href="http://docs.oracle.com/javase/jndi/tutorial/ldap/referral/overview.html">referrals</a>.
Valid values are <code>ignore</code>, <code>follow</code> and <code>throw</code> .</p>
</div>
<div class="paragraph">
<p>If the LDAP/AD service provider receives a referral despite you having
set the property to <code>ignore</code> it will throw a <code>PartialResultException</code> to
indicate that more results might be coming if the referral was followed.
In this case the server does not support the Manage Referral control and
supports referral updates in some other way. See:
<a href="http://docs.oracle.com/javase/jndi/tutorial/ldap/referral/jndi.html">Oracle:
Referrals in the JNDI</a>. Windows Active Directory is an example of a
directory service which does not support Manage Referral Control.</p>
</div>
<div class="paragraph">
<p>To deal with the <code>PartialResultException</code>, create a property
<strong>Configuration</strong> &gt; <code>/modules/ldap/config/allowPartialResults</code> and set it
to <code>true</code> .</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.naming.factory.initial</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong> (but recommended)</p>
</div>
<div class="paragraph">
<p>The class name of the of the initial context. The class must implement
the <code>javax.naming.directory.DirContext</code> interface or LDAP requests from
Magnolia will fail.</p>
</div>
<div class="paragraph">
<p>The default value for java.naming.factory.initial will depend on your
container or Java configuration. For example, the default configuration
for Apache Tomcat specifies the class
<code>org.apache.naming.SelectorContext</code> which does not implement the
<code>java.naming.directory.DirContext</code> interface. When running in Tomcat,
the class <code>com.sun.jndi.ldap.LdapCtxFactory</code> can be used.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initialSearchAttributes</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Defines the initial connect point to the directory service.</p>
</div>
<div class="paragraph">
<p>Example: <code>initialSearchAttributes</code>=<code>CN=Users,dc=example,dc=com</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OrganizationOrganizationUnitCommonNameSurnameGivenNameuiddnmailPasswordLanguage</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Name mapping(s) taking the form <code>&lt;property&gt;=&lt;value&gt;</code> , for example<strong><br>
</strong></p>
</div>
<div class="paragraph">
<p><code>CommonName=cn</code><br>
<code>mail=mail</code><br>
<code>Password=pass</code><br>
<code>Language=language</code></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/warning.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/warning.svg"></span>
The properties shown on the left are just a few examples. If necessary,
additional (custom) properties may be created to allow smooth mapping of
names.</p>
</div>
<div class="paragraph">
<p>See also:
<a href="#src-196597061_LDAPConnectormodule-AccessingpropertiesfromLDAP">Accessing
properties from LDAP</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userSearchFilter</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>When searching a user from a wide initialSearchAttribute, a custom
filter might come in handy. Be aware that attribute used for resolving
<code>LDAP_USER_ID</code> needs to be same as mapped <code>uid</code> attribute (see mappings
above).</p>
</div>
<div class="paragraph">
<p>Example:
<code>userSearchFilter=(&amp;(objectClass=user)(sAMAccountName=LDAP_USER_ID))</code></p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to reuse the mapped <code>uid</code> attribute from the config
above:</p>
</div>
<div class="paragraph">
<p><code>userSearchFilter=(&amp;(objectClass=user)(UID_ATTRIBUTE=LDAP_USER_ID))</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userSearchFilter</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong><em><br>
</em></p>
</div>
<div class="paragraph">
<p>Custom filter can be used also when searching all users from a wide
initialSearchAttribute.</p>
</div>
<div class="paragraph">
<p>Example: <code>allUsersSearchFilter=(objectClass=user)</code></p>
</div>
<div class="paragraph">
<p>ADUserManager default users search filter is:
<code>(&amp;(objectCategory=person)(objectClass=user))</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupResolverClass</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong> (if <code>roleResolverClass</code> is not used)</p>
</div>
<div class="paragraph">
<p>The value is a class responsible for resolving groups assigned to a
user. The class must implement the
<code>info.magnolia.jaas.sp.ldap.resolver.NameResolver</code> interface.</p>
</div>
<div class="paragraph">
<p>Implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.jaas.sp.ldap.resolver.OpenLDAPGroupResolver</code> resolves
groups from any LDAP directory.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.resolver.ADGroupResolver</code> resolves groups
from Active Directory.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.resolver.MagnoliaGroupResolver</code> resolves
groups from Magnolia.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleResolverClass</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong> (if <code>groupResolverClass</code> is not used)*<br>
*</p>
</div>
<div class="paragraph">
<p>A class responsible for resolving roles assigned to a user. The class
must implement the <code>info.magnolia.jaas.sp.ldap.resolver.NameResolver</code>
interface. Roles cannot be maintained in LDAP, they must be in Magnolia.</p>
</div>
<div class="paragraph">
<p>Implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.jaas.sp.ldap.resolver.MagnoliaRoleResolver</code> resolves
roles from Magnolia.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ad.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ssoSlave</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional,</strong> <em>___default is _`false`</em></p>
</div>
<div class="paragraph">
<p>Set <code>ssoSlave=true</code> if this Magnolia instance is a slave server in a
single sign-on (SSO) environment.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ad.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userMembershipAttribute</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong> (only if <code>ADGroupResolver</code> is used)_<br>
_</p>
</div>
<div class="paragraph">
<p>The name of the user attribute which specifies the groups the user is a
member of._<br>
_</p>
</div>
<div class="paragraph">
<p>Example: <code>userMembershipAttribute=memberOf</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldap.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupSearchFilter</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong> (if <code>OpenLDAPGroupResolver</code> is used)</p>
</div>
<div class="paragraph">
<p>A filter used to find groups the user is a member of.</p>
</div>
<div class="paragraph">
<p>Example:
<code>groupSearchFilter=(&amp;(objectClass=groupOfNames)(member=MEMBERSHIP_VALUE))</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldap.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupMembershipAttributeValue</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong> (if <code>OpenLDAPGroupResolver</code> is used)</p>
</div>
<div class="paragraph">
<p>The value of the <code>dn</code> attribute to be passed to MEMBERSHIP_VALUE in
<code>groupSearchFilter</code> .</p>
</div>
<div class="paragraph">
<p>Example: <code>groupMembershipAttributeValue=dn</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupIdAttribute</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong> (only if either <code>OpenLDAPGroupResolver</code> or <code>ADGroupResolver</code>
is used)*<br>
*</p>
</div>
<div class="paragraph">
<p>The name of the group ID attribute in LDAP/AD.</p>
</div>
<div class="paragraph">
<p>Example: <code>groupIdAttribute=cn</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupSearchContext</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong> (only if either <code>OpenLDAPGroupResolver</code> or <code>ADGroupResolver</code>
is used)</p>
</div>
<div class="paragraph">
<p>A subtree for groups in the LDAP/AD structure if groups are managed in
different subtree than the users. If missing then the
<code>initialSearchAttributes</code> is used.</p>
</div>
<div class="paragraph">
<p>Example: <code>groupSearchContext=cn=groups,dc=example,dc=com</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupsSearchFilter</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong> (only if either <code>OpenLDAPGroupResolver</code> or <code>ADGroupResolver</code>
is used)<strong>,</strong> <em>default values are</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>for the LDAP resolver:
<code>(&amp;(objectClass=groupOfNames)GROUP_IDS_SUBSTITUTION)</code></p>
</li>
<li>
<p>for the AD resolver: <code>(&amp;(objectClass=group)GROUP_IDS_SUBSTITUTION)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A filter for searching groups in LDAP/AD.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupMembershipAttribute</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong> (only if either <code>OpenLDAPGroupResolver</code> or <code>ADGroupResolver</code>
is used)</p>
</div>
<div class="paragraph">
<p>The name of the group attribute which specifies the members belonging to
the group.</p>
</div>
<div class="paragraph">
<p>Example: <code>groupMembershipAttribute=member</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Deprecated properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>adminUserDN</code></p>
</li>
<li>
<p><code>adminUserPassword</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instead, use `java.naming.security.principal `and
`java.naming.security.credentials `properties respectively.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597061_LDAPConnectormodule-magnolia.properties"><a class="anchor" href="#src-196597061_LDAPConnectormodule-magnolia.properties"></a>magnolia.properties</h4>
<div class="paragraph">
<p>Put the`ldap.properties` or <code>ad.properties</code> file inside your Magnolia
webapp, for example in
<code>/&lt;CATALINA_HOME&gt;/webapps/&lt;contextPath&gt;/WEB-INF/config</code> . Reference the
file location from a
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Configuration+management">magnolia.properties</a>
file using the <code>jndi.ldap.config</code> property. Set the value to an absolute
or relative path inside the webapp. You can also use the
<code>${magnolia.home}</code> variable.</p>
</div>
<div class="paragraph">
<p>magnolia.properties</p>
</div>
<div class="paragraph">
<p><code>jndi.ldap.config=WEB-INF/config/ldap.properties</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597061_LDAPConnectormodule-Configuringmultipledirectoryservers"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Configuringmultipledirectoryservers"></a>Configuring multiple directory servers</h4>
<div class="paragraph">
<p>To configure multiple LDAP and AD directories, use the pattern
<code>jndi.ldap.config.&lt;realmName&gt;</code> where <code>realmName</code> corresponds to a realm
name in the <a href="#src-196597061_LDAPConnectormodule-Usermanager">user
manager</a>.</p>
</div>
<div class="paragraph">
<p>Example: Configuring multiple directory servers in <code>magnolia.properties</code>
.</p>
</div>
<div class="paragraph">
<p>magnolia.properties</p>
</div>
<div class="paragraph">
<p><code>jndi.ldap.config.ad=WEB-INF/config/ad.properties</code></p>
</div>
<div class="paragraph">
<p><code>jndi.ldap.config.ldap=WEB-INF/config/ldap.properties</code></p>
</div>
<div class="paragraph">
<p><code>jndi.ldap.config=WEB-INF/config/<code>default</code>-ldap.properties</code></p>
</div>
<div class="paragraph">
<p>Explanation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A user manager with realm name <code>ad</code> will use an Active Directory
property file defined under the <code>jndi.ldap.config.ad</code> key.</p>
</li>
<li>
<p>A user manager with realm name <code>ldap</code> will use an LDAP property file
defined under the <code>jndi.ldap.config.ldap</code> key.</p>
</li>
<li>
<p>A user manager with realm name <code>external</code> will use the default LDAP
property file defined under the <code>jndi.ldap.config</code> key since no specific
property file is configured for this realm.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Corresponding <a href="#src-196597061_LDAPConnectormodule-Usermanager">user
manager</a> configuration:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">server</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">security</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">userManagers</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">system</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ad</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.jaas.sp.ldap.ADUserManager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">realmName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ad</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldap</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.jaas.sp.ldap.LDAPUserManager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">realmName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldap</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">external</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.jaas.sp.ldap.LDAPUserManager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">realmName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">external</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196597061_LDAPConnectormodule-Acustomconfigurationresolver"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Acustomconfigurationresolver"></a>A custom configuration resolver</h4>
<div class="paragraph">
<p>(<span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/warning.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/warning.svg"></span>
LDAP module 1.9+) You can write your own configuration resolver in JAVA.
Add the following component to your module descriptor,</p>
</div>
<div class="paragraph">
<p><code>&lt;<code>components</code>&gt;</code></p>
</div>
<div class="paragraph">
<p>` &lt;<code>id</code>&gt;main&lt;/<code>id</code>&gt;`</p>
</div>
<div class="paragraph">
<p>` &lt;<code>component</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`  &lt;<code>type</code>&gt;info.magnolia.jaas.sp.ldap.config.ConfigResolver&lt;/<code>type</code>&gt;`</p>
</div>
<div class="paragraph">
<p>`  &lt;<code>implementation</code>&gt;your-own-resolver-class&lt;/<code>implementation</code>&gt;`</p>
</div>
<div class="paragraph">
<p>` &lt;/<code>component</code>&gt;`</p>
</div>
<div class="paragraph">
<p><code>&lt;/<code>components</code>&gt;</code></p>
</div>
<div class="paragraph">
<p>change the implementation class accordingly, and make sure that your
module depends on (i.e. is loaded after) Magnolia&#8217;s LDAP module.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196597061_LDAPConnectormodule-JAASloginconfiguration"><a class="anchor" href="#src-196597061_LDAPConnectormodule-JAASloginconfiguration"></a>JAAS login configuration</h3>
<div class="paragraph">
<p>Magnolia uses the Java Authentication and Authorization Service (JAAS)
to authenticate users. When you store users in a directory outside of
Magnolia configure the directory as a LoginModule. You can list several
LoginModules. Authentication proceeds down the module list in the order
you specify with flags, see
<a href="http://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/Configuration.html">javax.security.auth.login.Configuration</a>.
Depending on the servlet container you use the configuration for JAAS is
slightly different.</p>
</div>
<div class="sect3">
<h4 id="src-196597061_LDAPConnectormodule-jaas.configforTomcat"><a class="anchor" href="#src-196597061_LDAPConnectormodule-jaas.configforTomcat"></a>jaas.config for Tomcat</h4>
<div class="paragraph">
<p>For the Tomcat application server, create a <code>jaas.config</code> file and list
the LoginModules in the following format:</p>
</div>
<div class="paragraph">
<p>jaas.config syntax</p>
</div>
<div class="paragraph">
<p>`magnolia { `</p>
</div>
<div class="paragraph">
<p>`   &lt;LoginModule&gt; &lt;flag&gt; &lt;options&gt;;`</p>
</div>
<div class="paragraph">
<p>`   &lt;LoginModule&gt; &lt;flag&gt; &lt;options&gt;;`</p>
</div>
<div class="paragraph">
<p>`   &lt;LoginModule&gt; &lt;flag&gt; &lt;options&gt;;`</p>
</div>
<div class="paragraph">
<p>`   };`</p>
</div>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LoginModule</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>A class that implements the desired authentication technology.</p>
</div>
<div class="paragraph">
<p>Implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.jaas.sp.jcr.JCRAuthenticationModule</code> authenticates
against Magnolia.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.LDAPAuthenticationModule</code> authenticates
against any LDAP directory.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.ADAuthenticationModule</code> authenticates
against Active Directory.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.jcr.JCRAuthorizationModule</code> retrieves the
user&#8217;s ACLs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Set also the <code>groupResolverClass</code> and <code>roleResolverClass</code> properties in
<a href="#src-196597061_LDAPConnectormodule-ldap.properties">ldap.properties</a>
.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flag</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The flag indicates whether success of the preceding LoginModule is
<code>required</code> , <code>requisite</code> , <code>sufficient</code> , or <code>optional</code> . If you only
have one LoginModule then the flag must be <code>required</code>.<br>
See the <code>flag</code> values in
<a href="http://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/Configuration.html">javax.security.auth.login.Configuration</a>
.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>options</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Options is a space-separated list of LoginModule-specific values which
are passed directly to the LoginModule. The options are defined by the
LoginModule itself, and control its behavior.</p>
</div>
<div class="paragraph">
<p>Options for <code>JCRAuthenticationModule</code> module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>realm</code> : Restrict the login to a certain realm. Valid values:
<code>system</code> , <code>external</code> , <code>admin</code> , <code>public</code>.</p>
</li>
<li>
<p><code>use_realm_callback</code> : Allow the client to define the realm he logs
into. Values: <code>true</code> , <code>false</code> . Default is <code>false</code> .</p>
</li>
<li>
<p><code>skip_on_previous_success</code> : A Magnolia-specific option to define if
this module needs to be skipped based on previous (in JAAS module chain)
module status. Values: <code>true</code> , <code>false</code> . If <code>true</code> this module is
skipped if the previous module did a successful login.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example 1: Authenticate against Magnolia on Tomcat</p>
</div>
<div class="paragraph">
<p>jaas.config</p>
</div>
<div class="paragraph">
<p><code>magnolia {</code></p>
</div>
<div class="paragraph">
<p>`   info.magnolia.jaas.sp.jcr.JCRAuthenticationModule requisite;`</p>
</div>
<div class="paragraph">
<p>`   info.magnolia.jaas.sp.jcr.JCRAuthorizationModule required;`</p>
</div>
<div class="paragraph">
<p>`   };`</p>
</div>
<div class="paragraph">
<p>Example 2: Authenticate against LDAP on Tomcat</p>
</div>
<div class="paragraph">
<p>jaas.config</p>
</div>
<div class="paragraph">
<p><code>magnolia {</code></p>
</div>
<div class="paragraph">
<p>`   info.magnolia.jaas.sp.jcr.JCRAuthenticationModule optional;`</p>
</div>
<div class="paragraph">
<p>`   info.magnolia.jaas.sp.ldap.LDAPAuthenticationModule requisite skip_on_previous_success=<code>true</code>;`</p>
</div>
<div class="paragraph">
<p>`   info.magnolia.jaas.sp.jcr.JCRAuthorizationModule required;`</p>
</div>
<div class="paragraph">
<p>`   };`</p>
</div>
<div class="paragraph">
<p>Notes about example 2:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>JCRAuthenticationModule</code> authenticates users who are stored only in
Magnolia such as <code>superuser</code> and <code>anonymous</code> . <code>optional</code> means the
module is not required to succeed. Authentication proceeds to the next
module whether the user is found or not.</p>
</li>
<li>
<p><code>LDAPAuthenticationModule</code> authenticates users who are stored in LDAP.
<code>requisite</code> means that if the login module succeeds, authentication
continues down the list. If the module fails, authentication does not
proceed down the list. This module is skipped if the previous module was
successful. This module could also be
`info.magnolia.jaas.sp.ldap.ADAuthenticationModule `.</p>
</li>
<li>
<p><code>JCRAuthorizationModule</code> is <code>required</code> to succeed.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196597061_LDAPConnectormodule-Usermanager"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Usermanager"></a>User manager</h3>
<div class="paragraph">
<p>You also need to configure an external <code>UserManager</code> .
<span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/warning.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/warning.svg"></span>
Make sure it is placed before the <code>admin</code> but after the <code>system</code> user
managers. Any other order may result in 401 errors (authentication
failed) during publishing and unpublishing of content.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">server</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">security</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">userManagers</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">system</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">external</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.jaas.sp.ldap.LDAPUserManager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">realmName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">external</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">admin</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">public</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>allowCrossRealmDuplicateNames</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong> <em>, default is `false`</em></p>
</div>
<div class="paragraph">
<p>Allows duplicate usernames in different realms. Only applicable to
<code>admin</code> realm.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>A class that implements the UserManager interface.</p>
</div>
<div class="paragraph">
<p>Implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.cms.security.MgnlUserManager</code> manages users stored in
Magnolia.</p>
</li>
<li>
<p><code>info.magnolia.cms.security.ExternalUserManager</code> manages JAAS users.</p>
</li>
<li>
<p><code>info.magnolia.cms.security.HierarchicalUserManager</code> is a variation of
<code>MgnlUserManager</code> that stores users hierarchically using the structure
<code>/&lt;path&gt;/&lt;first letter of username&gt;/&lt;first two letters of username&gt;</code>
such as <code>/public/j/js/jsmith</code> .</p>
</li>
<li>
<p>`info.magnolia.cms.security.DelegatingUserManager`retrieves the user&#8217;s
ACLs.</p>
</li>
<li>
<p><code>info.magnolia.cms.security.SystemUserManager</code> manages system users
such as <code>anonymous</code> and <code>superuser</code> .</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disableCache</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong> <em>, default is `false`</em></p>
</div>
<div class="paragraph">
<p>Allows to disable caching if set to <code>true</code> .</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>realmName</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Realm name corresponding to JAAS login configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>allowPartialResults</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong>, <em>default is `false`</em><strong><br>
</strong></p>
</div>
<div class="paragraph">
<p>Indicates what methods are used to deal with the
<code>PartialResultException</code> exception thrown by the LDAP service provider
(c.f. <code>java.naming.referral</code> property).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>true</code> uses the <code>hasMoreElements()</code> and <code>nextElement()</code> methods.</p>
</li>
<li>
<p><code>false</code> uses the <code>hasMore()</code> and <code>next()</code> methods.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connectionFactory</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>A subnode which allows you to specify a custom <code>connectionFactory</code> .</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The class that implements the <code>connectionFactory</code> .</p>
</div>
<div class="paragraph">
<p>The default class used is
<code>info.magnolia.jaas.sp.ldap.connection.DefaultConnectionFactory</code> .</p>
</div>
<div class="paragraph">
<p>Two additional implementations are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.jaas.sp.ldap.connection.JavaBeanBasedConnectionFactory</code><br>
This implementation supports defining properties <code>securityPrincipal</code> and
<code>securityCredentials</code> . For usage please see Apache&#8217;s
<a href="https://tomcat.apache.org/tomcat-8.0-doc/jndi-resources-howto.html#Generic_JavaBean_Resources">Generic
JavaBean Resources</a>.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.connection.JNDIResourceConnectionFactory</code><br>
This is a JNDI resource based factory. It can be used with
<code>com.sun.jndi.ldap.LdapCtxFactory</code> or with
<code>info.magnolia.jaas.sp.ldap.connection.jndiresources.MagnoliaLdapContextFactory</code>.
For usage please see Apache&#8217;s
<a href="https://tomcat.apache.org/tomcat-8.0-doc/jndi-resources-howto.html#Adding_Custom_Resource_Factories">Adding
Custom Resource Factories</a>.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>envPropertiesPredicate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>A subnode which specifies the <code>envPropertiesPredicate</code> .</p>
</div>
<div class="paragraph">
<p>If not defined explicitly then the predicate accepts anything within the
following namespaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.naming.*</code> (except <code>credentials</code> and <code>principal</code>)</p>
</li>
<li>
<p><code>com.sun.jndi.ldap.*</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The class that implements the <code>envPropertiesPredicate</code> .</p>
</div>
<div class="paragraph">
<p>The default class is
<code>info.magnolia.jaas.sp.ldap.connection.EnvPropertiesDefaultPredicate</code> .</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>passwordDecoder</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>A subnode which defines the decoding method of the admin password used
by the <code>connectionFactory</code> .</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/warning.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/warning.svg"></span>
The decoder is available only with the `DefaultConnectionFactory `and
`JavaBeanBasedConnectionFactory `connection classes. However, you can
also write your own password decoder.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The decoder is available in three implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.jaas.sp.ldap.connection.password.NoOpPasswordDecoder</code><br>
This implementation returns a password without any decoding.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.connection.password.ActivationKeyBasedPasswordDecoder</code><br>
This implementation uses the same set of keys as activation. To gain an
encoded password, use the <code>SecurityUtil.encrypt("password")</code> method.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.connection.password.PasswordManagerBasedPasswordDecoder</code><br>
This implementation loads the admin&#8217;s LDAP password from the
<a href="Password_Manager_module.html">Password Manager module</a>.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pageSize</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong>, <em>default is `500`</em></p>
</div>
<div class="paragraph">
<p>Specifies the number of objects to be returned in a single search
result.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="src-196597061_LDAPConnectormodule-Usermanagersandcaching"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Usermanagersandcaching"></a>User managers and caching</h4>
<div class="paragraph">
<p>By default the <code>ad</code> and <code>ldap</code> user managers use a basic cache
(<a href="Cache_modules.html">Cache modules</a>) to avoid repeated calls to
LDAP/AD. If <a href="Ehcache_3_module.html">Ehcache</a> is used then the default
configuration is automatically bootstrapped into
<code>/modules/cache/config/cacheFactory/caches/ldap-user-manager-cache</code> .
You can disable caching by adding the <code>disableCache</code> property to the
manager&#8217;s node and setting it to <code>true</code> , for example</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ad</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.jaas.sp.ldap.ADUserManager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disableCache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">realmName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ad</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196597061_LDAPConnectormodule-AccessingpropertiesfromLDAP"><a class="anchor" href="#src-196597061_LDAPConnectormodule-AccessingpropertiesfromLDAP"></a>Accessing properties from LDAP</h4>
<div class="paragraph">
<p>If you need to access more user properties than name, full name and
language, extend
<code>info.magnolia.jaas.sp.ldap.LDAPAuthenticationModule#setEntity</code> to push
the desired properties into the <code>Entity</code> object, and the
<code>info.magnolia.cms.security.ExternalUserManager</code>/<code>info.magnolia.cms.security.ExternalUser</code>
pair to expose it.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597061_LDAPConnectormodule-Same-nameusersindifferentrealms"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Same-nameusersindifferentrealms"></a>Same-name users in different realms</h4>
<div class="paragraph">
<p>If you are resolving roles or groups, add the
<code>allowCrossRealmDuplicateNames</code> property under
<code>/server/security/userManagers/admin</code> and set its value to <code>true</code> . This
property allows you to create users with the same name in different
realms when replicating LDAP/AD users in the repository. By default,
Magnolia does not allow the same user name to be repeated.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">security</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">userManagers</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">system</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">external</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">admin</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">allowCrossRealmDuplicatNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.cms.security.MgnlUserManager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lockTimePeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxFailedLoginAttempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">realmName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">admin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">public</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See also:
<a href="#src-196597061_LDAPConnectormodule-Configuringmultipledirectoryservers">Configuring
multiple directory servers</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196597061_LDAPConnectormodule-Groupsandroles"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Groupsandroles"></a>Groups and roles</h3>
<div class="paragraph">
<p>LDAP typically mirrors the organization structure. If your company has a
Marketing department then create a <code>marketing</code> group in the LDAP
directory and assign employees to the group. Magnolia also organizes
users into groups.</p>
</div>
<div class="paragraph">
<p>Magnolia also has
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Roles+and+access+control+lists">roles</a>.
A role grants a user permission to do something. For example, the
<code>editor</code> role grants the user permission to edit content. Permissions
are configured using
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Roles+and+access+control+lists">access
control lists</a>. A role can be assigned directly to a user or to a group.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196597061/roles-groups-users.png" alt="images/download/attachments/196597061/roles-groups-users.png"></span></p>
</div>
<div class="paragraph">
<p>When you authenticate users against an LDAP directory a <em>resolver class</em>
finds the groups and roles the user belongs to. This process is called
<em>resolving</em>. Since the role is the element that grants the user
permission to do something, you must resolve at least roles. You can
optionally also resolve groups.</p>
</div>
<div class="sect3">
<h4 id="src-196597061_LDAPConnectormodule-Groupresolving"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Groupresolving"></a>Group resolving</h4>
<div class="paragraph">
<p>A <code>groupResolverClass</code> configured in
<a href="#src-196597061_LDAPConnectormodule-ldap.properties">ldap.properties</a>
finds groups in the LDAP directory and matches them to groups in
Magnolia. The group names must match exactly.</p>
</div>
<div class="paragraph">
<p>Choose a resolver depending on where the groups are stored:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.jaas.sp.ldap.resolver.MagnoliaGroupResolver</code> resolves
groups from Magnolia.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.resolver.OpenLDAPGroupResolver</code> resolves
groups from any LDAP directory.</p>
</li>
<li>
<p><code>info.magnolia.jaas.sp.ldap.resolver.ADGroupResolver</code> resolves groups
from Active Directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Best practice</p>
</div>
<div class="paragraph">
<p>When you store groups in LDAP, create one matching group per role in
Magnolia. Assign roles to the group in Magnolia in order to grant users
the permissions they need. This minimizes the number of groups you need
to create in Magnolia.</p>
</div>
<div class="paragraph">
<p>Magnolia</p>
</div>
<div class="paragraph">
<p>LDAP</p>
</div>
<div class="paragraph">
<p>Roles</p>
</div>
<div class="paragraph">
<p>Groups</p>
</div>
<div class="paragraph">
<p>Groups</p>
</div>
<div class="paragraph">
<p>Users</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>editor</code></p>
</li>
<li>
<p><code>workflow-base</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>editors</code></p>
</div>
<div class="paragraph">
<p><code>editors</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jsmith</code></p>
</li>
<li>
<p><code>eallen</code></p>
</li>
<li>
<p><code>cappleton</code></p>
</li>
<li>
<p><code>publisher</code></p>
</li>
<li>
<p><code>workflow-base</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>publishers</code></p>
</div>
<div class="paragraph">
<p><code>publishers</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bleroy</code></p>
</li>
<li>
<p><code>dmillet</code></p>
</li>
<li>
<p><code>vrobbins</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/warning.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/warning.svg"></span>
When creating a group name, make sure that it does not contain an
illegal character. See also the <code>ignoreGroupsWithIllegalName</code> property
in module configuration.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196597061_LDAPConnectormodule-Roleresolving"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Roleresolving"></a>Role resolving</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>roleResolverClass</code> configured in
<a href="#src-196597061_LDAPConnectormodule-ldap.properties">ldap.properties</a>
finds roles. Roles must always be stored in Magnolia, they cannot be
stored in the LDAP directory. The reason is that the ACLs that grant
permissions are attached to roles.</p>
</div>
<div class="paragraph">
<p>Magnolia provides one role resolver:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>info.magnolia.jaas.sp.ldap.resolver.MagnoliaRoleResolver</code> resolves
roles from the <code>userroles</code> workspace in Magnolia.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196597061_LDAPConnectormodule-Implementingyourownresolver"><a class="anchor" href="#src-196597061_LDAPConnectormodule-Implementingyourownresolver"></a>Implementing your own resolver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Magnolia does not provide ready-made resolver classes for every possible
LDAP product but you can write your own class. Implement the
<code>info.magnolia.jaas.sp.ldap.resolver.NameResolver</code> interface and the
methods to fetch group names from the directory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196597061_LDAPConnectormodule-TestingandvalidatingLDAPConfiguration"><a class="anchor" href="#src-196597061_LDAPConnectormodule-TestingandvalidatingLDAPConfiguration"></a>Testing and validating LDAP Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>magnolia-ldap-tester</code> artifact is a self-contained executable jar
which can be executed with:</p>
</div>
<div class="paragraph">
<p><code>java -jar magnolia-ldap-tester-&lt;version&gt;.jar &lt;LoginModule <code>class</code> name&gt; &lt;config.properties&gt; &lt;username&gt; &lt;password&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;LoginModule class name&gt;</code> should be either
<code>info.magnolia.jaas.sp.ldap.LDAPAuthenticationModule</code> or
<code>info.magnolia.jaas.sp.ldap.ADAuthenticationModule</code>, depending on which
one you&#8217;re using in <code>jaas.config</code> (or <code>login-config.xml</code> with JBoss).</p>
</div>
<div class="paragraph">
<p>The tool simulates a user login with the given credentials and
configuration, outputs the main results, and logs everything else in
<code>magnolia-ldap-tester.log</code> .</p>
</div>
<div class="paragraph">
<p>A successful login attempt looks like this in the log:</p>
</div>
<div class="paragraph">
<p>`INFO  i.m.jaas.sp.ldap.ConnectionFactory - Trying to log in as `</p>
</div>
<div class="paragraph">
<p>`   cn=jsmith,dc=example,dc=com with a password.`</p>
</div>
<div class="paragraph">
<p><code>DEBUG i.m.jaas.sp.ldap.ConnectionFactory - Login succeeded.</code></p>
</div>
<div class="paragraph">
<p><code>DEBUG i.m.j.s.l.Tester$MockSecuritySupport - Getting user jsmith from realm admin</code></p>
</div>
<div class="paragraph">
<p><code>INFO  info.magnolia.ldap.tool.LDAPTester - Login result: ``true</code></p>
</div>
<div class="paragraph">
<p><code>INFO  info.magnolia.ldap.tool.LDAPTester - Commit result: ``true</code></p>
</div>
<div class="paragraph">
<p><code>DEBUG info.magnolia.ldap.tool.LDAPTester - Subject:</code></p>
</div>
<div class="paragraph">
<p><code>DEBUG info.magnolia.ldap.tool.LDAPTester - User: ``null</code></p>
</div>
<div class="paragraph">
<p>`INFO  info.magnolia.ldap.tool.LDAPTester - `</p>
</div>
<div class="paragraph">
<p>`   Properties: {title=jsmith, `</p>
</div>
<div class="paragraph">
<p>`   email=john.smith<code>@example</code>.com, `</p>
</div>
<div class="paragraph">
<p>`   name=jsmith, `</p>
</div>
<div class="paragraph">
<p>`   fullName=jsmith, `</p>
</div>
<div class="paragraph">
<p>`   password=secret}`</p>
</div>
<div class="paragraph">
<p>`DEBUG info.magnolia.ldap.tool.LDAPTester - `</p>
</div>
<div class="paragraph">
<p>`   State: {groupNames=[], `</p>
</div>
<div class="paragraph">
<p>`   statusValue=<code>1</code>, `</p>
</div>
<div class="paragraph">
<p>`   roleNames=[]}`</p>
</div>
<div class="paragraph">
<p><code>INFO  info.magnolia.ldap.tool.LDAPTester - Group names: (none)</code></p>
</div>
<div class="paragraph">
<p><code>INFO  info.magnolia.ldap.tool.LDAPTester - Role names: (none)</code></p>
</div>
<div class="paragraph">
<p><code>DEBUG info.magnolia.ldap.tool.LDAPTester - AttributesMap</code></p>
</div>
<div class="paragraph">
<p>Do not expect to see any groups or roles assigned. The tester tool does
not connect to Magnolia in any way. It connects to the LDAP. It is
normal for group assignments handled in Magnolia not to show up.</p>
</div>
<div class="paragraph">
<p>JCR Tools module</p>
</div>
<div class="paragraph">
<p>Log Tools module</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
