<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Custom filters - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/6.2.1/core/administration/Custom-filters.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../../magnolia-general/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">6.2.1</button>
  <div class="version-menu">
    <a class="version is-current" href="Custom-filters.html">6.2.1</a>
    <a class="version is-missing" href="../../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Custom-filters.html">Custom filters - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="6.2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../rn/release-notes.html">Release notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/dump/Magnolia-Cloud.html">Dump Index</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">Custom filters - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Administration.html" class="bare">Administration.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Administration.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="">&#8230;&#8203;</a></p>
</li>
<li>
<p><a href="Architecture.html">Architecture</a></p>
</li>
<li>
<p><a href="Request-processing-and-filters.html">Request processing and
filters</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196595725"><a class="anchor" href="#src-196595725"></a>Custom filters</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p>This page explains how to create and configure a custom Filter.</p>
</div>
<div class="paragraph">
<p>Please read about <a href="Filters.html">Filters</a> and
<a href="Request-processing-and-filters.html">request processing</a> which
explains some filters used by Magnolia.</p>
</div>
<div class="sect2">
<h3 id="src-196595725_Customfilters-Implementation"><a class="anchor" href="#src-196595725_Customfilters-Implementation"></a>Implementation</h3>
<div class="paragraph">
<p>To ensure your filter is properly registered using Magnolia
configuration, your filter should implement MgnlFilter or extend another
Magnolia filter which implements MgnlFilter. Extending
AbstractMgnlFilter is usually a good starting point.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><code>public<code> </code>class<code> KlackerFilter </code>extends`</code> AbstractMgnlFilter{`</p>
</div>
<div class="paragraph">
<p>`    <code>`@Override</code></p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>void</code> doFilter(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse,Â `</p>
</div>
<div class="paragraph">
<p>`          FilterChain filterChain) <code>throws</code> IOException, ServletException {`</p>
</div>
<div class="paragraph">
<p>`        httpServletResponse.setHeader(<code>"X-Clacks-Overhead"</code>, <code>"GNU Terry Pratchett"</code> );`</p>
</div>
<div class="paragraph">
<p>`        filterChain.doFilter(httpServletRequest, httpServletResponse);`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p>The example above is a dummy example inspired by
<a href="http://www.nerdcore.de/2015/03/14/gnu-terry-pratchett-http-header/">GNU
Terry Pratchett HTTP-Header</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="src-196595725_Customfilters-ConfigurationandRegistrationoffilters"><a class="anchor" href="#src-196595725_Customfilters-ConfigurationandRegistrationoffilters"></a>Configuration and Registration of filters</h3>
<div class="paragraph">
<p>Filters in a Java webapp using servlets 2.5 must be registered in the
<code>web.xml</code>. However:</p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>When adding a filter to Magnolia - you should not register it in web.xml
but on Magnolia configuration. If the configuration is done properly -
filters are registered dynamically by Magnolia.</p>
</div>
<div class="paragraph">
<p>You can configure filters implementing MgnlFilter as well as other
filters with Magnolia configuration by using
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Configuration+app">Configuration
app</a>. Compared to "classical" web.xml based configuration - you can
change the configuration on the running instance. This also includes
enabling and disabling a filter.</p>
</div>
<div class="paragraph">
<p>As with any other configuration data - bootstrap the configuration
within your module with a bootstrap file or create an installation task
to ensure configuration is set correctly when your project must be
reinstalled or deployed.</p>
</div>
<div class="sect3">
<h4 id="src-196595725_safe-id-Q3VzdG9tZmlsdGVycy1BZGRhbm9kZXRvL3NlcnZlci9maWx0ZXJz"><a class="anchor" href="#src-196595725_safe-id-Q3VzdG9tZmlsdGVycy1BZGRhbm9kZXRvL3NlcnZlci9maWx0ZXJz"></a>Add a node to /server/filters</h4>
<div class="paragraph">
<p>To configure a filter add a node to /server/filters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">server</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">klacker</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.documentation.examples.templates.KlackerFilter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The fully qualified class name of your custom filter (which must
implement MgnlFilter ).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enabled</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong>, <em>default is `true`</em></p>
</div>
<div class="paragraph">
<p>Setting to false disables the filter.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mappings</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Add mappings.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196595725_Customfilters-Configuringandregisteringafilterwhichdoesnotimplementinfo.magnolia.cms.filters.MgnlFilter"><a class="anchor" href="#src-196595725_Customfilters-Configuringandregisteringafilterwhichdoesnotimplementinfo.magnolia.cms.filters.MgnlFilter"></a>Configuring and registering a filter which does not implement info.magnolia.cms.filters.MgnlFilter</h4>
<div class="paragraph">
<p>If you have a filter which can not implement MgnlFilter for some reason
but which should be registered to Magnolia filter chain, your
configuration should look like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">anotherFilter</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.cms.filters.FilterDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">decoratedFilter</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.documentation.examples.templates.AnotherFilter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">myInitParam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">some value</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>In this case class must be info.magnolia.cms.filters.FilterDecorator.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decoratedFilter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>required</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>The fully qualified class name of your custom filter (which does <em>not</em>
implement AbstractMgnlFilter ).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>A map to add filter init parameters. You may add as many parameters as
required. The init parameters can be read in the init method of the
filter
(<a href="#src-196595725_Customfilters-InitparametersforFilterDecorator">see
below</a>).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="src-196595725_Customfilters-Addingfilterinitparameters"><a class="anchor" href="#src-196595725_Customfilters-Addingfilterinitparameters"></a>Adding filter init parameters</h3>
<div class="paragraph">
<p>javax.servlet.Filter has an #init method which is called once when the
filter is initialized.</p>
</div>
<div class="sect3">
<h4 id="src-196595725_Customfilters-Initparametersforfiltersimplementinginfo.magnolia.cms.filters.MgnlFilter"><a class="anchor" href="#src-196595725_Customfilters-Initparametersforfiltersimplementinginfo.magnolia.cms.filters.MgnlFilter"></a>Init parameters for filters implementing info.magnolia.cms.filters.MgnlFilter</h4>
<div class="paragraph">
<p>When using filters implementing MgnlFilter you can use "normal"
Node2Bean mechanism. Add bean properties to the filter class and
configure appropriately:</p>
</div>
<div class="paragraph">
<p>Click here to expand to see the KlackerFilter with bean properties to
use for #init</p>
</div>
<div class="paragraph">
<p><code>public<code> </code>class<code> KlackerFilter </code>extends`</code> AbstractMgnlFilter {`</p>
</div>
<div class="paragraph">
<p>`  <code>`// bean properties</code></p>
</div>
<div class="paragraph">
<p>`    <code>private</code> String klackerMessage;`</p>
</div>
<div class="paragraph">
<p>`    <code>private</code> <code>int</code> maximumKlackerNumber;`</p>
</div>
<div class="paragraph">
<p>`    <code>`@Override</code></p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>void</code> init(FilterConfig filterConfig) <code>throws</code> ServletException {`</p>
</div>
<div class="paragraph">
<p>`        <code>super</code>.init(filterConfig);`</p>
</div>
<div class="paragraph">
<p>`        ``// use bean properties - here klackerMessage, maximumKlackerNumber - `</p>
</div>
<div class="paragraph">
<p>`        <code>`// to do something usefull</code></p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p>`    <code>`@Override</code></p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>void</code> doFilter(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse,`</p>
</div>
<div class="paragraph">
<p>`                         FilterChain filterChain) <code>throws</code> IOException, ServletException {`</p>
</div>
<div class="paragraph">
<p>`      <code>`// do something usefull here</code></p>
</div>
<div class="paragraph">
<p>`        filterChain.doFilter(httpServletRequest, httpServletResponse);`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p>`  <code>`// getter and setter methods for the bean properties</code></p>
</div>
<div class="paragraph">
<p>`    <code>public</code> String getKlackerMessage() {`</p>
</div>
<div class="paragraph">
<p>`        <code>return</code> klackerMessage;`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>void</code> setKlackerMessage(String klackerMessage) {`</p>
</div>
<div class="paragraph">
<p>`        <code>this</code>.klackerMessage = klackerMessage;`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>int</code> getMaximumKlackerNumber() {`</p>
</div>
<div class="paragraph">
<p>`        <code>return</code> maximumKlackerNumber;`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>void</code> setMaximumKlackerNumber(<code>int</code> maximumKlackerNumber) {`</p>
</div>
<div class="paragraph">
<p>`        <code>this</code>.maximumKlackerNumber = maximumKlackerNumber;`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p>Click here to expand configuration for KlackerFIlter init parameters</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">klacker</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.documentation.examples.templates.KlackerFilter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">klackerMessage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Klacker messages are save and reliable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximumKlackerNumber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196595725_Customfilters-Initparametersforfiltersnotimplementinginfo.magnolia.cms.filters.MgnlFilter"><a class="anchor" href="#src-196595725_Customfilters-Initparametersforfiltersnotimplementinginfo.magnolia.cms.filters.MgnlFilter"></a>Init parameters for filters not implementing info.magnolia.cms.filters.MgnlFilter</h4>
<div class="paragraph">
<p>If you are using FilterDecorator for custom filters not implementing
MgnlFilter , use the config node to add init parameters
(<a href="#src-196595725_Customfilters-Configuringandregisteringafilterwhichdoesnotimplementinfo.magnolia.cms.filters.MgnlFilter">see
above</a>). The parameters are set to javax.servlet.FilterConfig and can be
used in the init method:</p>
</div>
<div class="paragraph">
<p>Click here to expand to see an example how to access an init parameter
in a filter using FilterDecorator</p>
</div>
<div class="paragraph">
<p><code>public<code> </code>class<code> AnotherFilter </code>implements`</code> Filter {`</p>
</div>
<div class="paragraph">
<p>`    <code>`@Override</code></p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>void</code> init(FilterConfig filterConfig) <code>throws</code> ServletException {`</p>
</div>
<div class="paragraph">
<p>`      String initParam = filterConfig.get(<code>"myInitParam"</code>);`</p>
</div>
<div class="paragraph">
<p>`      <code>`// do something usefull here with the initParam</code></p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p>`    <code>`@Override</code></p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>void</code> doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) `</p>
</div>
<div class="paragraph">
<p>`      <code>throws</code> IOException, ServletException {`</p>
</div>
<div class="paragraph">
<p>`      <code>`// do something usefull here</code></p>
</div>
<div class="paragraph">
<p>`        filterChain.doFilter(servletRequest, servletResponse);`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p>`    <code>`@Override</code></p>
</div>
<div class="paragraph">
<p>`    <code>public</code> <code>void</code> destroy() {`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196595725_Customfilters-Ensurepositioninfilterchain"><a class="anchor" href="#src-196595725_Customfilters-Ensurepositioninfilterchain"></a>Ensure position in filter chain</h3>
<div class="paragraph">
<p>Filters are executed in the order they are in the chain, from top to
bottom. If you do not care about execution order, you can skip this
section, otherwise make sure the filter is in the right position in the
chain.</p>
</div>
<div class="paragraph">
<p>Magnolia provides task classes to adapt the order of the filter via
module version handler. Use FilterOrderingTask or OrderFilterBeforeTask.
The
<a href="#src-196595725_Customfilters-anc-moduleVersionHandler-to-change-filterPosition">code
example below</a> is using the <code>FilterOrderingTask</code>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196595725/filter-chain.png" alt="images/download/attachments/196595725/filter-chain.png" height="400"></span></p>
</div>
<div class="paragraph">
<p><span id="src-196595725_Customfilters-anc-moduleVersionHandler-to-change-filterPosition">#</span>#When
installing a module, you can define the position with
<code>ModuleVersionHandler#getExtraInstallTasks</code>.</p>
</div>
<div class="paragraph">
<p><code>public<code> </code>class<code> MyModuleVersionHandler </code>extends`</code> DefaultModuleVersionHandler {`</p>
</div>
<div class="paragraph">
<p>`    <code>`@Override</code></p>
</div>
<div class="paragraph">
<p>`    <code>protected</code> List&lt;Task&gt; getExtraInstallTasks(InstallContext installContext) {`</p>
</div>
<div class="paragraph">
<p>`        List&lt;Task&gt; extraInstallTasks = <code>new</code> ArrayList&lt;Task&gt;(<code>super</code>.getExtraInstallTasks(installContext));`</p>
</div>
<div class="paragraph">
<p>`        extraInstallTasks.add(<code>new</code> FilterOrderingTask(<code>"klacker"</code>, <code>new</code> String[]{<code>"contentType"</code>}));`</p>
</div>
<div class="paragraph">
<p>`        <code>return</code> extraInstallTasks;`</p>
</div>
<div class="paragraph">
<p>`    }`</p>
</div>
<div class="paragraph">
<p><code>}</code></p>
</div>
<div class="paragraph">
<p>The code above would ensure to have the filter "klacker" right after the
filter "contentType".</p>
</div>
<div class="paragraph">
<p>Request processing and filters</p>
</div>
<div class="paragraph">
<p>Dynamic servlet mapping</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
