<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bootstrapping in Maven modules - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/6.2.1/core/administration/Bootstrapping-in-Maven-modules.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
    integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
        <script src="https://use.fontawesome.com/ecc89e1666.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item magnolia-logo" href="../../../../index.html">
      </a>
      <input type="search" placeholder="Search the docs" name="search" id="searchBar">


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2/core/index.html">Core</a>
        <a class="navbar-item disabled" href="../../../../magnolia-docs/6.2/cloud/index.html">Cloud</a>
        <a class="navbar-item disabled" href="../../../../magnolia-general/faqs.html">FAQs</a>
        <a href="https://www.magnolia-cms.com/get-started.html" class="navbar-item" target="_blank"><button class="magnolia-btn">Try Magnolia</button></a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">6.2.1</button>
  <div class="version-menu">
    <a class="version is-current" href="Bootstrapping-in-Maven-modules.html">6.2.1</a>
    <a class="version is-missing" href="../../../6.2/index.html">6.2</a>
  </div>
</div>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Bootstrapping-in-Maven-modules.html">Bootstrapping in Maven modules - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>
</div>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="6.2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../releases/Releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../modules/Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/Support.html">Need Support?</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
</div>
    </div>
  </aside>
</div>
<main>
<article class="doc">
    <h1 class="page">Bootstrapping in Maven modules - Magnolia 6.2 documentation</h1>
    <div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Administration.html" class="bare">Administration.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Administration.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="">&#8230;&#8203;</a></p>
</li>
<li>
<p><a href="Importing-and-exporting-data.html">Importing and exporting data</a></p>
</li>
<li>
<p><a href="Importing-and-exporting-JCR-data-for-bootstrapping.html">Importing
and exporting JCR data for bootstrapping</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196595743"><a class="anchor" href="#src-196595743"></a>Bootstrapping in Maven modules</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p>Related topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="Importing-and-exporting-JCR-data-for-bootstrapping.html">Importing
and exporting JCR data for bootstrapping</a></p>
</li>
<li>
<p><a href="Bootstrapping-in-light-modules.html">Bootstrapping in light
modules</a></p>
</li>
<li>
<p><a href="https://wiki.magnolia-cms.com/display/DOCS62/Content+Importer+module">Content
Importer module</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This page explains how bootstrapping works in Maven modules.</p>
</div>
<div class="paragraph">
<p>Bootstrap files are used to load content into the JCR. Bootstrap files
can be shared across Magnolia instances and typically contain
configuration necessary to run modules or content (such as pages, assets
and others).</p>
</div>
<div class="sect2">
<h3 id="src-196595743_BootstrappinginMavenmodules-HowbootstrappinginMavenmodulesworks-overview"><a class="anchor" href="#src-196595743_BootstrappinginMavenmodules-HowbootstrappinginMavenmodulesworks-overview"></a>How bootstrapping in Maven modules works - overview</h3>
<div class="paragraph">
<p>Here&#8217;s an overview of how bootstrapping in Maven modules works:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="Importing-and-exporting-JCR-data-for-bootstrapping.html#src-196595738_ImportingandexportingJCRdataforbootstrapping-ImportingandexportingJCRdatawithappsfromtheAdminUI">Export</a>
JCR data files from Magnolia&#8217;s AdminCentral.</p>
</li>
<li>
<p>The exported files are placed in the
<a href="#src-196595743_BootstrappinginMavenmodules-Bootstrapfilelocation">bootstrap
folder</a> of the module or webapp.</p>
</li>
<li>
<p>On installation, the bootstrapped data is automatically* imported by
Magnolia and added to its corresponding JCR workspace.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*) Bootstrap files can also be imported or bootstrapped manually using
the import actions in the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/JCR+Browser+app">JCR
Browser</a> and many other apps. However, the content of this page is
limited to automatically importing bootstrap files and the term
"bootstrapping" is used in this context only.</p>
</div>
</div>
<div class="sect2">
<h3 id="src-196595743_BootstrappinginMavenmodules-Usingbootstrappingfolders"><a class="anchor" href="#src-196595743_BootstrappinginMavenmodules-Usingbootstrappingfolders"></a>Using bootstrapping folders</h3>
<div class="paragraph">
<p>Magnolia by default scans some dedicated folders during start up. Add
your bootstrap files to this folders to automate the import of the JCR
data of these files. Bootstrap files can reside at a webapp or module
level.</p>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>All bootstrap files are only imported once!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Webapp-based bootstrap files are imported during the first run of the
webapp when the Magnolia instance gets installed.</p>
</li>
<li>
<p>Module-based bootstrap files are imported during the installation of
the module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to import bootstrap files on every start up of the Magnolia
instance or of a module, you must use custom installation tasks which
are executed by the Module version handler or Module start up classes.</p>
</div>
<div class="sect3">
<h4 id="src-196595743_BootstrappinginMavenmodules-Bootsrappingonthewebapplevel"><a class="anchor" href="#src-196595743_BootstrappinginMavenmodules-Bootsrappingonthewebapplevel"></a>Bootsrapping on the webapp level</h4>
<div class="paragraph">
<p>The bootstrap directories for webapp bootstrap files are set by the
<code>magnolia.bootstrap.dir</code> property in the <code>magnolia.properties</code> file. See
<a href="Configuration-management.html">Configuration management</a> for more.</p>
</div>
<div class="paragraph">
<p>By default the bootstrapping directories on the webapp level are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Location</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WEB-INF/bootstrap/author</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files will only be imported if the current
context is an <strong><em>author</em></strong> context.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WEB-INF/bootstrap/common</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files will be imported on any context.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Bootstraps are loaded from this directory only the first time the WAR is
installed in the container that is running for the first time.</p>
</div>
<div class="paragraph">
<p>The directory should contain XML files for initialization of a blank
Magnolia instance. If no content is found in any of the repositories,
they are initialized by importing the XML files found in this directory.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196595743/location-webapp.png" alt="images/download/attachments/196595743/location-webapp.png"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196595743_BootstrappinginMavenmodules-Bootsrappingonamodulelevel"><a class="anchor" href="#src-196595743_BootstrappinginMavenmodules-Bootsrappingonamodulelevel"></a>Bootsrapping on a module level</h4>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Bootstrapping on a module level <strong>only works if your Module has a module
version handler</strong> class.</p>
</div>
<div class="paragraph">
<p>There are two directories that you can add bootstrap files to in a
Magnolia Maven module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>src/main/resources/mgnl-bootstrap/&lt;magnolia-module-name&gt;/</code></p>
</li>
<li>
<p><code>src/main/resources/mgnl-bootstrap-samples/&lt;magnolia-module-name&gt;/</code></p>
<div class="ulist">
<ul>
<li>
<p>Bootstrap files within <em>mgnl-bootstrap-samples</em> are only imported, if
the <em>magnolia.bootstrap.samples</em> property (which is set in the
<code>magnolia.properties</code> file, see
<a href="Configuration-management.html">Configuration management</a>) is true:</p>
<div class="paragraph">
<p><code>magnolia.bootstrap.samples=``true</code></p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/download/attachments/196595743/location-module.png" alt="images/download/attachments/196595743/location-module.png"></span></p>
</div>
<div class="sect4">
<h5 id="src-196595743_BootstrappinginMavenmodules-Example-Bootstrapfilesinthetravel-demomodule"><a class="anchor" href="#src-196595743_BootstrappinginMavenmodules-Example-Bootstrapfilesinthetravel-demomodule"></a>Example - Bootstrap files in the travel-demo module</h5>
<div class="paragraph">
<p>Here are the configuration files bootstrapped on installation of the
<code>travel-demo</code> module.</p>
</div>
<div class="paragraph">
<p>The files are in the directory
<code>/src/main/resources/mgnl-bootstrap/travel-demo</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>File</strong></th>
<th class="tableblock halign-left valign-top"><strong>Configuration node</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config.modules.site.config.themes.travel-demo-theme.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/modules/site/config/themes/travel-demo-theme</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://wiki.magnolia-cms.com/display/DOCS62/Theme">Theme</a>
configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config.modules.travel-demo.config.travel.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/modules/travel-demo/config/travel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Templates, theme and i18n nodes
of <a href="https://wiki.magnolia-cms.com/display/DOCS62/Site+definition">Site
definition</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config.server.filters.i18n.bypasses.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/server/filters/i18n/bypasses</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i18n content support filter bypass.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config.modules.public-user-registration.config.configurations.travel.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/modules/public-user-registration/config/configurations/travel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUR
module configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config.server.filters.securityCallback.clientCallbacks.travel-demo-pur.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/server/filters/securityCallback/clientCallbacks/travel-demo-pur</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security callback for public user registration.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="src-196595743_BootstrappinginMavenmodules-Bootstrappingcontentintoclusternodes"><a class="anchor" href="#src-196595743_BootstrappinginMavenmodules-Bootstrappingcontentintoclusternodes"></a>Bootstrapping content into cluster nodes</h3>
<div class="paragraph">
<p>The <code>magnolia.repositories.jackrabbit.cluster.master</code> property can be
used to identity an instance as a cluster master node. By default this
property is set to <code>false</code> in <code>magnolia.properties</code>. When enabled
Magnolia bootstraps content only into master nodes. This ensures that
other (replica) nodes installed later don&#8217;t override already
bootstrapped content. See
<a href="Configuration-management.html">Configuration management</a> for more.</p>
</div>
</div>
<div class="sect2">
<h3 id="src-196595743_BootstrappinginMavenmodules-Bootstrapconfigurationproperties"><a class="anchor" href="#src-196595743_BootstrappinginMavenmodules-Bootstrapconfigurationproperties"></a>Bootstrap configuration properties</h3>
<div class="paragraph">
<p>The table below contains a list of
<a href="Configuration-management.html">configuration properties</a> set in
<code>magnolia.properties</code> that are relevant to bootstrapping.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia.bootstrap.samples</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong>, <em>default is `true`</em></p>
</div>
<div class="paragraph">
<p>Installs sample bootstrap files located in
<code>/mgnl-bootstrap-samples/&lt;module name&gt;</code> directory.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia.bootstrap.dir</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong>, <em>default is
`WEB-INF/bootstrap/author WEB-INF/bootstrap/common`</em></p>
</div>
<div class="paragraph">
<p>Sets the directory for webapp bootstrap files.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia.repositories.jackrabbit.cluster.master</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong>, <em>default is `false`</em></p>
</div>
<div class="paragraph">
<p>Identifies an instance as cluster master node.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Bootstrapping in light modules</p>
</div>
<div class="paragraph">
<p>Downloading YAML definition</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">PAGE CONTENTS</h3>
    <div id="article-toc"></div>
</aside>
<script>
    var clipboard = new ClipboardJS('.btn');

    clipboard.on('success', function (e) {
        console.log(e);
    });

    clipboard.on('error', function (e) {
        console.log(e);
    });
</script>
</main>
</div>
<footer class="footer">
    <p> &copy; <span id="year"></span> <a href="http://www.magnolia-cms.com" target="_blank"
        title="Link to Magnolia's official website" class="footer-link">Magnolia CMS</a></p>
    
    <div class="footer-bottom">
      <hr class="footer-hr">
    </div>

    <div class="bottom-icons">
      <a href="https://www.facebook.com/Magnolia" target="_blank" title="Magnolia's Facebook Page"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a> <a href="https://twitter.com/magnolia_cms" target="_blank" title="Magnolia's Twitter Page"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a> <a href="https://www.linkedin.com/company/magnolia-cms/" target="_blank" title="Magnolia's LinkedIn Page"><i
        class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a>
    </div>

    <div class="bottom-logo">

    </div>

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.10.0/tocbot.min.js"></script>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script>
    document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3, h4, h5',
        collapseDepth: 3,
        positionFixedSelector: null,
        scrollSmooth: true,
        scrollSmoothDuration: 420
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>

 <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
      appId: '89ZVZ4S26W',
      apiKey: 'a797119372b8a613eb38a9564867085c',
      indexName: 'dev_DOCS',
      inputSelector: '#searchBar',
      algoliaOptions: { hitsPerPage: 10 },
    });
  </script>
  </body>
</html>
