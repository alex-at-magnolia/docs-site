<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mail - Magnolia 6.2 documentation :: Magnolia CMS Docs</title>
    <link rel="canonical" href="http://localhost:9096/magnolia-docs/core/modules/Mail.html">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="http://localhost:9096">
        <img class="logo" src="../../../../_/img/magnolia-medium.png" style="width: 10rem; height:auto; margin-left:0.8rem; margin-top:0.4rem;" alt="Magnolia">
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Releases</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Core</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Cloud</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Get Magnolia</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
  <div class="lower-head">
    
  </div>
</header>
<div class="body">
<div class="nav-container" data-component="magnolia-docs" data-version="6.2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Magnolia Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/hello-magnolia.html">Hello Magnolia</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/getting-started/hello-cloud.html">Hello Magnolia Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dump</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../releases/Releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrade/Upgrading-to-Magnolia-6.2.x.html">Upgrading-to-Magnolia-6.2.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/Features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cloud/Magnolia-Cloud.html">Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/Administration.html">Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/Developing.html">Developing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templating/Templating.html">Templating</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../authoring/Authoring.html">Authoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connector-packs/Connector_Packs.html">Connector Packs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../apps/Apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/Magnolia-CLI.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../special-features/Special-Features.html">Special Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/Support.html">Need Support?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#FAQS.adoc">FAQs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Magnolia Documentation</span>
    <span class="version">6.2.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Magnolia Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">master</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">6.2.1</a>
        </li>
        <li class="version">
          <a href="../../../6.2/index.html">6.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Magnolia Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../magnolia-general/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">6.2.1</button>
  <div class="version-menu">
    <a class="version" href="../../../core/modules/Mail.html">master</a>
    <a class="version is-current" href="Mail.html">6.2.1</a>
    <a class="version is-missing" href="../../../6.2/index.html">6.2</a>
  </div>
</div>
  <a href="../../../releases/Releases.html" class="home-link"></a>

<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Magnolia Documentation</a></li>
    <li><a href="Mail.html">Mail - Magnolia 6.2 documentation</a></li>
  </ul>
</nav>

</div>
  <div class="content">
<article class="doc">
<h1 class="page">Mail - Magnolia 6.2 documentation</h1>
<div id="preamble">
<div class="sectionbody">
<div id="ht-loader" class="paragraph">
<p>This content cannot be displayed without JavaScript.<br>
Please enable JavaScript and reload the page.</p>
</div>
<div class="paragraph">
<p><a href="" class="bare"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docs62"><a class="anchor" href="#_docs62"></a><span class="ht-logo-label">DOCS62</span> <span class="image"><img src="../../_images/DOCS62.png" alt="image"></span></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Modules.html" class="bare">Modules.html</a></p>
</div>
<div class="sect2">
<h3 id="_magnolia_6_2_documentation"><a class="anchor" href="#_magnolia_6_2_documentation"></a>Magnolia 6.2 documentation</h3>
<div id="ht-sidebar-dragbar" class="paragraph">
<p><span class="drag-handle-1"> [.drag-handle-2]</span> [.drag-handle-3]##</p>
</div>
<div id="ht-breadcrumb" class="ulist">
<ul>
<li>
<p><a href="Modules.html">Magnolia 6.2 documentation</a></p>
</li>
<li>
<p><a href="">&#8230;&#8203;</a></p>
</li>
<li>
<p><a href="List_of_modules.html">List of modules</a></p>
</li>
<li>
<p><a href="Mail_module.html">Mail module</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="src-196597075"><a class="anchor" href="#src-196597075"></a>Mail</h2>
<div class="sectionbody">
<div id="main-content" class="paragraph">
<p>Related:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="Mail_module.html">Mail module</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <a href="Mail_module.html">Mail module</a> enables the sending of emails
from within Magnolia. The module can be used to send plain text and HTML
messages, and template-based messages.</p>
</div>
<div class="paragraph">
<p>Sending emails from Magnolia is typically an automated process. An event
acts as a trigger. For example, a verification message is sent to a user
when they fill a registration form.</p>
</div>
<div class="paragraph">
<p>Other Magnolia modules such as <a href="Form_module.html">Form</a>,
<a href="Observation_module.html">Observation</a> and
<a href="Public_User_Registration_module.html">Public User Registration</a> use
the Mail module for messaging.</p>
</div>
<div class="sect2">
<h3 id="src-196597075_Mail-Configuration"><a class="anchor" href="#src-196597075_Mail-Configuration"></a>Configuration</h3>
<div class="paragraph">
<p>The Mail module is configured in <code>/modules/mail</code> . Besides
<a href="#src-196597075_Mail-ConfiguringSMTP">configuring SMTP</a> settings the
module is ready to use.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modules</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldTypes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commands</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597075_Mail-Mailcommand"><a class="anchor" href="#src-196597075_Mail-Mailcommand"></a>Mail command</h3>
<div class="paragraph">
<p>MailCommand is used to send all mails in Magnolia. The command can
execute on events such as user actions, workflow steps and scheduled
jobs. You can write message templates and test them manually in the
<a href="#src-196597075_Mail-ConfiguringSMTP">Mail tools app</a> before
automating the process for production use.</p>
</div>
<div class="paragraph">
<p>The command is registered in <code>/modules/mail/commands/default/sendMail</code> .</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Values</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modules</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commands</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendMail</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.mail.commands.MailCommand</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="src-196597075_Mail-ConfiguringSMTP"><a class="anchor" href="#src-196597075_Mail-ConfiguringSMTP"></a>Configuring SMTP</h3>
<div class="paragraph">
<p>The Mail module installs the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Mail+Tools+app">Mail Tools
app</a>. The app is based on the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Small+app+concept">small app
concept</a>. Permission to access the app is limited to the <code>superuser</code>
role in both the app configuration and the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/App+launcher+layout">app
launcher layout</a>. Fields that contain sensitive data, such as passwords,
should be managed using the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Passwords+app">Passwords
app</a>.</p>
</div>
<div class="paragraph">
<p>The default transfer protocol (SMTP) settings are configured at
<strong>Configuration &gt;</strong> <code>/modules/mail/config/smtp</code> . These setting display
the <strong>Mail</strong> subapp.</p>
</div>
<div class="paragraph">
<p>Add your SMTP settings in the <strong>Mail</strong> supapp to update the <code>smtp</code>
configuration node:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SMTP server (the name of your mail server).</p>
</li>
<li>
<p>SMTP port (dependent on security setting).</p>
</li>
<li>
<p>Authentication:</p>
<div class="ulist">
<ul>
<li>
<p>No authentication required.</p>
</li>
<li>
<p>Authentication with username and password:</p>
<div class="ulist">
<ul>
<li>
<p>Username</p>
</li>
<li>
<p>Password</p>
</li>
</ul>
</div>
</li>
<li>
<p>Authentication with <a href="https://tools.ietf.org/html/rfc6749">OAuth 2.0</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Username</p>
</li>
<li>
<p>Client ID</p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc6749#section-1.5">Refresh Token</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc6749#section-2.3">Client Secret</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Connection security method:</p>
<div class="ulist">
<ul>
<li>
<p>No encryption.</p>
</li>
<li>
<p>SSL.</p>
</li>
<li>
<p>STARTTLS.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="src-196597075_Mail-Verifyingsetup"><a class="anchor" href="#src-196597075_Mail-Verifyingsetup"></a>Verifying setup</h3>
<div class="paragraph">
<p>The <strong>Verify setup</strong> subapp provides tools to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify the current mail settings.</p>
</li>
<li>
<p>Verify <a href="#src-196597075_Mail-Messagetemplates">message templates</a>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="src-196597075_Mail-Verifythecurrentmailsettings"><a class="anchor" href="#src-196597075_Mail-Verifythecurrentmailsettings"></a>Verify the current mail settings</h4>
<div class="paragraph">
<p>Use the first tool to send test mails to verify your
<a href="#src-196597075_Mail-ConfiguringSMTP">SMTP settings</a>. The tool sends
a pre-configured simple mail with an optional attachment to the email
address in the logged in user&#8217;s profile.</p>
</div>
<div class="paragraph">
<p>To send a test message:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Access the relevant profile, typically <code>superuser</code> , in the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Security+app">Security app</a>.
Go to <strong>System users</strong> and add your email address in the <code>superuser</code>
profile.</p>
</li>
<li>
<p>Select either plain text or rich text mail type.</p>
</li>
<li>
<p>Optionally, select an asset attachment from
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Digital+asset+management">Assets
chooser</a>.</p>
</li>
<li>
<p>Click <strong>Send test mail</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The content of the test mail is configured in
<code>/modules/mail/config/simpleConfiguration</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modules</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">simpleConfiguration</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">body</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a simple mail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:test@example.com">test@example.com</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a test mail.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196597075_Mail-Verifymessagetemplates"><a class="anchor" href="#src-196597075_Mail-Verifymessagetemplates"></a>Verify message templates</h4>
<div class="paragraph">
<p>The second tool in the <strong>Verify setup</strong> subapp allows you to verify your
mail message templates. Message templates are typically used by forms on
pages to send the data to the user who submitted the form.</p>
</div>
<div class="paragraph">
<p>As in the case of <a href="#src-196597075_Mail-Verifyingsetup">verifying mail
settings</a>, the tool sends the test mail to the email address configured
in your user profile.</p>
</div>
<div class="paragraph">
<p>To send a test message:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select a template in the dropdown. Only registered templates are
available. See <a href="#src-196597075_Mail-Templatesconfiguration">Templates
configuration</a> for more information.</p>
</li>
<li>
<p>Enter the test data. The content depends on the template
configuration.</p>
</li>
<li>
<p>Click <strong>Send test mail</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="src-196597075_Mail-Templatesconfiguration"><a class="anchor" href="#src-196597075_Mail-Templatesconfiguration"></a>Templates configuration</h4>
<div class="paragraph">
<p>Templates are configured in <code>/modules/mail/config/templateConfiguration</code>
. The <code>testFreemarker</code> template is provided as an example.</p>
</div>
<div class="paragraph">
<p>MailTemplate allows for a number of configuration nodes and properties.
The following are the most commonly used:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">templatesConfiguration</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">testFreemarker</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attachments</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contentType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">html</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:testfreemarker@example.com">testfreemarker@example.com</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a test email for freemarker template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">templateFile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">testFreemarker.html</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">freemarker</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pageCommentsNotification</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 22%;">
<col style="width: 78%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>templatesConfiguration</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Templates configuration node.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;template name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Template name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attachments</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>MailAttachment provides for a number of
<a href="#src-196597075_Mail-Attachments">attachments</a> options.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parameters</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Any parameters to be passed to the script.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/<em>/images/icons/emoticons/warning.svg" alt="images/s/en_GB/8100/5084f018d64a97dc638ca9a178856f851ea353ff/</em>/images/icons/emoticons/warning.svg"></span>
Do not use parameter names <em>type</em>, <em>contentType</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>templateFile</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Relative path to the template script.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>required</strong></p>
</div>
<div class="paragraph">
<p>Scripting language used in the template.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contentType</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Type of content for the message body. It is only necessary to include
this property for HTML emails.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>from</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Email address that will appear in the From field of the message, unless
defined elsewhere, for example in Form module.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subject</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Subject line of the email, unless defined elsewhere for example in the
Form module.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p><code>pageCommentsNotification</code> is used by the
<a href="https://wiki.magnolia-cms.com/display/DOCS62/Commenting">Commenting</a>
module.</p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597075_Mail-Templaterenderers"><a class="anchor" href="#src-196597075_Mail-Templaterenderers"></a>Template renderers</h4>
<div class="paragraph">
<p>Template renderers are registered in
<code>/modules/mail/config/factory/renderers</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">factory</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">renderers</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">freemarker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.mail.templates.impl.FreemarkerEmail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">magnolia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.mail.templates.impl.MgnlPageEmail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">simple</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.mail.templates.impl.SimpleEmail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">info.magnolia.module.mail.MgnlMailFactory</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderers</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Renderers node.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>freemarker</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Renders FreeMarker email templates.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>magnolia</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Renders Magnolia web pages in an email.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>simple</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Renders simple text emails that do not require a specific scripting
language to be parsed.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196597075_Mail-Templatescript"><a class="anchor" href="#src-196597075_Mail-Templatescript"></a>Template script</h4>
<div class="paragraph">
<p>Here&#8217;s the example <code>testFreemarker.html</code> template script.</p>
</div>
<div class="paragraph">
<p>`&lt;h1&gt;${user}&lt;/h2. `</p>
</div>
<div class="paragraph">
<p>`    &lt;img src=<code>"cid:0001"</code>/&gt;`</p>
</div>
<div class="paragraph">
<p>`    This is the path that has been changed: ${path} `</p>
</div>
<div class="paragraph">
<p>This script requires two parameters, <code>user</code> and <code>path</code> , that need to be
provided in the <strong>Data to send</strong> box in the
<a href="#src-196597075_Mail-Messagetemplates">Verify templates tool</a>. The
parameters are passed to the template script and rendered in the
message. Each parameter should be added on a single line in the
<code>&lt;parameter name=&lt;value&gt;</code> format. For example:</p>
</div>
<div class="paragraph">
<p><code>user=jsmith</code></p>
</div>
<div class="paragraph">
<p><code>path=/my/path</code></p>
</div>
</div>
<div class="sect3">
<h4 id="src-196597075_Mail-Attachments"><a class="anchor" href="#src-196597075_Mail-Attachments"></a>Attachments</h4>
<div class="paragraph">
<p>In the <code>attachments</code> node you can define properties for the parameters
called by the script. For example, the <code>testFreemarker.html</code> template
script references <code>img src="cid:0001"</code> . The <code>cid</code> property identifies
the attachment as an image (value=\{}) and the <code>url</code> property sets the
image location.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">testFreemarker</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attachments</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0001</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">img</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.magnolia-cms.com/.imaging/amplify-miami-2014/imageForTeaserBinary/miami.png" class="bare">http://www.magnolia-cms.com/.imaging/amplify-miami-2014/imageForTeaserBinary/miami.png</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>mimeMultipart</code> property can be used to define the structure of a
MgnlMultipartEmail :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;template configuration&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attachments</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;attachment name&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mimeMultipart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mixed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.magnolia-cms.com/.imaging/amplify-miami-2014/imageForTeaserBinary/miami.png" class="bare">http://www.magnolia-cms.com/.imaging/amplify-miami-2014/imageForTeaserBinary/miami.png</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;attachment name&gt;</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mimeMultipart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">related</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.magnolia-cms.com/.imaging/amplify-miami-2014/imageForTeaserBinary/miami.png" class="bare">http://www.magnolia-cms.com/.imaging/amplify-miami-2014/imageForTeaserBinary/miami.png</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;attachment name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong></p>
</div>
<div class="paragraph">
<p>Attachment name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mimeMulitpart</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>optional</strong>, <em>default is `related`</em></p>
</div>
<div class="paragraph">
<p>Defines the structure of a MgnlMultipartEmail .</p>
</div>
<div class="paragraph">
<p>Values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>mixed</code>: Standard email attachment.</p>
</li>
<li>
<p><code>related</code>: Attachment shown inline.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>MailAttachment does not use Content-ID properties but uses attachment
names (not file names).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="src-196597075_Mail-Creatingacustomtemplate"><a class="anchor" href="#src-196597075_Mail-Creatingacustomtemplate"></a>Creating a custom template</h4>
<div class="paragraph">
<p>To create a custom template</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a template named, for example <code>simpleTemplate.html</code> using
Freemarker code.</p>
<div class="paragraph">
<p><code>&lt;html&gt;</code></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>`  &lt;body&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;p&gt;Dear ${fullName},&lt;/p&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;p&gt;Please follow <code>this</code> link in order to validate your account: `</p>
</div>
<div class="paragraph">
<p>`    &lt;a href=<code>"${href}"</code>&gt;Verify your user&lt;/a&gt;&lt;/p&gt;`</p>
</div>
<div class="paragraph">
<p>`    &lt;p&gt;Thank you!&lt;/p&gt;`</p>
</div>
<div class="paragraph">
<p>`  &lt;/body&gt;`</p>
</div>
<div class="paragraph">
<p><code>&lt;/html&gt;</code>
. Save the template to the file system in for example,
<code>/&lt;CATALINA_HOME&gt;/webapps/&lt;contextPath&gt;/templates/simpleTemplate.html</code> .
You can put the template anywhere in the <code>webapps</code> folder of a Magnolia
instance.
. Register the new template in the <code>/config/templatesConfiguration</code>
node.</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">config</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">templatesConfiguration</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">newUserRegistration</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attachments</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameters</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contentType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">html</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:info@registrations.com">info@registrations.com</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New User Registration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">templateFile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">templates/simpleTemplate.html</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">freemarker</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The new template appears in the dropdown list in the
<a href="#src-196597075_Mail-Verifytemplatestool">Verify templates tool</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>[.admonition-icon .confluence-information-macro-icon]##</p>
</div>
<div class="paragraph">
<p>Email applications and clients on the market display emails in different
ways. The main reason for this is varied support for CSS styles. You can
use a web based service such as
<a href="http://www.mailchimp.com/features/power_features/inbox_inspector/">Mailchimp
Inbox Inspector</a> to preview the message in various clients and work
towards consistency.</p>
</div>
<div class="paragraph">
<p>Mail module</p>
</div>
<div class="paragraph">
<p>Marketing Tags module</p>
</div>
<div class="paragraph">
<p><a href="#" class="bare">#</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.magnolia-cms.com" class="icon">
            <img src="../../../../_/img/magnolia-medium.png" alt="Magnolia">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://documentation.magnolia-cms.com" target="_blank" rel="noopener">Full Docs Set</a></li>
          <li><a href="https://wiki.magnolia-cms.com/" target="_blank" rel="noopener">Community Wiki</a></li>
          <li><a href="https://support.magnolia-cms.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://marketplace.magnolia-cms.com/" target="_blank" rel="noopener">Extend Magnolia</a></li>
          <li><a href="https://magnolia-cms.com/blog" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.magnolia-cms.com/training" target="_blank" >Training</a></li>
        </ul>
      </div>
      <div class="col">
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Magnolia" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/magnolia_cms" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/magnolia-cms" target="_blank" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2020 Magnolia International Ltd. All rights reserved.</span>
      <a href="https://www.magnolia-cms.com/legal/privacy.html">Privacy Policy</a>
    </div>
  </div>
</footer>

<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
